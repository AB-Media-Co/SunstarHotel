var oe=Object.defineProperty,ce=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var G=Object.getOwnPropertySymbols;var ge=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var J=(g,c,r)=>c in g?oe(g,c,{enumerable:!0,configurable:!0,writable:!0,value:r}):g[c]=r,i=(g,c)=>{for(var r in c||(c={}))ge.call(c,r)&&J(g,r,c[r]);if(G)for(var r of G(c))ue.call(c,r)&&J(g,r,c[r]);return g},n=(g,c)=>ce(g,me(c));var K=(g,c,r)=>new Promise((v,y)=>{var w=d=>{try{f(r.next(d))}catch(b){y(b)}},S=d=>{try{f(r.throw(d))}catch(b){y(b)}},f=d=>d.done?v(d.value):Promise.resolve(d.value).then(w,S);f((r=r.apply(g,c)).next())});import{r as x,j as e,h as _}from"./index-CpVBVbB-.js";import{u as xe,a as he,b as be,c as pe,d as fe,e as ye,f as je,g as Ne}from"./useTravelPackagesHook-Ct3hXgh7.js";import{M as ve}from"./MultipleImageUpload-CCra_WYS.js";import{I as z}from"./ImageUpload-BxiQRTlO.js";import{uploadImagesAPIV2 as we}from"./useHotelHook2-BjuuErFG.js";import"./createSvgIcon--wsIvi5v.js";import"./clsx-B-dksMZM.js";import"./TextField-BnMyjTMi.js";import"./useFormControl-DCbNTxDm.js";import"./hoist-non-react-statics.cjs-Cxfv-rx9.js";import"./index-BRYydkvF.js";const Re=()=>{const{data:g=[]}=xe(),{data:c=[]}=he(),r=be(),v=pe(),y=fe(),w=ye(),S=je(),f=Ne(),[d,b]=x.useState({name:"",image:""}),[D,T]=x.useState(""),[E,M]=x.useState(""),[F,R]=x.useState(""),[k,H]=x.useState(""),[C,$]=x.useState(""),[I,O]=x.useState(""),[j,B]=x.useState(!1),[Se,L]=x.useState(!1),[p,N]=x.useState("states"),[Q,P]=x.useState([]),[W,V]=x.useState(!1),[l,o]=x.useState({_id:void 0,stateId:"",title:"",image:"",images:Q,duration:{nights:"",days:""},price:"",highlights:[],inclusions:[],exclusions:[],description:"",itinerary:[],topSelling:!1}),q=(a,t)=>{b(s=>n(i({},s),{[a]:t}))},h=(a,t)=>{if(a.includes("duration.")){const s=a.split(".")[1];o(u=>n(i({},u),{duration:n(i({},u.duration),{[s]:t})}))}else o(a==="topSelling"?s=>n(i({},s),{topSelling:!s.topSelling}):a==="images"?s=>n(i({},s),{images:t}):a==="image"?s=>{const m=(Array.isArray(s.images)?s.images:[]).filter(de=>de!==t),re=t?[t,...m]:m;return n(i({},s),{image:t,images:re})}:s=>n(i({},s),{[a]:t}))},U=()=>{o({_id:void 0,stateId:"",title:"",image:"",images:[],duration:{nights:"",days:""},price:"",highlights:[],inclusions:[],exclusions:[],description:"",itinerary:[],topSelling:!1}),P([])},X=()=>{if(!l.stateId||!l.title){alert("Please fill in required fields (State and Title)");return}if(!l.image){alert("Please upload the Main Image");return}l._id?w.mutate(l,{onSuccess:U}):v.mutate(l,{onSuccess:U})},Y=a=>{const t=a.image||Array.isArray(a.images)&&a.images[0]||"";o(n(i({},a),{image:t})),P(a.images||[]),N("packages"),window.scrollTo({top:0,behavior:"smooth"})},Z=a=>{window.confirm("Are you sure you want to delete this package?")&&y.mutate(a)},ee=a=>K(void 0,null,function*(){if(a.length===0){_.error("No images selected");return}V(!0);try{const t=yield we(a),u=(Array.isArray(t)?t:[t])[0].imageUrls;P(m=>[...m,...u]),o(m=>n(i({},m),{images:[...m.images||[],...u]})),_.success("Images uploaded successfully!")}catch(t){console.error("Error uploading images:",t),_.error("Error uploading images")}V(!1)}),ae=a=>{o(t=>{const s=(t.images||[]).filter(m=>m!==a),u=t.image===a?s[0]||"":t.image;return n(i({},t),{images:s,image:u})})},te=()=>{if(!k||!C||!I)return;const a={day:k,title:C,details:I};o(t=>n(i({},t),{itinerary:[...t.itinerary,a]})),H(""),$(""),O("")},se=a=>{o(t=>n(i({},t),{itinerary:t.itinerary.filter((s,u)=>u!==a)}))},A=()=>b({_id:"",name:"",image:""}),le=()=>{if(!d.name||!d.image){alert("Please fill in State Name and Image");return}d._id?S.mutate(d,{onSuccess:A}):r.mutate(d,{onSuccess:A})},ie=a=>{b(a),window.scrollTo({top:0,behavior:"smooth"})},ne=a=>{window.confirm("Delete this state?")&&f.mutate(a)};return e.jsxs("div",{className:"max-w-6xl mx-auto p-6 bg-gray-50 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-8",children:"Tour and Travel Management"}),e.jsxs("div",{className:"flex border-b border-gray-200 mb-6",children:[e.jsx("button",{className:`py-2 px-4 font-medium ${p==="states"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`,onClick:()=>N("states"),children:"States"}),e.jsx("button",{className:`py-2 px-4 font-medium ${p==="packages"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`,onClick:()=>N("packages"),children:"Packages"}),e.jsx("button",{className:`py-2 px-4 font-medium ${p==="view"?"text-blue-600 border-b-2 border-blue-600":"text-gray-500"}`,onClick:()=>N("view"),children:"View Packages"})]}),p==="states"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Create New State"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Name"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter state name",value:d.name,onChange:a=>q("name",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"State Image"}),e.jsx(z,{feature:d,handleFeatureChange:q,setImageUpload:B,index:0})]})]}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:le,disabled:j,children:j?"Uploading…":d._id?"Update State":"Create State"}),d._id&&e.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:A,children:"Cancel"})]}),e.jsx("h3",{className:"text-xl font-semibold text-gray-700 mt-10 mb-4",children:"All States"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(a=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[e.jsx("img",{src:a.image,alt:a.name,className:"w-full h-40 object-cover"}),e.jsxs("div",{className:"p-4 flex justify-between items-center",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-800",children:a.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>ie(a),className:"bg-blue-600 hover:bg-blue-700 text-white text-xs font-medium px-3 py-1 rounded",children:"Edit"}),e.jsx("button",{onClick:()=>ne(a._id),className:"bg-red-600 hover:bg-red-700 text-white text-xs font-medium px-3 py-1 rounded",children:"Delete"})]})]})]},a._id))})]}),p==="packages"&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:l._id?"Edit Package":"Create New Package"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select State*"}),e.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:l.stateId,onChange:a=>h("stateId",a.target.value),children:[e.jsx("option",{value:"",children:"Select State"}),g.map(a=>e.jsx("option",{value:a._id,children:a.name},a._id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Title*"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter package title",value:l.title,onChange:a=>h("title",a.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload Main Image *"}),e.jsx(z,{feature:{image:l.image||""},handleFeatureChange:(a,t)=>{a==="image"&&h("image",t)},setImageUpload:L,index:101}),l.image&&e.jsx("div",{className:"mt-2",children:e.jsx("img",{src:l.image,alt:"Main preview",className:"w-28 h-20 object-cover rounded border"})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Package Image*"}),e.jsx(ve,{onUploadSuccess:ee,isUploading:W,imagesUrls:l.images,onRemoveImageUrl:ae})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nights"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Number of nights",value:l.duration.nights,onChange:a=>h("duration.nights",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Days"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Number of days",value:l.duration.days,onChange:a=>h("duration.days",a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price (₹)"}),e.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Package price",value:l.price,onChange:a=>h("price",a.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("textarea",{className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 min-h-[100px]",placeholder:"Package description",value:l.description,onChange:a=>h("description",a.target.value)})]}),e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("input",{type:"checkbox",id:"topSelling",checked:l.topSelling,onChange:()=>h("topSelling"),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),e.jsx("label",{htmlFor:"topSelling",className:"ml-2 block text-sm text-gray-700",children:"Mark as Top Selling Package"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Itinerary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Day"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Day (e.g., Day 1)",value:k,onChange:a=>H(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Title (e.g., Arrival at Jammu)",value:C,onChange:a=>$(a.target.value)})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Details"}),e.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-md",placeholder:"Details (e.g., Pickup from airport)",value:I,onChange:a=>O(a.target.value)})]})]}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200 mb-4",onClick:te,children:"Add Itinerary Item"}),e.jsx("div",{className:"space-y-3",children:l.itinerary.map((a,t)=>e.jsx("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h5",{className:"font-medium text-gray-800",children:a.day}),e.jsx("h5",{className:"font-medium text-gray-800",children:a.title}),e.jsx("p",{className:"text-gray-600",children:a.details})]}),e.jsx("button",{className:"text-red-600 hover:text-red-800 ml-2",onClick:()=>se(t),children:"Remove"})]})},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Highlights"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:D,onChange:a=>T(a.target.value),placeholder:"Add highlight"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{o(a=>n(i({},a),{highlights:[...a.highlights,D]})),T("")},children:"Add"})]}),e.jsx("ul",{className:"space-y-1",children:l.highlights.map((a,t)=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[e.jsx("span",{children:a}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>o(s=>n(i({},s),{highlights:s.highlights.filter((u,m)=>m!==t)})),children:"Remove"})]},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Inclusions"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:E,onChange:a=>M(a.target.value),placeholder:"Add inclusion"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{o(a=>n(i({},a),{inclusions:[...a.inclusions,E]})),M("")},children:"Add"})]}),e.jsx("ul",{className:"space-y-1",children:l.inclusions.map((a,t)=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[e.jsx("span",{children:a}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>o(s=>n(i({},s),{inclusions:s.inclusions.filter((u,m)=>m!==t)})),children:"Remove"})]},t))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h4",{className:"text-lg font-medium text-gray-700 mb-2",children:"Exclusions"}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",value:F,onChange:a=>R(a.target.value),placeholder:"Add exclusion"}),e.jsx("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md transition duration-200",onClick:()=>{o(a=>n(i({},a),{exclusions:[...a.exclusions,F]})),R("")},children:"Add"})]}),e.jsx("ul",{className:"space-y-1",children:l.exclusions.map((a,t)=>e.jsxs("li",{className:"flex items-center justify-between bg-gray-100 px-3 py-2 rounded",children:[e.jsx("span",{children:a}),e.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>o(s=>n(i({},s),{exclusions:s.exclusions.filter((u,m)=>m!==t)})),children:"Remove"})]},t))})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:X,disabled:j,children:j?"Uploading...":l._id?"Update Package":"Create Package"}),l._id&&e.jsx("button",{className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-6 rounded-md transition duration-200",onClick:U,children:"Cancel"})]})]}),p==="view"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"All Packages"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(a=>e.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.images[0],alt:a.title,className:"w-full h-48 object-cover"}),a.topSelling&&e.jsx("span",{className:"absolute top-2 right-2 bg-yellow-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:"Top Selling"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:a.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:a.description}),e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:["₹",a.price]}),e.jsxs("span",{className:"text-sm text-gray-500",children:[a.duration.nights,"N/",a.duration.days,"D"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-1 px-3 rounded text-sm transition duration-200",onClick:()=>Y(a),children:"Edit"}),e.jsx("button",{className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-medium py-1 px-3 rounded text-sm transition duration-200",onClick:()=>Z(a._id),children:"Delete"})]})]})]},a._id))})]})]})};export{Re as default};
