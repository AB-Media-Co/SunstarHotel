var w=(s,t,r)=>new Promise((h,i)=>{var a=l=>{try{o(r.next(l))}catch(n){i(n)}},d=l=>{try{o(r.throw(l))}catch(n){i(n)}},o=l=>l.done?h(l.value):Promise.resolve(l.value).then(a,d);o((r=r.apply(s,t)).next())});import{j as e,f as M,g as L,r as x,d as z,h as k}from"./index-_uP16iPH.js";import{g as U}from"./index-hJzA2ap8.js";import{A as $}from"./index-9_RbZxEK.js";import{m as D}from"./proxy-DJqV861j.js";import{useGetHotels as T,useEditHotel as B,useDeleteHotelById as F}from"./useHotelHook2-DtK7Myfo.js";import{A as P}from"./Add-f-yItNAd.js";import{E as G}from"./Edit-qnXTmVJ0.js";import{D as _}from"./Delete-oMKMKYQq.js";import{S as H}from"./Switch-lzc4qRhQ.js";import{c as E}from"./createSvgIcon-rhATFnDX.js";import"./clsx-B-dksMZM.js";import"./useFormControl-DZKYljLo.js";import"./hoist-non-react-statics.cjs-Cxfv-rx9.js";import"./SwitchBase-I-YPLIEB.js";const q=E([e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),e.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")]),O=E(e.jsx("path",{d:"M14.43 10 12 2l-2.43 8H2l6.18 4.41L5.83 22 12 17.31 18.18 22l-2.35-7.59L22 10z"})),W=()=>w(void 0,null,function*(){return(yield M.get("/api/ezee/allhotels")).data}),K=()=>L({queryKey:["hotels"],queryFn:W}),Q=({isOpen:s,onConfirm:t,onCancel:r})=>(x.useEffect(()=>(s?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>document.body.style.overflow="auto"),[s]),x.useEffect(()=>{s&&U.fromTo(".modal-container",{y:"-100%",opacity:0},{y:"0",opacity:1,duration:.6,ease:"power3.out"})},[s]),e.jsx($,{children:s&&e.jsx(D.div,{className:"fixed inset-0 bg-gray-900 bg-opacity-80  z-50 flex justify-center items-center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsxs(D.div,{className:"modal-container bg-primary-white rounded-xl p-10 text-center shadow-2xl transform transition-all duration-500 ease-in-out",initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},children:[e.jsx("h2",{className:"text-2xl font-extrabold text-gray-800 mb-6",children:"Confirm Deletion"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Are you sure you want to delete this? This action cannot be undone."}),e.jsxs("div",{className:"flex justify-around mt-6",children:[e.jsx("button",{className:"bg-red-600 hover:bg-red-700 text-primary-white font-semibold py-3 px-8 rounded-lg transform hover:scale-105 transition-transform duration-200 shadow-md",onClick:t,children:"Yes, Delete"}),e.jsx("button",{className:"bg-blue-600 hover:bg-blue-700 text-primary-white font-semibold py-3 px-8 rounded-lg transform hover:scale-105 transition-transform duration-200 shadow-md",onClick:r,children:"Cancel"})]})]})})})),V=({item:s,type:t,onEdit:r,onDelete:h,onToggle:i})=>{var a,d;return e.jsxs("div",{className:"bg-white shadow-lg rounded-xl overflow-hidden relative border border-gray-200 transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1 h-full flex flex-col",children:[e.jsxs("div",{className:"justify-end items-center py-4 px-2 flex gap-2 z-10 transition-opacity duration-200",children:[e.jsx("button",{onClick:()=>r(s),className:"p-2 px-4 rounded-full shadow-md hover:bg-blue-100 transition-colors duration-200",title:"Edit",children:e.jsx(G,{fontSize:"small",className:"text-blue-600"})}),e.jsx("button",{onClick:()=>h(s.hotelCode),className:"p-2 px-4 rounded-full shadow-md hover:bg-red-100 transition-colors duration-200",title:"Delete",children:e.jsx(_,{fontSize:"small",className:"text-red-600"})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{checked:s.active,onChange:()=>i(s,"active"),color:"primary"}),e.jsx("span",{className:"text-sm text-gray-700",children:s.active?"Active":"Inactive"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{checked:s.isDayUseRoom,onChange:()=>i(s,"dayUseRoom",!s.isDayUseRoom),color:"primary"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Day Use Room"})]})]}),e.jsx("div",{className:"relative group",children:e.jsxs("div",{className:"h-48 sm:h-56 overflow-hidden",children:[e.jsx("img",{src:((a=s.images)==null?void 0:a[0])||"https://via.placeholder.com/300本土化?text=No+Image",alt:t==="hotel"?s.name:s.roomType,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]})}),e.jsxs("div",{className:"p-5 flex-grow flex flex-col",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 line-clamp-1 hover:text-blue-600 transition-colors duration-200",children:t==="hotel"?s.name:`${s.roomType} - Room ${s.roomNumber}`}),e.jsxs("div",{className:"flex items-center bg-yellow-50 px-2 py-1 rounded-md border border-yellow-100",children:[e.jsx(O,{fontSize:"small",className:"text-yellow-500"}),e.jsx("span",{className:"ml-1 text-gray-700 font-semibold",children:s.rating||"N/A"})]})]}),t==="hotel"&&e.jsxs("div",{className:"flex items-center mt-2",children:[e.jsx(q,{fontSize:"small",className:"text-gray-500 mr-1"}),e.jsxs("span",{className:"text-gray-700 text-sm",children:["Check In: ",s.checkIn||"N/A"," | Check Out: ",s.checkOut||"N/A"]})]}),e.jsx("div",{className:"flex items-center justify-between mt-4 mb-4",children:e.jsx("div",{className:"flex items-center",children:s.discountedPrice?e.jsx("div",{className:"flex flex-col",children:e.jsxs("span",{className:"text-green-600 font-bold text-lg",children:["₹",s.price.toLocaleString(),e.jsx("span",{className:"text-xs text-gray-600 ml-1",children:"/night"})]})}):e.jsxs("div",{children:[e.jsxs("span",{className:"text-gray-700 font-bold text-lg",children:["₹",s.price.toLocaleString()]}),e.jsx("span",{className:"text-xs text-gray-600 ml-1",children:"/night"})]})})}),e.jsxs("div",{children:[e.jsx("span",{className:"block font-bold text-gray-800 mb-3",children:"Amenities:"}),e.jsx("ul",{className:"flex flex-wrap gap-1.5",children:(d=s==null?void 0:s.amenities)!=null&&d.length?e.jsxs(e.Fragment,{children:[s.amenities.slice(0,3).map((o,l)=>e.jsx("li",{className:"bg-indigo-50 text-indigo-700 text-xs px-3 py-1.5 rounded-full border border-indigo-100 flex items-center gap-1 transition-colors duration-200 hover:bg-indigo-100",children:typeof o=="object"?o.value:o},l)),s.amenities.length>3&&e.jsxs("li",{className:"bg-gray-100 text-gray-700 text-xs px-3 py-1.5 rounded-full border border-gray-200 transition-colors duration-200 hover:bg-gray-200",children:["+",s.amenities.length-3," more"]})]}):e.jsx("li",{className:"text-gray-500 italic",children:"No amenities listed"})})]})]})]},s._id)},Y=({title:s,type:t,onEdit:r,onDelete:h,onAdd:i})=>{var C,S;const{data:a,isLoading:d,isError:o,error:l,refetch:n}=T(),{mutate:f}=B(),[j,u]=x.useState(!1),[v,g]=x.useState(""),[m,p]=x.useState(3),A=(fe,...ge)=>w(void 0,[fe,...ge],function*(c,N="active",b=!c.active){u(!0),p(3),g(N==="active"?b?`Activating ${c.name}`:`Deactivating ${c.name}`:b?`Enabling Day Use Room for ${c.name}`:`Disabling Day Use Room for ${c.name}`);try{N==="active"?yield f({hotelCode:c.hotelCode,hotelData:{active:b}},{onSuccess:()=>n()}):N==="dayUseRoom"&&(yield f({hotelCode:c.hotelCode,hotelData:{isDayUseRoom:b}},{onSuccess:()=>n()}))}catch(y){console.error("Error updating hotel:",y),g("Failed to update. Please try again."),setTimeout(()=>{u(!1),p(3)},3e3);return}const R=setInterval(()=>{p(y=>y<=1?(clearInterval(R),0):y-1)},1e3);setTimeout(()=>{u(!1),p(3)},3e3)});if(d)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)]",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500 animate-spin mb-4"}),e.jsxs("p",{className:"text-gray-600 animate-pulse",children:["Loading ",t,"s..."]})]})});if(o)return e.jsx("div",{className:"flex justify-center items-center h-[calc(100vh-64px)]",children:e.jsxs("div",{className:"bg-red-50 p-6 rounded-lg max-w-md border border-red-100 shadow-md",children:[e.jsxs("p",{className:"text-red-600 font-semibold mb-3 flex items-center",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Error loading data"]}),e.jsx("p",{className:"text-gray-700",children:l.message}),e.jsx("button",{onClick:()=>n(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors duration-200 shadow-sm",children:"Retry"})]})});const I=!((C=a==null?void 0:a.hotels)!=null&&C.length);return e.jsxs("div",{className:"min-h-[calc(100vh-64px)] bg-gradient-to-b from-gray-50 to-white relative",children:[e.jsxs("div",{className:"mx-auto px-4 sm:px-6 lg:px-8 pt-24 pb-16",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-800 mb-2",children:s}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:t==="hotel"?"Manage your hotel inventory, update details, and add new properties.":"Manage your room inventory, update details, and add new accommodations."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:i,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-sm",children:[e.jsx(P,{fontSize:"small",className:"mr-1"}),"Add New ",t==="hotel"?"Hotel":"Room"]})})]}),I?e.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md text-center max-w-md mx-auto",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),e.jsxs("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:["No ",t,"s found"]}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Start adding your first ",t," to manage your inventory."]}),e.jsxs("button",{onClick:i,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors duration-200 shadow-sm",children:["Add New ",t==="hotel"?"Hotel":"Room"]})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8",children:(S=a==null?void 0:a.hotels)==null?void 0:S.map(c=>e.jsx("div",{className:"h-full",children:e.jsx(V,{item:c,type:t,onEdit:r,onDelete:h,onToggle:A})},c._id))})]}),j&&e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-black/70 to-gray-900/70 backdrop-blur-sm flex justify-center items-center z-50 animate-fadeIn",children:e.jsx("div",{className:"bg-white/90 p-8 rounded-2xl shadow-2xl transform transition-all duration-500 animate-slideUp",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 rounded-full animate-spin border-t-blue-600"}),e.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:e.jsx("p",{className:"text-2xl font-bold text-blue-600 animate-pulse",children:m})})]}),e.jsxs("p",{className:"text-xl font-semibold text-gray-800 animate-pulse",children:[v,"..."]})]})})})]})},xe=()=>{const{data:s,isLoading:t,isError:r,error:h}=K(),{mutate:i}=F(),a=z(),[d,o]=x.useState(!1),[l,n]=x.useState(null);x.useEffect(()=>(d?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>document.body.style.overflow="auto"),[d]);const f=m=>{n(m),o(!0)},j=()=>{l&&i(l,{onSuccess:()=>{k.success("Hotel Deleted Successfully"),o(!1),n(null)},onError:m=>{k.error(`Failed to delete hotel: ${m.message}`),o(!1)}})},u=()=>{o(!1),n(null)},v=()=>{a("/admin/hotels/add")},g=m=>{a(`/admin/hotels/edit/${m.hotelCode}`,{state:{hotel:m}})};return t?e.jsx("p",{children:"Loading..."}):r?e.jsxs("p",{children:["Error: ",h.message]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{title:"Our Premium Hotels",data:s==null?void 0:s.hotels,type:"hotel",onEdit:g,onDelete:f,onAdd:v,showAddButton:!0}),e.jsx(Q,{isOpen:d,onConfirm:j,onCancel:u})]})};export{xe as AdminHotels};
