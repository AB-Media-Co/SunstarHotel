var Je=Object.defineProperty,Ve=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Be=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable;var Re=a=>{throw TypeError(a)};var ke=(a,s,t)=>s in a?Je(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,T=(a,s)=>{for(var t in s||(s={}))Be.call(s,t)&&ke(a,t,s[t]);if(se)for(var t of se(s))Se.call(s,t)&&ke(a,t,s[t]);return a},D=(a,s)=>Ve(a,Ye(s));var Oe=(a,s)=>{var t={};for(var l in a)Be.call(a,l)&&s.indexOf(l)<0&&(t[l]=a[l]);if(a!=null&&se)for(var l of se(a))s.indexOf(l)<0&&Se.call(a,l)&&(t[l]=a[l]);return t};var de=(a,s,t)=>s.has(a)||Re("Cannot "+t);var p=(a,s,t)=>(de(a,s,"read from private field"),t?t.call(a):s.get(a)),P=(a,s,t)=>s.has(a)?Re("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(a):s.set(a,t),B=(a,s,t,l)=>(de(a,s,"write to private field"),l?l.call(a,t):s.set(a,t),t),O=(a,s,t)=>(de(a,s,"access private method"),t);var te=(a,s,t)=>new Promise((l,i)=>{var d=c=>{try{g(t.next(c))}catch(n){i(n)}},m=c=>{try{g(t.throw(c))}catch(n){i(n)}},g=c=>c.done?l(c.value):Promise.resolve(c.value).then(d,m);g((t=t.apply(a,s)).next())});import{S as We,D as xe,E as _e,Q as Fe,w as Xe,F as Ze,G as es,r as f,H as ss,I as ts,J as as,K as rs,M as Ee,N as Le,P as ls,T as ns,e as is,j as e,g as os,y as He,u as ds}from"./index-DySQldRg.js";import{e as cs,u as Qe,f as ms}from"./useUser-C9c4p5eM.js";import{useGetHotels as xs}from"./useHotelHook2-CBYxhzBT.js";import{C as he,R as hs,a as ge,b as ue}from"./refresh-cw-CCG3ihB4.js";import{T as Ae}from"./trash-2-CAsciSlB.js";import{C as ae}from"./calendar-D1O8bC2c.js";import{S as Ue}from"./star-CC6WpmjY.js";import{c as _}from"./createLucideIcon-CMR6pimR.js";import{E as gs}from"./eye-DNEoVhCF.js";import{f as us}from"./useAgentHook-BGG0qi1l.js";import{C as ps}from"./chevron-down-Cgvf6f69.js";import{X as z}from"./x-5Db60WvN.js";import{M as fs}from"./mail-B-4uxl9d.js";import{P as ys}from"./phone-CsSGVUhd.js";import{S as q}from"./save-C2Gk1Oiv.js";import{U as js}from"./user-C2_QKxgb.js";import{S as Me}from"./shield-QvUrsUR8.js";function Te(a,s){return a.filter(t=>!s.includes(t))}function bs(a,s,t){const l=a.slice(0);return l[s]=t,l}var J,E,G,V,L,U,Y,W,N,pe,fe,re,ye,je,Ie,Ns=(Ie=class extends We{constructor(s,t,l){super();P(this,N);P(this,J);P(this,E);P(this,G);P(this,V);P(this,L);P(this,U);P(this,Y);P(this,W);B(this,J,s),B(this,V,l),B(this,G,[]),B(this,L,[]),B(this,E,[]),this.setQueries(t)}onSubscribe(){this.listeners.size===1&&p(this,L).forEach(s=>{s.subscribe(t=>{O(this,N,ye).call(this,s,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,p(this,L).forEach(s=>{s.destroy()})}setQueries(s,t,l){B(this,G,s),B(this,V,t),xe.batch(()=>{const i=p(this,L),d=O(this,N,re).call(this,p(this,G));d.forEach(n=>n.observer.setOptions(n.defaultedQueryOptions,l));const m=d.map(n=>n.observer),g=m.map(n=>n.getCurrentResult()),c=m.some((n,u)=>n!==i[u]);i.length===m.length&&!c||(B(this,L,m),B(this,E,g),this.hasListeners()&&(Te(i,m).forEach(n=>{n.destroy()}),Te(m,i).forEach(n=>{n.subscribe(u=>{O(this,N,ye).call(this,n,u)})}),O(this,N,je).call(this)))})}getCurrentResult(){return p(this,E)}getQueries(){return p(this,L).map(s=>s.getCurrentQuery())}getObservers(){return p(this,L)}getOptimisticResult(s,t){const i=O(this,N,re).call(this,s).map(d=>d.observer.getOptimisticResult(d.defaultedQueryOptions));return[i,d=>O(this,N,fe).call(this,d!=null?d:i,t),()=>O(this,N,pe).call(this,i,s)]}},J=new WeakMap,E=new WeakMap,G=new WeakMap,V=new WeakMap,L=new WeakMap,U=new WeakMap,Y=new WeakMap,W=new WeakMap,N=new WeakSet,pe=function(s,t){const l=O(this,N,re).call(this,t);return l.map((i,d)=>{const m=s[d];return i.defaultedQueryOptions.notifyOnChangeProps?m:i.observer.trackResult(m,g=>{l.forEach(c=>{c.observer.trackProp(g)})})})},fe=function(s,t){return t?((!p(this,U)||p(this,E)!==p(this,W)||t!==p(this,Y))&&(B(this,Y,t),B(this,W,p(this,E)),B(this,U,_e(p(this,U),t(s)))),p(this,U)):s},re=function(s){const t=new Map(p(this,L).map(i=>[i.options.queryHash,i])),l=[];return s.forEach(i=>{const d=p(this,J).defaultQueryOptions(i),m=t.get(d.queryHash);m?l.push({defaultedQueryOptions:d,observer:m}):l.push({defaultedQueryOptions:d,observer:new Fe(p(this,J),d)})}),l},ye=function(s,t){const l=p(this,L).indexOf(s);l!==-1&&(B(this,E,bs(p(this,E),l,t)),O(this,N,je).call(this))},je=function(){var s;if(this.hasListeners()){const t=p(this,U),l=O(this,N,fe).call(this,O(this,N,pe).call(this,p(this,E),p(this,G)),(s=p(this,V))==null?void 0:s.combine);t!==l&&xe.batch(()=>{this.listeners.forEach(i=>{i(p(this,E))})})}},Ie);function vs(l,t){var i=l,{queries:a}=i,s=Oe(i,["queries"]);const d=Xe(),m=Ze(),g=es(),c=f.useMemo(()=>a.map(x=>{const w=d.defaultQueryOptions(x);return w._optimisticResults=m?"isRestoring":"optimistic",w}),[a,d,m]);c.forEach(x=>{ss(x),ts(x,g)}),as(g);const[n]=f.useState(()=>new Ns(d,c,s)),[u,k,$]=n.getOptimisticResult(c,s.combine);f.useSyncExternalStore(f.useCallback(x=>m?rs:n.subscribe(xe.batchCalls(x)),[n,m]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),f.useEffect(()=>{n.setQueries(c,s,{listeners:!1})},[c,s,n]);const S=u.some((x,w)=>Ee(c[w],x))?u.flatMap((x,w)=>{const j=c[w];if(j){const A=new Fe(d,j);if(Ee(j,x))return Le(j,A,g);ls(x,m)&&Le(j,A,g)}return[]}):[];if(S.length>0)throw Promise.all(S);const F=u.find((x,w)=>{const j=c[w];return j&&ns({result:x,errorResetBoundary:g,throwOnError:j.throwOnError,query:d.getQueryCache().get(j.queryHash)})});if(F!=null&&F.error)throw F.error;return k($())}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=_("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=_("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=_("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=_("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=_("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Bs=({status:a,bookingStatus:s})=>s==="Confirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[e.jsx(ge,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Confirmed"]}):s==="Unconfirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border border-amber-200",children:[e.jsx(he,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Unconfirmed"]}):a==="Cancelled"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200",children:[e.jsx(ue,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Cancelled"]}):e.jsx("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200",children:s}),ce=a=>new Date(a).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),Pe=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(a),Ss=({label:a,icon:s,secondary:t,danger:l,onClick:i})=>{let d="bg-[#5BBEBC] text-white hover:bg-[#4BA9A6]";return t&&(d="bg-gray-100 text-gray-700 hover:bg-gray-200"),l&&(d="bg-red-100 text-red-700 hover:bg-red-200"),e.jsxs("button",{onClick:i,className:`flex items-center gap-1 md:gap-2 px-2 md:px-4 py-1.5 md:py-2 rounded-lg text-xs md:text-sm font-medium transition ${d}`,children:[s,e.jsx("span",{className:"hidden sm:inline",children:a})]})},me=({active:a,onClick:s,children:t,count:l})=>e.jsxs("button",{onClick:s,className:`w-full sm:w-auto relative px-3 py-2 rounded-lg text-xs sm:text-sm font-semibold transition-all duration-200 whitespace-nowrap flex items-center justify-center sm:justify-start gap-1 ${a?"bg-[#5BBEBC] text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:[t,l>0&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 rounded-full text-xs font-bold ${a?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:l})]}),Rs=()=>{const[a,s]=f.useState(""),[t,l]=f.useState(""),[i,d]=f.useState("upcoming"),[m,g]=f.useState(!1),[c,n]=f.useState(null),[u,k]=f.useState(null),[$,I]=f.useState(!1);f.useEffect(()=>{window.scrollTo(0,0)},[]);const{data:S,isLoading:F,error:x}=xs(),w=cs(),j=vs({queries:((S==null?void 0:S.hotels)||[]).map(r=>({queryKey:["my-bookings",r.hotelCode,a],queryFn:()=>te(void 0,null,function*(){if(!r.hotelCode||!a||!r.authKey)return{BookingList:[],hotelInfo:r};try{const y=yield is.get("/api/seemybookings",{params:{hotelCode:r.hotelCode,email:a,apiKey:r.authKey}});return D(T({},y.data),{hotelInfo:r,BookingList:(y.data.BookingList||[]).map(h=>D(T({},h),{hotelInfo:r}))})}catch(y){return console.error(`Failed to fetch bookings for ${r.name}:`,y),{BookingList:[],hotelInfo:r}}}),enabled:!!r.hotelCode&&!!a&&!!r.authKey,staleTime:3e4,refetchOnWindowFocus:!1}))}),A=j.reduce((r,y)=>{var h;return(h=y.data)!=null&&h.BookingList&&r.push(...y.data.BookingList),r},[]);console.log(A);const K=j.some(r=>r.isLoading),X=j.some(r=>r.error);f.useEffect(()=>{const r=localStorage.getItem("user_email");console.log(r),s(r)},[S]);const Q=()=>{j.forEach(r=>r.refetch())},ne=r=>{n(r),k(r.hotelInfo),g(!0)},C=()=>te(void 0,null,function*(){if(!c||!u){os.error("No booking selected or hotel information missing");return}I(!0);try{yield w.mutateAsync({hotelCode:u.hotelCode,apiKey:u.authKey,reservationNo:c.ReservationNo}),j.forEach(r=>r.refetch()),g(!1),n(null),k(null)}catch(r){console.error("Booking cancellation error:",r)}finally{I(!1)}}),b=(()=>{const r=new Date,y=A.filter(h=>{var R;return h.GuestName.toLowerCase().includes(t.toLowerCase())||h.ReservationNo.toLowerCase().includes(t.toLowerCase())||((R=h.hotelInfo)==null?void 0:R.name.toLowerCase().includes(t.toLowerCase()))});switch(i){case"upcoming":return y.filter(h=>{const R=new Date(h.DepartureDate);return h.Status!=="Cancelled"&&h.BookingStatus!=="Cancelled"&&R>=r});case"confirmed":return y.filter(h=>h.BookingStatus==="Confirmed Reservation"&&h.Status!=="Cancelled");case"cancelled":return y.filter(h=>h.Status==="Cancelled"||h.BookingStatus==="Cancelled");default:return y}})();console.log(b,"Filtered Bookings");const Z=(()=>{const r=new Date,y=A.filter(v=>{const oe=new Date(v.DepartureDate);return v.Status!=="Cancelled"&&v.BookingStatus!=="Cancelled"&&oe>=r}).length,h=A.filter(v=>v.BookingStatus==="Confirmed Reservation"&&v.Status!=="Cancelled").length,R=A.filter(v=>v.Status==="Cancelled"||v.BookingStatus==="Cancelled").length;return{upcoming:y,confirmed:h,cancelled:R}})();return F?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:e.jsx("div",{className:"content mx-auto px-4 py-4 md:py-8",children:e.jsxs("div",{className:"space-y-4 md:space-y-8",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 md:h-10 w-48 md:w-64 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl mb-2 md:mb-4"}),e.jsx("div",{className:"h-4 md:h-6 w-64 md:w-96 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"grid gap-4 md:gap-6",children:[1,2,3].map(r=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-4 md:p-8",children:e.jsxs("div",{className:"animate-pulse space-y-4 md:space-y-6",children:[e.jsx("div",{className:"h-6 md:h-8 w-32 md:w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-4 md:h-6 w-24 md:w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-3 md:h-4 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-3 md:h-4 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-3 md:h-4 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})},r))})]})})}):x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-6 md:p-8 flex items-start shadow-2xl max-w-md w-full",children:[e.jsx(he,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3 mt-1 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-700 text-sm md:text-base",children:"Failed to load hotel information. Please check your connection and try again."})]})]})}):e.jsxs("div",{className:"min-h-screen",children:[m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 ",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-4 transform transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 md:h-16 md:w-16 rounded-full bg-red-100 mb-3 md:mb-4",children:e.jsx(Ae,{className:"h-6 w-6 md:h-8 md:w-8 text-red-600"})}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-2",children:"Cancel Booking"}),e.jsxs("p",{className:"text-gray-600 mb-4 md:mb-6 text-sm md:text-base",children:["Are you sure you want to cancel the booking for ",e.jsx("span",{className:"font-semibold",children:c==null?void 0:c.GuestName}),"?",e.jsx("br",{}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-500",children:["Reservation #",c==null?void 0:c.ReservationNo]})]}),e.jsxs("div",{className:"flex gap-2 md:gap-3",children:[e.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-3 md:px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl text-sm md:text-base font-medium transition-colors",children:"Keep Booking"}),e.jsx("button",{onClick:C,className:"flex-1 px-3 md:px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-xl text-sm md:text-base font-medium transition-colors flex justify-center items-center",disabled:$,children:$?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 md:h-5 md:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Cancelling..."})]}):"Cancel Booking"})]})]})})}),e.jsxs("div",{className:"mx-auto",children:[e.jsxs("div",{className:"mb-6 md:mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 md:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-gray-900 mb-1 md:mb-2",children:"My Bookings"}),e.jsx("p",{className:"text-sm md:text-lg text-gray-500",children:"Manage and review your hotel reservations"})]}),e.jsx("div",{className:"flex gap-2 md:gap-3",children:e.jsxs("button",{onClick:Q,className:"flex items-center gap-1 md:gap-2 px-3 md:px-5 py-2 md:py-3 text-white bg-[#5BBEBC] hover:bg-[#4BA9A6] rounded-xl shadow-md transition text-sm md:text-base",children:[e.jsx(hs,{className:"w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})})]}),!K&&e.jsx("div",{className:"bg-white p-2.5 sm:p-4 md:p-6 rounded-xl shadow-md mb-6 md:mb-8 border border-gray-200",children:e.jsxs("div",{className:"flex flex-row gap-1 sm:gap-2 md:gap-4 overflow-x-auto pb-2 sm:pb-0 scrollbar-hide",children:[e.jsxs(me,{active:i==="upcoming",onClick:()=>d("upcoming"),count:Z.upcoming,children:[e.jsx(ae,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Upcoming"})]}),e.jsxs(me,{active:i==="confirmed",onClick:()=>d("confirmed"),count:Z.confirmed,children:[e.jsx(ge,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Confirmed"})]}),e.jsxs(me,{active:i==="cancelled",onClick:()=>d("cancelled"),count:Z.cancelled,children:[e.jsx(ue,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Cancelled"})]})]})})]}),K&&e.jsx("div",{className:"grid gap-4 md:gap-8",children:[1,2,3].map(r=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20",children:[e.jsx("div",{className:"p-4 md:p-8 border-b border-gray-100",children:e.jsxs("div",{className:"animate-pulse flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsx("div",{className:"h-6 md:h-8 w-32 md:w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-4 md:h-5 w-24 md:w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"h-6 md:h-8 w-16 md:w-24 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"})]})}),e.jsx("div",{className:"p-4 md:p-8",children:e.jsxs("div",{className:"animate-pulse grid md:grid-cols-2 gap-4 md:gap-8",children:[e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-4 md:h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-4 md:h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})})]},r))}),X&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-4 md:p-8 flex items-start shadow-2xl",children:[e.jsx(he,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3 mt-1 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg mb-2",children:"Failed to Load Bookings"}),e.jsx("p",{className:"text-red-700 text-sm md:text-base",children:"Please check your connection and try again. If the problem persists, contact support."})]})]}),b.length>0?e.jsxs("div",{className:"space-y-4 md:space-y-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("h2",{className:"text-xl md:text-3xl font-bold text-gray-900",children:[i.charAt(0).toUpperCase()+i.slice(1)," Reservations",e.jsx("span",{className:"ml-2 md:ml-3 inline-flex items-center px-2 md:px-4 py-1 md:py-2 rounded-full text-sm md:text-lg font-semibold bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800",children:b.length})]})}),e.jsx("div",{className:"grid gap-4 md:gap-6",children:b.map(r=>{var y,h;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-md p-4 md:p-6 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 md:mb-4 gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-base md:text-lg font-semibold text-gray-900 flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("span",{className:"truncate",children:r.GuestName.trim()}),e.jsx(Bs,{status:r.Status,bookingStatus:r.BookingStatus})]}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-500 mt-1",children:["Reservation #",r.ReservationNo]}),e.jsx("p",{className:"text-xs md:text-sm text-[#5BBEBC] font-medium",children:(y=r.hotelInfo)==null?void 0:y.name})]}),e.jsxs("div",{className:"text-left sm:text-right flex-shrink-0",children:[e.jsx("p",{className:"text-lg md:text-xl font-bold text-[#5BBEBC]",children:Pe(r.TotalInclusiveTax)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Amount"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4 mb-3 md:mb-4 text-xs md:text-sm text-gray-700",children:[e.jsxs("div",{className:"space-y-1 md:space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Stay:"})," ",ce(r.ArrivalDate)," - ",ce(r.DepartureDate)," (",r.NoOfNights," nights)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Room:"})," ",r.Room," #",r.RoomNo]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Guests:"})," ",r.Adult," Adult",r.Child>0?`, ${r.Child} Child`:""]})]}),e.jsxs("div",{className:"space-y-1 md:space-y-2",children:[e.jsxs("p",{className:"truncate",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",r.Email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",r.Mobile]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",r.TransactionStatus]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment Type:"})," ",((h=r.hotelInfo)==null?void 0:h.payAtHotel)==="yes"?"Pay at Hotel":"Paid Online"]}),r.DueAmount>0&&e.jsxs("p",{className:"font-semibold text-red-500",children:["Due: ",Pe(r.DueAmount)]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center text-xs text-gray-500 border-t pt-3 md:pt-4 gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4",children:[e.jsxs("span",{children:["Booked: ",ce(r.ReservationDate)]}),e.jsxs("span",{children:["Source: ",r.Source]}),e.jsxs("span",{children:["Folio: ",r.FolioNo]})]}),e.jsx("div",{className:"flex gap-2 md:gap-3 justify-end",children:r.Status!=="Cancelled"&&r.BookingStatus!=="Cancelled"&&e.jsx(Ss,{label:"Cancel",icon:e.jsx(Ae,{className:"w-3 h-3 md:w-4 md:h-4"}),danger:!0,onClick:()=>ne(r)})})]})]},r.ReservationNo)})})]}):!K&&e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl  text-center py-8 md:py-16 px-4 md:px-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 md:gap-6",children:[e.jsxs("div",{className:"p-4 md:p-6 bg-gradient-to-br from-gray-100 to-slate-100 rounded-full",children:[i==="upcoming"&&e.jsx(ae,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"}),i==="confirmed"&&e.jsx(ge,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"}),i==="cancelled"&&e.jsx(ue,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:["No ",i," bookings found"]}),e.jsx("p",{className:"text-gray-600 text-base md:text-lg max-w-md",children:t?`No ${i} bookings match your search criteria.`:`You don't have any ${i} bookings across all hotels yet.`})]}),!t&&i==="upcoming"&&e.jsxs("button",{className:"mt-2 md:mt-4 inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-primary-green text-white rounded-xl font-semibold shadow-lg transition-all duration-200 hover:scale-105 text-sm md:text-base",children:[e.jsx(ae,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Make a Booking"]})]})})]})]})},Os=({onViewAll:a})=>{var i,d,m,g,c;const s=localStorage.getItem("user_email"),{openHotelModal:t}=He(),{data:l}=Qe(s);return console.log(l),e.jsxs("div",{className:" md:p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[e.jsx("div",{className:"bg-white rounded-3xl shadow-lg p-4 overflow-hidden max-w-md mx-auto",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-green-500 mb-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Book direct & pay less"]}),e.jsx("h3",{className:"text-gray-600 text-3xl font-bold mb-3",children:"Complete a stay and get 5% extra off on your next booking"}),e.jsx("button",{onClick:t,className:"px-4 py-2 mt-4 border border-primary-green rounded text-primary-green font-medium hover:bg-yellow-50 transition",children:"Book Now"})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"bg-white p-4 pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-primary-green text-2xl font-semibold mb-1",children:"Sunstar"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-900 font-semibold",children:((i=l==null?void 0:l.data)==null?void 0:i.firstName)+" "+((d=l==null?void 0:l.data)==null?void 0:d.lastName)}),e.jsx("div",{className:"text-gray-500 text-sm",children:(m=l==null?void 0:l.data)==null?void 0:m.email})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/images/loyalty-illustration.svg",alt:"",className:"h-[110px]"})})]}),e.jsx("div",{className:"bg-primary-green p-4",children:e.jsxs("div",{className:"flex justify-between items-center text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-semibold",children:[(g=l==null?void 0:l.data)==null?void 0:g.totalBookings," Stays"]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm opacity-90",children:"1 Stay to Road Warrior"})})]})})]})})]}),e.jsxs("div",{className:" mx-auto mt-5 md:p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Your Recent Stays"}),e.jsxs("p",{className:"mt-2 text-gray-500",children:[(c=l==null?void 0:l.data)==null?void 0:c.totalBookings," Stays completed in the past 180 days. Stays will appear here after check-out. They will be counted towards loyalty benefits within 48hrs."]}),e.jsxs("div",{className:"mt-6 bg-gray-100 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"You don't have any recent stays"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"It looks like you haven't completed a stay with us in the past 180 days. Check out our top-rated hotels & book direct to save more!"}),e.jsx("button",{onClick:a,className:"mt-4 bg-primary-green hover:bg-primary-green text-white font-semibold px-6 py-3 rounded-lg",children:"View All Bookings"})]})]})]})},Es=({onViewAll:a})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 max-w-6xl",children:[e.jsx("h2",{className:"text-xl md:text-4xl font-bold text-gray-800 mb-6",children:"Loyalty Program"}),e.jsx("div",{className:"bg-gradient-to-r from-primary-green to-primary-green rounded-lg p-4 md:p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-2",children:"Gold Member"}),e.jsx("p",{className:"text-yellow-100 text-sm md:text-base",children:"You've earned 1,250 points"})]}),e.jsx(Ue,{className:"w-8 h-8 md:w-12 md:h-12 text-yellow-200"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Points Balance"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-teal-500",children:"1,250"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Tier Status"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-primary-green",children:"Gold"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Next Tier"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-600",children:"Platinum (750 pts)"})]})]})]}),e.jsx(Os,{onViewAll:a})]}),Ls=({onViewAll:a})=>{const s=[{id:1,customer:"John Doe",hotel:"SunStar Hotel",date:"2025-01-15",status:"Confirmed",bookingAmount:25e3,commissionRate:.1,location:"Mumbai",nights:3},{id:2,customer:"Jane Smith",hotel:"Blue Lagoon Resort",date:"2025-01-22",status:"Confirmed",bookingAmount:18e3,commissionRate:.08,location:"Goa",nights:2},{id:3,customer:"Mike Johnson",hotel:"Ocean View Hotel",date:"2025-02-05",status:"Confirmed",bookingAmount:32e3,commissionRate:.12,location:"Kerala",nights:4},{id:4,customer:"Sarah Wilson",hotel:"Mountain Resort",date:"2025-02-18",status:"Confirmed",bookingAmount:28e3,commissionRate:.09,location:"Manali",nights:5},{id:5,customer:"David Brown",hotel:"City Center Hotel",date:"2025-03-08",status:"Confirmed",bookingAmount:22e3,commissionRate:.11,location:"Delhi",nights:2},{id:6,customer:"Emma Davis",hotel:"Seaside Resort",date:"2025-03-20",status:"Pending",bookingAmount:35e3,commissionRate:.1,location:"Chennai",nights:6}],l=(()=>{const n={};return s.filter(u=>u.status==="Confirmed").forEach(u=>{const k=new Date(u.date),I=["January","February","March","April","May","June","July","August","September","October","November","December"][k.getMonth()],S=u.bookingAmount*u.commissionRate;n[I]||(n[I]=0),n[I]+=S}),Object.entries(n).map(([u,k])=>({month:u,amount:k}))})(),i=s.slice(-6).reverse(),d=s.filter(n=>n.status==="Confirmed").reduce((n,u)=>n+u.bookingAmount*u.commissionRate,0),m=s.length,g=s.filter(n=>n.status==="Confirmed").length,c=s.filter(n=>n.status==="Pending").length;return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-12",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h1",{className:"text-3xl front-medium text-gray-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Track your performance and earnings"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"text-2xl front-medium text-gray-900",children:["₹",d.toLocaleString("en-IN")]}),e.jsx(ws,{className:"w-4 h-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Total Earnings"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900",children:m}),e.jsx(ks,{className:"w-4 h-4 text-blue-500"})]}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Total Bookings"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900 block mb-2",children:g}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Confirmed"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900 block mb-2",children:c}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Pending"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl front-medium text-gray-900 mb-1",children:"Monthly Earnings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Commission breakdown by month"})]}),l.length>0?e.jsx("div",{className:"space-y-4",children:l.map((n,u)=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100 last:border-b-0",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:n.month}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["₹",n.amount.toLocaleString("en-IN")]})]},u))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No earnings data available"})})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl front-medium text-gray-900 mb-1",children:"Recent Bookings"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[g," confirmed, ",c," pending"]})]}),e.jsxs("button",{onClick:a,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx("span",{children:"View all"}),e.jsx(gs,{className:"w-4 h-4"})]})]}),i.length>0?e.jsx("div",{className:"space-y-1",children:i.map((n,u)=>{const k=n.bookingAmount*n.commissionRate;return e.jsx("div",{className:"group hover:bg-gray-50 transition-colors rounded-lg p-4 -mx-4",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(De,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.customer}),e.jsx("p",{className:"text-sm text-gray-500",children:n.hotel})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-700",children:n.location}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.nights," nights"]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("p",{className:"text-sm text-gray-700",children:new Date(n.date).toLocaleDateString("en-GB")})}),e.jsxs("div",{className:"col-span-2 text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["₹",n.bookingAmount.toLocaleString("en-IN")]}),e.jsx("p",{className:"text-sm text-green-600",children:n.status==="Confirmed"?`+₹${k.toLocaleString("en-IN")}`:"Pending"})]}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${n.status==="Confirmed"?"bg-green-500":"bg-yellow-500"}`})})]})},n.id)})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mb-4",children:e.jsx(De,{className:"w-12 h-12 text-gray-300 mx-auto"})}),e.jsx("h3",{className:"text-lg front-medium text-gray-700 mb-2",children:"No bookings yet"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Start making bookings to see them here"}),e.jsx("button",{onClick:a,className:"inline-flex items-center space-x-2 bg-gray-900 hover:bg-gray-800 text-white px-6 py-2 rounded-md text-sm transition-colors",children:e.jsx("span",{children:"Get Started"})})]})]})]})]})},As=()=>{const a=[{month:"January",amount:"₹1,20,000"},{month:"February",amount:"₹98,500"},{month:"March",amount:"₹1,45,300"}],s=[{id:"C-101",dept:"Sales",rooms:6,date:"2025-03-12",status:"Confirmed"},{id:"C-102",dept:"HR",rooms:3,date:"2025-03-19",status:"Pending"}];return e.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Monthly Spend"}),e.jsx("ul",{className:"divide-y divide-gray-200",children:a.map(t=>e.jsxs("li",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-gray-700",children:t.month}),e.jsx("span",{className:"font-medium text-primary-green",children:t.amount})]},t.month))})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Recent Corporate Bookings"}),e.jsxs("p",{className:"mt-2 text-gray-500",children:[s.length," group bookings in the last 180 days."]}),s.length>0?e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"ID"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Department"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Rooms"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Date"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Status"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"border border-gray-200 p-3",children:t.id}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.dept}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.rooms}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.date}),e.jsx("td",{className:`border border-gray-200 p-3 font-medium ${t.status==="Confirmed"?"text-green-600":"text-yellow-600"}`,children:t.status})]},t.id))})]})}):e.jsxs("div",{className:"mt-6 bg-gray-100 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"No recent corporate bookings"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Plan your next offsite or block rooms for your team."})]})]})]})},Ms=({isOpen:a,onClose:s,onConfirm:t,isLoggingOut:l})=>a?e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-[90%] max-w-md mx-4 overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(le,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Logout Confirmation"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm",children:"Are you sure you want to logout from your account?"})]}),e.jsxs("div",{className:"p-6 flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:s,disabled:l,className:"flex-1 px-6 py-3 border-2 border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:t,disabled:l,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-medium hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-70 shadow-lg shadow-red-500/25",children:l?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Logging out..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("span",{children:"Yes, Logout"})]})})]})]})]}):null,Xs=()=>{var be,Ne,ve,we;const s=(Ne=(be=ds().state)==null?void 0:be.tab)!=null?Ne:"profile",[t,l]=f.useState(s),[i,d]=f.useState(null),[m,g]=f.useState(!1),[c,n]=f.useState(!1),[u,k]=f.useState(!1),[$,I]=f.useState(!1),{setIsNavColor:S}=He(),F=localStorage.getItem("user_email"),{data:x,isLoading:w}=us(F),j=!!x&&(x==null?void 0:x.role)==="agent",A=(ve=x==null?void 0:x.approved)!=null?ve:!1,K=!!x&&(x==null?void 0:x.role)==="corporate",X=(we=x==null?void 0:x.approved)!=null?we:!1,{data:Q}=Qe(F);console.log(Q);const{mutate:ne}=ms();f.useEffect(()=>(S(!0),()=>{S(!1)}),[S]);const[C,ie]=f.useState({legalName:"",email:"",mobile:"",dateOfBirth:"",gender:"",cityOfResidence:""});f.useEffect(()=>{if(Q!=null&&Q.data){const{firstName:o,lastName:H,email:ee,phone:Ce,dateOfBirth:Ge,gender:Ke,cityOfResidence:qe}=Q.data;ie({legalName:`${o||""} ${H||""}`.trim(),email:ee||"",mobile:Ce?`+91 - ${Ce}`:"",dateOfBirth:Ge||"",gender:Ke||"",cityOfResidence:qe||""})}},[Q]);const[b,M]=f.useState({}),r=(()=>{const o=[{id:"loyalty",label:"Loyalty",icon:Ue},{id:"bookings",label:"Bookings",icon:ae},{id:"profile",label:"Profile",icon:js}];return!w&&j&&A&&o.push({id:"agent",label:"Agent",icon:Me}),!w&&K&&X&&o.push({id:"corporate",label:"Corporate",icon:Me}),o})(),y=r.find(o=>o.id===t)||r[0],h=o=>{d(o),M({[o]:C[o]})},R=o=>{const H=b[o];if(H===C[o]||H.trim()===""){d(null),M({});return}const ee=D(T({},C),{[o]:H});ie(ee),d(null),M({}),ne(ee)},v=()=>{d(null),M({})},oe=o=>{l(o),n(!1)},$e=()=>te(void 0,null,function*(){I(!0),yield new Promise(o=>setTimeout(o,800)),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(o=>{const H=o.split("=")[0].trim();document.cookie=`${H}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}),"caches"in window&&caches.keys().then(o=>{o.forEach(H=>caches.delete(H))}),window.location.href="/"}),ze=()=>{switch(t){case"loyalty":return e.jsx(Es,{onViewAll:()=>l("bookings")});case"bookings":return e.jsx(Rs,{});case"corporate":return w?e.jsx("div",{className:"p-4",children:"Loading corporate data..."}):K?X?e.jsx(As,{}):e.jsx("div",{className:"p-4",children:"Your corporate account is pending approval."}):e.jsx("div",{className:"p-4 text-red-600",children:"Not authorized as Corporate."});case"agent":return w?e.jsx("div",{className:"p-4",children:"Loading agent data..."}):j?A?e.jsx(Ls,{}):e.jsx("div",{className:"p-4",children:"Your agent account is pending approval."}):e.jsx("div",{className:"p-4 text-red-600",children:"Not authorized as Agent."});case"profile":default:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Legal Name"}),i==="legalName"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:b.legalName||"",onChange:o=>M(D(T({},b),{legalName:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>R("legalName"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(z,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:C.legalName})]}),i!=="legalName"&&e.jsx("button",{onClick:()=>h("legalName"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email Address"}),i==="email"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"email",value:b.email||"",onChange:o=>M(D(T({},b),{email:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>R("email"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(z,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:C.email})]}),i!=="email"&&e.jsx("button",{onClick:()=>h("email"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Mobile Number"}),i==="mobile"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"tel",value:b.mobile||"",onChange:o=>M(D(T({},b),{mobile:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>R("mobile"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(z,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:C.mobile})]}),i!=="mobile"&&e.jsx("button",{onClick:()=>h("mobile"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date of Birth"}),i==="dateOfBirth"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"date",value:b.dateOfBirth||"",onChange:o=>M(D(T({},b),{dateOfBirth:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>R("dateOfBirth"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(z,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${C.dateOfBirth?"text-gray-800":"text-gray-400"}`,children:C.dateOfBirth||"Date of Birth"})]}),i!=="dateOfBirth"&&e.jsx("button",{onClick:()=>h("dateOfBirth"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Gender"}),i==="gender"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:b.gender||"",onChange:o=>M(D(T({},b),{gender:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("button",{onClick:()=>R("gender"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(z,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${C.gender?"text-gray-800":"text-gray-400"}`,children:C.gender||"Gender"})]}),i!=="gender"&&e.jsx("button",{onClick:()=>h("gender"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"City of Residence"}),i==="cityOfResidence"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:b.cityOfResidence||"",onChange:o=>M(D(T({},b),{cityOfResidence:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0",placeholder:"Enter your city"}),e.jsx("button",{onClick:()=>R("cityOfResidence"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(q,{className:"w-4 h-4"})}),e.jsx("button",{onClick:v,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(z,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${C.cityOfResidence?"text-gray-800":"text-gray-400"}`,children:C.cityOfResidence||"City of Residence"})]}),i!=="cityOfResidence"&&e.jsx("button",{onClick:()=>h("cityOfResidence"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Ms,{isOpen:u,onClose:()=>k(!1),onConfirm:$e,isLoggingOut:$}),e.jsxs("div",{className:"content mt-28 sm:mt-28 mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"lg:hidden mb-4 pt-6 mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!c),className:"flex items-center justify-between w-full text-gray-700 bg-white px-4 py-2 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y.icon,{className:"w-5 h-5"}),e.jsx("span",{children:y.label})]}),e.jsx(ps,{className:`w-4 h-4 transform transition-transform duration-200 ${c?"rotate-180":""}`})]}),c&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[r.map(o=>e.jsxs("button",{onClick:()=>oe(o.id),className:`w-full flex items-center space-x-2 px-4 py-3 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg transition-colors ${t===o.id?"bg-primary-green text-white hover:bg-primary-green":"text-gray-700"}`,children:[e.jsx(o.icon,{className:"w-5 h-5"}),e.jsx("span",{children:o.label})]},o.id)),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("button",{onClick:()=>{n(!1),k(!0)},className:"w-full flex items-center space-x-2 px-4 py-3 text-left text-red-600 hover:bg-red-50 rounded-b-lg transition-colors",children:[e.jsx(le,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})})]})]})}),e.jsxs("div",{className:"flex gap-6 min-h-[calc(100vh-120px)]",children:[m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>g(!1)}),e.jsx("div",{className:`
            fixed lg:sticky lg:top-0 top-0 left-0 h-full lg:h-auto
            w-80 max-w-[90vw] bg-white lg:bg-transparent
            transform transition-transform duration-300 ease-in-out
            ${m?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            z-50 lg:z-auto overflow-y-auto
          `,children:e.jsxs("div",{className:"p-4 lg:p-0 space-y-4",children:[e.jsx("div",{className:"lg:hidden flex justify-end",children:e.jsx("button",{onClick:()=>g(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(z,{className:"w-6 h-6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("img",{src:"/images/loyalty-illustration.svg",alt:"",className:"mx-auto h-[180px]"})}),e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Account Details"}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:C.email})]}),e.jsx("div",{className:"space-y-1",children:r.map(o=>e.jsxs("button",{onClick:()=>{l(o.id),g(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 text-left transition-colors ${t===o.id?"bg-primary-green text-white":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(o.icon,{className:"w-5 h-5"}),e.jsx("span",{className:t===o.id?"font-medium":"",children:o.label})]},o.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Need Help?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"mailto:booking@sunstarhospitality.com",className:"flex items-center space-x-2 text-primary-green hover:text-primary-green",children:[e.jsx(fs,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm break-all",children:"booking@sunstarhospitality.com"})]}),e.jsxs("a",{href:"tel:+91-9310831646",className:"flex items-center space-x-2 text-primary-green hover:text-primary-green",children:[e.jsx(ys,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"+91-91 9310831646"})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("a",{href:"/terms-conditions&cancellation",className:"block hover:text-gray-800 transition-colors",children:"Cancellation Policy"}),e.jsx("a",{href:"/terms-conditions&cancellation",className:"block hover:text-gray-800 transition-colors",children:"Terms & Conditions"}),e.jsx("a",{href:"/privacy-policies",className:"block hover:text-gray-800 transition-colors",children:"Privacy Policy"})]}),e.jsx("div",{className:"py-2",children:e.jsxs("button",{onClick:()=>k(!0),className:"group w-full flex items-center justify-center gap-3 px-4 py-3 bg-gradient-to-r from-red-50 to-orange-50 hover:from-red-100 hover:to-orange-100 border border-red-200 hover:border-red-300 text-red-600 hover:text-red-700 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md",children:[e.jsx("div",{className:"p-1.5 bg-red-100 group-hover:bg-red-200 rounded-lg transition-colors duration-300",children:e.jsx(le,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium",children:"Logout"})]})})]})}),e.jsxs("div",{className:"flex-1 bg-white my-6 hotelSelection rounded-lg p-4 sm:p-6 overflow-y-auto max-h-full",children:[ze(),t==="profile"&&e.jsx("div",{className:"mt-12 pt-6 border-t border-gray-200",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(Cs,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Having trouble with your profile? Contact Support"})]})})})]})]})]})]})};export{Xs as default};
