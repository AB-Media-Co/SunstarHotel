import{j as e,L as q,K as ee,N as K,Q as h,D as te,b as _,r as p,a as $,T as se,U as re,V as ne,W as D,X as Z,Z as le,s as oe,e as ae,g as ie}from"./index-DSepL_80.js";import{R as ce,W as de}from"./Warning-3UnRoFgf.js";import{A as me,a as xe}from"./ArrowRightAlt-QlWxit13.js";import{f as U,d as ue}from"./format-C4BekRQj.js";const he=({ContactUsDetail:s})=>e.jsxs("div",{className:"flex flex-col gap-6 md:gap-10 md:flex-row justify-between md:items-center text-gray-600 px-4 py-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:gap-4",children:[e.jsx("p",{className:"text-lg md:text-2xl font-bold tracking-tight",children:"Facing an Issue? Call us for assistance."}),e.jsx("a",{href:`tel:${s==null?void 0:s.phoneNumber}`,className:"text-base md:text-xl font-semibold underline hover:text-gray-800 transition-colors duration-300",children:s==null?void 0:s.phoneNumber})]}),e.jsxs("div",{className:"flex gap-6 md:gap-8",children:[e.jsx(q,{to:"/terms-conditions&cancellation",className:"text-base md:text-lg font-medium underline hover:text-gray-800 transition-colors duration-300",children:"Cancellation Policy"}),e.jsx(q,{to:"/terms-conditions&cancellation",className:"text-base md:text-lg font-medium underline hover:text-gray-800 transition-colors duration-300",children:"Terms & Conditions"})]})]}),fe=(s,c,d,i,l)=>K({mutationFn:async n=>{const a={Room_Details:l.reduce((x,r,t)=>(x[`Room_${t+1}`]={Rateplan_Id:r.rateplanId||"",Ratetype_Id:r.RateTypeID||"",Roomtype_Id:r.RoomTypeID||"",baserate:r.price?r.price.toString():"0",extradultrate:r.extraAdultRate?r.extraAdultRate.toString():"0",extrachildrate:r.extraChildRate?r.extraChildRate.toString():"0",number_adults:r.guestQty?r.guestQty.toString():"1",number_children:r.childrenQty?r.childrenQty.toString():"0",ExtraChild_Age:r.childrenQty>0?r.childAge||"0":"",Title:n.title||"",First_Name:n.firstName||"",Last_Name:n.lastName||"",Gender:n.gender||"",SpecialRequest:n.specialRequest||""},x),{}),check_in_date:d,check_out_date:i,Booking_Payment_Mode:n.paymentMethod||"",Email_Address:n.email||"",MobileNo:n.phoneNumber||"",Address:n.address||"",Country:n.country||"",City:n.city||"",Zipcode:n.zipcode||""};console.log("roomData",a)},onSuccess:n=>{if(n&&n.ReservationNo)return h.success(`Booking successful! Reservation #${n.ReservationNo}`),n;throw h.error("Booking failed: "+(n.message||"Unknown error")),new Error(n.message||"Unknown error")},onError:n=>{var a,x;throw console.error("Booking error:",n),h.error("Error making booking: "+(((x=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:x.message)||n.message)),n}}),ge=()=>{const s=ee();return K({mutationFn:async c=>(await te.post("/api/newBooking/createBooking",c)).data,onSuccess:()=>{s.invalidateQueries({queryKey:["bookings"]})},onError:c=>{var d,i;h.error(`Failed to create booking: ${((i=(d=c.response)==null?void 0:d.data)==null?void 0:i.message)||c.message}`)}})},pe=({hotelDetail:s,guestFormRef:c,checkIn:d,checkOut:i})=>{const{selectedRooms:l}=_(),[n,a]=p.useState(""),[x,r]=p.useState(!1),t=$(),{mutate:o,isLoading:u}=fe(s==null?void 0:s.hotelCode,s==null?void 0:s.authKey,d,i,l),g=y=>{a(y)};se();const b=async()=>{if(c.current&&!c.current.validateForm()){h.error("Please fill all required guest information");return}const y=c.current.getGuestDetails();if(!y.firstName||!y.lastName||!y.email){h.error("Please provide name and email information");return}y.paymentMethod=n;const j={userEmail:y.email,userPhone:y.phoneNumber,checkIn:d,checkOut:i,hotelCode:s==null?void 0:s.hotelCode,Hoteldata:s==null?void 0:s.authKey,selectedRooms:l,submittedAt:new Date().toISOString()};console.log(j)};return e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your booking has been successfully submitted. We will contact you shortly."}),e.jsx("button",{onClick:()=>t("/"),className:"w-full bg-blue-600 text-white font-semibold py-3 rounded transition-all",style:{backgroundColor:"#058FA2"},children:"Continue to Home"})]})})}),e.jsxs("div",{id:"payment-method",className:"flex flex-col bg-white mt-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 rounded-full mr-3",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Payment Method"})]}),e.jsx("div",{className:"flex flex-col gap-4",children:(s==null?void 0:s.payAtHotel)==="yes"&&e.jsxs("label",{htmlFor:"pay-at-hotel",className:"flex items-center gap-4 p-4 rounded-lg cursor-pointer border-2 border-gray-200 hover:border-teal-200 hover:bg-gray-50 transition-all shadow-sm hover:shadow-lg",children:[e.jsx("input",{type:"radio",id:"pay-at-hotel",name:"payment-method",className:"w-5 h-5",onChange:()=>g("pay-at-hotel"),checked:n==="pay-at-hotel"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Pay at Hotel"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Reserve now and pay directly at the hotel upon check-in."})]})]})}),n&&e.jsx("div",{className:"w-full flex justify-end",children:e.jsx("button",{className:"mt-6 w-[200px] bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded transition-all",style:{backgroundColor:"#058FA2"},onClick:b,disabled:u,children:u?"Processing...":"Continue to Pay"})})]})]})},J=({days:s,showButton:c,isPaymentVisible:d})=>{const{selectedRooms:i,totalOtherCharges:l,finalPrice:n,baseFinalPrice:a,setNights:x}=_();p.useEffect(()=>{s&&(x(s),localStorage.setItem("days",s))},[s,x]);const r=a-n,t=r>0;return e.jsxs("div",{className:"p-6 bg-white sticky top-4 border border-gray-200 rounded-xl shadow-md w-full md:w-96 mx-auto font-sans",children:[e.jsx("div",{className:"flex items-center pb-4 justify-between",children:e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Reservation Summary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-3 mb-4",children:i==null?void 0:i.map((o,u)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 pb-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:o.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[o.option==="roomOnly"?"Room Only":"With Meals"," × ",s," ",s===1?"Night":"Nights"]})]}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",o.price*s]})]},u))}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 pb-2 border-b border-gray-200",children:[e.jsx("p",{children:"Other Charges"}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",l]})]})]}),e.jsxs("div",{className:"pt-3 bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Original Amount"}),e.jsxs("p",{className:"font-medium",children:["₹ ",a]})]}),t&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Discount"}),e.jsxs("p",{className:"font-medium text-green-600",children:["- ₹ ",r]})]}),e.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t border-gray-200",children:[e.jsx("p",{children:"Payable Amount"}),e.jsxs("p",{className:"text-primary-green",children:["₹ ",n]})]})]}),c&&e.jsx("a",{href:"#payment-method",className:"block w-full",children:e.jsx("button",{disabled:d,className:`mt-6 w-full py-3.5 font-bold text-white rounded-lg transition-all duration-300 ${d?"bg-gray-300 cursor-not-allowed":"bg-primary-green hover:bg-primary-dark-green"}`,children:"See Payment Options"})})]})};/*! js-cookie v3.0.5 | MIT */function W(s){for(var c=1;c<arguments.length;c++){var d=arguments[c];for(var i in d)s[i]=d[i]}return s}var ye={read:function(s){return s[0]==='"'&&(s=s.slice(1,-1)),s.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(s){return encodeURIComponent(s).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function H(s,c){function d(l,n,a){if(!(typeof document>"u")){a=W({},c,a),typeof a.expires=="number"&&(a.expires=new Date(Date.now()+a.expires*864e5)),a.expires&&(a.expires=a.expires.toUTCString()),l=encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var x="";for(var r in a)a[r]&&(x+="; "+r,a[r]!==!0&&(x+="="+a[r].split(";")[0]));return document.cookie=l+"="+s.write(n,l)+x}}function i(l){if(!(typeof document>"u"||arguments.length&&!l)){for(var n=document.cookie?document.cookie.split("; "):[],a={},x=0;x<n.length;x++){var r=n[x].split("="),t=r.slice(1).join("=");try{var o=decodeURIComponent(r[0]);if(a[o]=s.read(t,o),l===o)break}catch{}}return l?a[l]:a}}return Object.create({set:d,get:i,remove:function(l,n){d(l,"",W({},n,{expires:-1}))},withAttributes:function(l){return H(this.converter,W({},this.attributes,l))},withConverter:function(l){return H(W({},this.converter,l),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(s)}})}var M=H(ye,{path:"/"});const be=({hotelDetail:s,checkIn:c})=>{const[d,i]=p.useState(""),[l,n]=p.useState(null),[,a]=p.useState(null),[x,r]=p.useState(!1),t="#058FA2",{mutate:o,data:u}=re(),{mutateAsync:g}=ne(),{finalPrice:b,setFinalPrice:y,baseFinalPrice:j,phoneVerified:k,setPhoneVerified:v}=_(),[P,w]=p.useState(!1),[C,E]=p.useState(""),[B,G]=p.useState(""),[z,Y]=p.useState(!1),{mutate:F}=D(),{mutate:Q}=Z();p.useEffect(()=>{s&&s._id&&o(s._id)},[o,s]),p.useEffect(()=>{M.get("phoneVerified")==="true"&&v(!0)},[]);const V=()=>{if(!C.trim()){h.error("Please enter a valid phone number");return}F(`+91${C}`,{onSuccess:m=>{m&&m.sessionId&&localStorage.setItem("otpSessionId",m.sessionId),w(!0),h.success("OTP sent to your phone")},onError:()=>{h.error("Error sending OTP")}})},f=()=>{if(!B.trim()){h.error("Please enter the OTP");return}let m=C.trim();m.startsWith("+91")||(m="+91"+m);const A=localStorage.getItem("otpSessionId");if(!A){h.error("Session expired. Please request a new OTP");return}Q({phone:m,code:B,sessionId:A},{onSuccess:L=>{L&&L.status==="OTP Matched"?(M.set("phoneVerified","true",{expires:30}),v(!0),w(!1),h.success("Phone number verified")):h.error("Invalid OTP")},onError:()=>{h.error("OTP verification failed")}})},O=async()=>{var m,A,L,T;if(d.trim())try{const S=await g({hotelId:s._id,rate:b,offerCode:d.trim(),checkInDate:c});a(S),S.discountedRate&&y(S.discountedRate),h.success("Discounted rate calculated successfully")}catch(S){h.error((A=(m=S==null?void 0:S.response)==null?void 0:m.data)!=null&&A.error?(T=(L=S==null?void 0:S.response)==null?void 0:L.data)==null?void 0:T.error:"Error calculating discounted rate")}},N=()=>{n(null),a(null),y(j)},I=async m=>{var A,L,T,S;n(m),r(!1);try{const R=await g({hotelId:s._id,rate:b,offerCode:m.offerCode,checkInDate:c});a(R),R.discountedRate&&y(R.discountedRate),r(!0)}catch(R){h.error((L=(A=R==null?void 0:R.response)==null?void 0:A.data)!=null&&L.error?(S=(T=R==null?void 0:R.response)==null?void 0:T.data)==null?void 0:S.error:"Error calculating discounted rate")}};return k?e.jsxs("div",{className:"flex flex-col bg-white w-full mx-auto font-sans",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-cyan-600 text-white mr-3",style:{backgroundColor:t},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Exclusive Offers"})]}),!l&&e.jsx("div",{className:"relative mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-3",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",id:"promo",placeholder:"Enter Offer Code Here",className:"w-full h-14 shadow-md border border-gray-300 rounded-lg py-2 pl-12 pr-4 text-lg focus:outline-none focus:ring-2 focus:border-cyan-300 transition-all",style:{"--tw-ring-color":t},value:d,onChange:m=>i(m.target.value)}),e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})})]}),e.jsx("button",{onClick:O,className:"h-14 px-6 md:w-40 rounded-lg text-white font-bold transition-all hover:shadow-lg flex items-center justify-center",style:{backgroundColor:t},children:"Apply Code"})]})}),!l&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-1 h-6 rounded-full mr-3",style:{backgroundColor:t}}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Available Offer Codes"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:u&&u.map(m=>e.jsxs("div",{onClick:()=>I(m),className:"p-4 rounded-lg border-2 cursor-pointer transition-all border-gray-200 hover:bg-cyan-50 transform hover:-translate-y-1 hover:shadow-md",style:{"--tw-hover-border-opacity":1,"--tw-hover-border-color":t},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-lg text-gray-800",children:m.offerCode}),e.jsxs("span",{className:"text-sm font-semibold px-3 py-1 rounded-full text-white",style:{backgroundColor:t},children:[m.discountPercent,"%"]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("span",{className:"text-xs font-medium flex items-center",style:{color:t},children:["Click to apply",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-1",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5l7 7-7 7"})]})]})})]},m.offerCode))})]}),l&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-1 h-6 rounded-full mr-3",style:{backgroundColor:t}}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Applied Offer"})]}),e.jsxs("button",{onClick:N,className:"flex items-center text-sm px-4 py-2 bg-red-50 text-red-600 rounded-full hover:bg-red-100 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),"Remove & Change"]})]}),e.jsxs("div",{className:"relative overflow-hidden p-6 bg-cyan-50 border-2 rounded-lg shadow-sm",style:{borderColor:t},children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 transform translate-x-8 -translate-y-8",children:e.jsx("div",{className:"absolute transform rotate-45 text-white font-bold py-1 w-32 text-center text-xs",style:{backgroundColor:t},children:"APPLIED"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-2xl text-gray-800",children:l.offerCode}),e.jsx("div",{className:"text-gray-600 mt-2",children:l.description})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("span",{className:"text-lg font-semibold px-4 py-2 rounded-full text-white",style:{backgroundColor:t},children:[l.discountPercent,"%"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-cyan-200 flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",style:{color:t},children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),x&&e.jsx("p",{className:"font-medium",style:{color:t},children:"Offer successfully applied to your order!"})]})]})]})]}):e.jsxs("div",{className:"flex flex-col font-sans",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 rounded-full mr-3",style:{backgroundColor:t}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Exclusive Offers"})]}),e.jsxs("div",{className:"mb-6 p-6 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-cyan-100 p-2 rounded-full mr-3",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-xl text-gray-800",children:"Verify Your Phone Number"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Unlock special discounts exclusive to verified users"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 my-4",children:[e.jsxs("div",{className:"flex items-center flex-grow gap-2 bg-gray-50 p-3 rounded-lg",children:[e.jsx("div",{className:"h-10 w-10 bg-cyan-600 rounded-full flex items-center justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Exclusive Offers"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Up to 25% off on bookings"})]})]}),e.jsxs("div",{className:"flex items-center flex-grow gap-2 bg-gray-50 p-3 rounded-lg",children:[e.jsx("div",{className:"h-10 w-10 bg-cyan-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Secure Process"}),e.jsx("p",{className:"text-xs text-gray-500",children:"OTP verification for security"})]})]})]}),e.jsxs("button",{onClick:()=>w(!0),className:"w-full py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg flex items-center justify-center gap-2 transition-all",style:{backgroundColor:t},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.94z"})}),"Verify Phone Number"]})]}),P&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-96 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Phone Verification"}),e.jsx("button",{onClick:()=>w(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),z?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0110 0v4"})]})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Enter Verification Code"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["We've sent a 6-digit code to +91 ",C]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",value:B,onChange:m=>G(m.target.value),placeholder:"Enter 6-digit OTP",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-lg tracking-widest focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"6"})}),e.jsx("button",{onClick:f,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Verify & Continue"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Didn't receive the code?"," ",e.jsx("button",{onClick:V,className:"text-cyan-600 font-medium hover:underline",children:"Resend"})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your phone number to receive a verification code"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("span",{className:"text-gray-500",children:"+91"})}),e.jsx("input",{type:"text",value:C,onChange:m=>E(m.target.value),placeholder:"Your phone number",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"10"})]}),e.jsx("button",{onClick:V,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Send Verification Code"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})]})})]})},je=({data:s})=>{const c=s==null?void 0:s.addToYourStay,[d,i]=p.useState({}),{selectedOtherCharges:l,setSelectedOtherCharges:n}=_(),a=t=>{i(o=>({...o,[t]:!o[t]}))},x=(t,o)=>{o.stopPropagation(),n(u=>(Array.isArray(u)?u.find(b=>b._id===t._id):null)?u.filter(b=>b._id!==t._id):[...u,t])},r=t=>l.some(o=>o._id===t);return e.jsxs("div",{className:"bg-white w-full mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"w-1 h-8 bg-primary-green rounded-full mr-4",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 tracking-tight",children:"Add To Your Stay"})]}),e.jsx("div",{className:"space-y-6",children:c.map(t=>{var o,u;return e.jsxs("div",{className:`transition-all duration-200 border-2 rounded-lg overflow-hidden ${r(t._id)?"border-primary-green bg-teal-50":"border-gray-200 hover:border-teal-200 hover:bg-gray-50"}`,style:{borderColor:r(t._id)?"#058FA2":"",backgroundColor:r(t._id)?"#e6f7f9":""},children:[e.jsx("div",{className:"flex w-full items-center justify-between p-5 cursor-pointer",onClick:()=>a(t._id),children:e.jsxs("div",{className:"flex items-center gap-5 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-md border flex items-center justify-center cursor-pointer transition-colors ${r(t._id)?"bg-primary-green border-primary-green":"border-gray-300"}`,style:{backgroundColor:r(t._id)?"#058FA2":"",borderColor:r(t._id)?"#058FA2":""},onClick:g=>x(t,g),children:r(t._id)&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("div",{className:"flex gap-4 items-center flex-1",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 leading-tight",children:t.heading}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-lg font-medium mr-4 text-teal-600",style:{color:"#058FA2"},children:["₹ ",(o=t.rate)==null?void 0:o.amount," ",e.jsx("span",{className:"text-base",children:((u=t.rate)==null?void 0:u.period)||""})]}),e.jsx("button",{className:`w-7 h-7 flex items-center justify-center rounded-full transition-colors text-lg ${d[t._id]?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-500"}`,style:{backgroundColor:d[t._id]?"#e6f7f9":"",color:d[t._id]?"#058FA2":""},children:d[t._id]?"−":"+"})]})]})})})]})}),d[t._id]&&e.jsxs("div",{className:"px-16 pb-5 pt-1 text-gray-600 border-t border-gray-100",children:[e.jsx("p",{className:"text-base leading-relaxed",children:t.description}),r(t._id)&&e.jsx("div",{className:"mt-4 text-sm font-medium bg-teal-100 text-primay-green py-2 px-4 rounded-md inline-block",style:{backgroundColor:"#e6f7f9",color:"#058FA2"},children:"✓ Added to your stay"})]})]},t._id)})})]})},X=p.forwardRef((s,c)=>{const{phoneVerified:d,setPhoneVerified:i}=_(),[l,n]=p.useState(""),[a,x]=p.useState(""),[r,t]=p.useState(""),[o,u]=p.useState(""),[g,b]=p.useState(""),[y,j]=p.useState(!1),k=localStorage.getItem("hotelInfo"),v=k?JSON.parse(k):null,P=M.get("userEmail");let w=M.get("userPhone");w&&(w=w.replace(/[^0-9]/g,"").replace(/^91/,""));const{data:C}=le(P==null?void 0:P.toLowerCase(),w);p.useEffect(()=>{(C==null?void 0:C.length)>0&&console.log("User booking history:",C)},[C]);const E=p.useRef(null),{mutate:B}=D(),{mutate:G}=Z(),{mutate:z}=ge();p.useEffect(()=>{const f=M.get("phoneVerified"),O=M.get("userPhone"),N=localStorage.getItem("userInfo");if(f==="true"&&O){if(i(!0),u(O),N){const{firstName:I,lastName:m,email:A}=JSON.parse(N);n(I),x(m),t(A)}h.success("Welcome back! Your information is loaded.")}},[i]);const Y=()=>l.trim()?a.trim()?r.trim()?o.trim()?!0:(h.error("Please enter your phone number"),!1):(h.error("Please enter your email address"),!1):(h.error("Please enter your last name"),!1):(h.error("Please enter your first name"),!1),F=()=>{Y()&&B(`+91${o}`,{onSuccess:f=>{f&&f.sessionId&&localStorage.setItem("otpSessionId",f.sessionId),j(!0),h.success("OTP sent to your phone")},onError:()=>{h.error("Error sending OTP")}})},Q=()=>{if(!g.trim()){h.error("Please enter the OTP");return}let f=o.trim();f.startsWith("+91")||(f="+91"+f);const O=localStorage.getItem("otpSessionId");if(!O){h.error("Session expired. Please request a new OTP");return}G({phone:f,code:g,sessionId:O,firstName:l,lastName:a,email:r},{onSuccess:N=>{N&&(N.status==="OTP Matched"||N.valid===!0)?(i(!0),j(!1),b(""),M.set("phoneVerified","true",{expires:30}),M.set("userPhone",f,{expires:30}),M.set("userEmail",r,{expires:30}),localStorage.setItem("userInfo",JSON.stringify({firstName:l,lastName:a,email:r})),h.success("Phone number verified"),z({name:`${l} ${a}`,email:r,mobileNumber:f,hotelcode:(v==null?void 0:v.hotelCode)||"",authcode:(v==null?void 0:v.authKey)||"",roomDetails:[]})):h.error("Invalid OTP")},onError:N=>{var I,m;(m=(I=N==null?void 0:N.response)==null?void 0:I.data)!=null&&m.message?h.error(`OTP verification failed: ${N.response.data.message}`):h.error("OTP verification failed. Please try again.")}})},V=()=>{var f,O,N,I,m;return l.trim()?a.trim()?r.trim()?o.trim()?d?!0:(h.error("Please verify your phone number"),(m=E.current)==null||m.scrollIntoView({behavior:"smooth"}),!1):(h.error("Please enter your mobile number"),(I=E.current)==null||I.scrollIntoView({behavior:"smooth"}),!1):(h.error("Please enter your email address"),(N=E.current)==null||N.scrollIntoView({behavior:"smooth"}),!1):(h.error("Please enter your last name"),(O=E.current)==null||O.scrollIntoView({behavior:"smooth"}),!1):(h.error("Please enter your first name"),(f=E.current)==null||f.scrollIntoView({behavior:"smooth"}),!1)};return p.useImperativeHandle(c,()=>({validateForm:V,getGuestDetails:()=>({firstName:l,lastName:a,email:r,phoneNumber:o})})),e.jsxs("div",{ref:E,className:"flex flex-col gap-8 bg-white  rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-1.5 h-10 bg-primary-green rounded-full mr-4",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Enter Your Details"})]}),e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[{id:"firstName",label:"First Name *",placeholder:"John",type:"text"},{id:"lastName",label:"Last Name *",placeholder:"Smith",type:"text"},{id:"email",label:"Email Address *",placeholder:"abc@example.com",type:"email"},{id:"mobile",label:"Mobile Number *",placeholder:"1234567896",type:"tel"}].map(({id:f,label:O,placeholder:N,type:I})=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{htmlFor:f,className:"block text-base font-semibold text-gray-800 tracking-wide",children:O}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:I,id:f,placeholder:N,className:"w-full h-[54px] shadow-sm border border-gray-300 rounded-lg py-2.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent transition-all duration-200",value:f==="mobile"?o:f==="firstName"?l:f==="lastName"?a:f==="email"?r:void 0,onChange:m=>{f==="mobile"?u(m.target.value):f==="firstName"?n(m.target.value):f==="lastName"?x(m.target.value):f==="email"&&t(m.target.value)}}),f==="mobile"&&!d&&e.jsx("button",{type:"button",onClick:F,className:`ml-3 px-6 py-2 rounded-lg font-medium transition-all duration-200 ${l.trim()&&a.trim()&&r.trim()&&o.trim()?"bg-cyan-600 hover:bg-cyan-700 text-white":"bg-gray-400 cursor-not-allowed text-white"}`,disabled:!l.trim()||!a.trim()||!r.trim()||!o.trim(),children:"Verify"})]})]},f))}),y&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-96 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Enter Verification Code"}),e.jsx("button",{onClick:()=>j(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["We've sent a 6-digit code to +91 ",o]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",value:g,onChange:f=>b(f.target.value),placeholder:"Enter 6-digit OTP",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-lg tracking-widest focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"6"})}),e.jsx("button",{onClick:Q,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Verify & Continue"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Didn't receive the code?"," ",e.jsx("button",{onClick:F,className:"text-cyan-600 font-medium hover:underline",children:"Resend"})]})})]})}),d&&e.jsx("div",{className:"mt-4 py-3 px-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-green-700 font-medium flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Phone number verified successfully"]})})]})});X.displayName="GuestDetailsForm";const ve=()=>{const{details:s,setDetails:c,selectedRooms:d,setSelectedRooms:i,setEditAddPricing:l}=_(),n=$(),a=(t,o)=>{i(u=>{var k,v,P,w,C;const g=[...u],b=((v=(k=s[t])==null?void 0:k.roomData)==null?void 0:v.discountRate)||0,y=((C=(w=(P=s[t])==null?void 0:P.continentalPlan)==null?void 0:w.rate)==null?void 0:C.amount)||0;let j=b;return o==="continental"&&(j+=y),g[t]={...g[t],option:o,price:j},g})},x=(t,o)=>{i(u=>{var k,v,P,w;const g=[...u],b=((v=(k=s[t])==null?void 0:k.roomData)==null?void 0:v.maxGuests)||2;let y=((P=g[t])==null?void 0:P.guestQty)??2,j=((w=g[t])==null?void 0:w.showMaxGuestAlert)??!1;return o==="increment"?y<b?(y+=1,j=!1):j=!0:o==="decrement"&&(y>0&&(y-=1),j=!1),g[t]={...g[t],guestQty:y,showMaxGuestAlert:j},y===0&&(g.splice(t,1),c(C=>C.filter((E,B)=>B!==t))),g})},r=()=>{var t;l(!0),localStorage.setItem("editAddPricing",!0),n(`/hotels/${(t=s[0])==null?void 0:t.hotelCode}`)};return e.jsxs(e.Fragment,{children:[s==null?void 0:s.map((t,o)=>{var g,b,y,j,k,v;const u=d[o]||{roomName:((g=t==null?void 0:t.roomData)==null?void 0:g.RoomName)||"",option:"roomOnly",price:((b=t==null?void 0:t.roomData)==null?void 0:b.discountRate)||0,guestQty:1,showMaxGuestAlert:!1};return u.guestQty===0?null:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:h-[200px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsxs("div",{className:"w-full lg:w-1/3 relative",children:[e.jsx("img",{src:(y=t==null?void 0:t.aboutUs)==null?void 0:y.img,alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 left-5 bg-white bg-opacity-75 px-3 py-1 rounded-l-full",children:e.jsx("p",{className:"text-[10px] font-bold text-yellow-600 uppercase tracking-wider",children:"Best Choice"})})]}),e.jsxs("div",{className:"flex flex-col justify-center w-full gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-[#288592] mb-1",children:(j=t==null?void 0:t.roomData)==null?void 0:j.RoomName}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[t==null?void 0:t.name,", ",(k=t==null?void 0:t.cityLocation)==null?void 0:k.name]}),e.jsxs("p",{className:"text-md font-semibold text-gray-800",children:["Price: ",e.jsxs("span",{className:"text-[#288592]",children:["₹",u.price]})]})]}),e.jsxs("div",{className:"flex flex-col items-start w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>x(o,"decrement"),children:e.jsx(ce,{})}),e.jsx("span",{children:u.guestQty>1?`${u.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>x(o,"increment"),children:e.jsx(oe,{})})]}),u.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-32 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(v=t==null?void 0:t.roomData)==null?void 0:v.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:r,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>i(P=>{const w=[...P];return w[o].showMaxGuestAlert=!1,w}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${o}`,value:"roomOnly",checked:u.option==="roomOnly",onChange:()=>a(o,"roomOnly"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${o}`,value:"continental",checked:u.option==="continental",onChange:()=>a(o,"continental"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]})]},o)}),s.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},we=()=>{var t,o,u;const{details:s,setEditAddPricing:c}=_(),d=localStorage.getItem("hotelInfo"),i=JSON.parse(d),l=localStorage.getItem("checkInDate"),n=localStorage.getItem("checkOutDate");console.log(i);const a=$(),x=()=>l&&n?e.jsxs("div",{children:["(",ue(new Date(n),new Date(l))," ","Nights)"]}):0,r=()=>{var g;c(!0),localStorage.setItem("editAddPricing",!0),a(`/hotels/${(g=s[0])==null?void 0:g.hotelCode}`)};return e.jsxs("div",{className:"flex flex-col gap-4 py-6 border-b-2",children:[e.jsx("div",{className:"text-mobile/h3 text-gray-500 md:text-desktop/h3",children:i==null?void 0:i.name}),e.jsx("div",{className:"text-mobile/small/body font-medium md:font-medium text-gray-500 md:text-desktop/body/1",children:(t=i==null?void 0:i.location)==null?void 0:t.hotelAddress}),e.jsx("div",{className:"flex gap-4 flex-col",children:e.jsxs("div",{className:"flex flex-row items-center gap-4  md:gap-10 ",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-[14px] text-gray-500 md:text-xl",children:l?U(l,"dd MMM, EEEE"):"Check in"}),e.jsxs("p",{className:"text-[9px] md:text-sm  font-medium text-gray-500",children:["Check-in ",((o=s[0])==null?void 0:o.checkIn)||"1:00 PM"]})]}),e.jsx(me,{className:"text-yellow-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-[14px] text-gray-500 md:text-xl",children:n?U(n,"dd MMM, EEEE"):"Check-out"}),e.jsxs("p",{className:"text-[9px] md:text-sm  font-medium text-gray-500",children:["Check-out ",((u=s[0])==null?void 0:u.checkOut)||"11:00 AM"]})]}),l&&n&&e.jsx("span",{className:"flex items-center text-gray-500 justify-center font-semibold text-[10px] md:text-base rounded-full md:border border-gray-300 px-3 py-2 md:py-1",children:x()})]})}),e.jsx("div",{className:" border-gray-200 flex items-center justify-between",children:e.jsx("button",{onClick:r,className:"py-1 text-lg font-medium underline text-primary-yellow rounded-full transition",children:"Change Date /Room Selection"})})]})},Ne=(s,c)=>{if(!s||!c)return 0;const d=new Date(s),i=new Date(c),l=Math.abs(i-d);return Math.ceil(l/(1e3*60*60*24))},Oe=()=>{const{ContactUsDetail:s}=ae(),{details:c,hotelData:d}=_(),i=c[0],l=$(),n=localStorage.getItem("hotelInfo"),a=JSON.parse(n),x=localStorage.getItem("checkInDate"),r=localStorage.getItem("checkOutDate"),t=Ne(x,r),[o,u]=p.useState(!1),[g,b]=p.useState(!0),y=p.useRef();return p.useEffect(()=>{const j=document.querySelector("#payment-method");if(j){const k=new IntersectionObserver(([v])=>{u(v.isIntersecting)},{threshold:.1});return k.observe(j),()=>k.disconnect()}},[]),p.useEffect(()=>{o?setTimeout(()=>b(!1),300):b(!0)},[o]),p.useEffect(()=>{(!c||c.length===0||!i)&&l(`/hotels/${a==null?void 0:a.hotelCode}`)},[c,d,i,l,a]),!c||c.length===0||!i?null:e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green",children:[e.jsxs(ie,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex items-center gap-2 py-4 md:py-10 text-mobile/h1 md:text-desktop/h2 text-white",children:[e.jsx("button",{onClick:()=>l(-1),"aria-label":"Go back",children:e.jsx(xe,{className:"text-white",style:{height:"35px",width:"35px"}})}),e.jsx("span",{children:"Booking Details"})]}),e.jsxs("div",{className:"md:flex gap-5 content  bg-white rounded-t-3xl",children:[e.jsxs("div",{className:"flex flex-col md:px-8 md:py-10 gap-8",children:[e.jsx(we,{}),e.jsx(ve,{}),e.jsx(X,{ref:y}),i.addToYourStay.length>0&&e.jsx(je,{data:i}),e.jsx(be,{hotelDetail:i,checkIn:x}),e.jsx("div",{className:"lg:hidden",children:e.jsx(J,{hotelDetail:i,checkIn:x,checkOut:r,days:t,showButton:g,isPaymentVisible:o})}),e.jsx(pe,{hotelDetail:i,guestFormRef:y,checkIn:x,checkOut:r}),e.jsx(he,{ContactUsDetail:s})]}),e.jsx("div",{className:"hidden md:px-8 py-10  lg:block",children:e.jsx(J,{hotelDetail:i,checkIn:x,checkOut:r,days:t,showButton:g,isPaymentVisible:o})})]})]})};export{Oe as default};
