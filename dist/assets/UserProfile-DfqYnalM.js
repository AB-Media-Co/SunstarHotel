var He=Object.defineProperty,Ge=Object.defineProperties;var ze=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable;var ke=r=>{throw TypeError(r)};var ve=(r,s,t)=>s in r?He(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,P=(r,s)=>{for(var t in s||(s={}))we.call(s,t)&&ve(r,t,s[t]);if(te)for(var t of te(s))Ce.call(s,t)&&ve(r,t,s[t]);return r},I=(r,s)=>Ge(r,ze(s));var Be=(r,s)=>{var t={};for(var l in r)we.call(r,l)&&s.indexOf(l)<0&&(t[l]=r[l]);if(r!=null&&te)for(var l of te(r))s.indexOf(l)<0&&Ce.call(r,l)&&(t[l]=r[l]);return t};var ne=(r,s,t)=>s.has(r)||ke("Cannot "+t);var u=(r,s,t)=>(ne(r,s,"read from private field"),t?t.call(r):s.get(r)),F=(r,s,t)=>s.has(r)?ke("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(r):s.set(r,t),C=(r,s,t,l)=>(ne(r,s,"write to private field"),l?l.call(r,t):s.set(r,t),t),A=(r,s,t)=>(ne(r,s,"access private method"),t);var ie=(r,s,t)=>new Promise((l,n)=>{var d=c=>{try{h(t.next(c))}catch(i){n(i)}},m=c=>{try{h(t.throw(c))}catch(i){n(i)}},h=c=>c.done?l(c.value):Promise.resolve(c.value).then(d,m);h((t=t.apply(r,s)).next())});import{S as Ke,D as ce,E as qe,Q as De,x as Je,F as Ye,G as Ve,r as f,H as We,I as _e,J as Xe,K as Ze,M as Se,N as Re,P as es,T as ss,f as ts,j as e,h as as,b as Pe,u as rs}from"./index-Kj3knSog.js";import{e as ls,u as Ie,f as ns}from"./useUser-CSJYEhW5.js";import{useGetHotels as is}from"./useHotelHook2-CoeoE2sM.js";import{C as me,R as os,a as xe,b as he}from"./refresh-cw-oi5fPo_h.js";import{T as Oe}from"./trash-2-D2OKwWs1.js";import{C as ae}from"./calendar-Bqpa6Fmn.js";import{S as Fe}from"./star-CVRkMZeL.js";import{c as le}from"./createLucideIcon-BJzqg999.js";import{E as ds}from"./eye-DYO1_SPz.js";import{f as cs}from"./useAgentHook-B_eoGsg9.js";import{C as ms}from"./chevron-down-BK6WoyVq.js";import{X as K}from"./x-aOw4iCj7.js";import{M as xs}from"./mail-CSLI_DC9.js";import{P as hs}from"./phone-BOj6gwoL.js";import{S as J}from"./save-8k2Iakbv.js";import{U as gs}from"./user-DASGtLr8.js";import{S as Ee}from"./shield-LbcXcP96.js";function Ae(r,s){return r.filter(t=>!s.includes(t))}function us(r,s,t){const l=r.slice(0);return l[s]=t,l}var Y,L,q,V,M,H,_,X,N,ge,ue,re,pe,fe,Te,ps=(Te=class extends Ke{constructor(s,t,l){super();F(this,N);F(this,Y);F(this,L);F(this,q);F(this,V);F(this,M);F(this,H);F(this,_);F(this,X);C(this,Y,s),C(this,V,l),C(this,q,[]),C(this,M,[]),C(this,L,[]),this.setQueries(t)}onSubscribe(){this.listeners.size===1&&u(this,M).forEach(s=>{s.subscribe(t=>{A(this,N,pe).call(this,s,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,u(this,M).forEach(s=>{s.destroy()})}setQueries(s,t,l){C(this,q,s),C(this,V,t),ce.batch(()=>{const n=u(this,M),d=A(this,N,re).call(this,u(this,q));d.forEach(i=>i.observer.setOptions(i.defaultedQueryOptions,l));const m=d.map(i=>i.observer),h=m.map(i=>i.getCurrentResult()),c=m.some((i,x)=>i!==n[x]);n.length===m.length&&!c||(C(this,M,m),C(this,L,h),this.hasListeners()&&(Ae(n,m).forEach(i=>{i.destroy()}),Ae(m,n).forEach(i=>{i.subscribe(x=>{A(this,N,pe).call(this,i,x)})}),A(this,N,fe).call(this)))})}getCurrentResult(){return u(this,L)}getQueries(){return u(this,M).map(s=>s.getCurrentQuery())}getObservers(){return u(this,M)}getOptimisticResult(s,t){const n=A(this,N,re).call(this,s).map(d=>d.observer.getOptimisticResult(d.defaultedQueryOptions));return[n,d=>A(this,N,ue).call(this,d!=null?d:n,t),()=>A(this,N,ge).call(this,n,s)]}},Y=new WeakMap,L=new WeakMap,q=new WeakMap,V=new WeakMap,M=new WeakMap,H=new WeakMap,_=new WeakMap,X=new WeakMap,N=new WeakSet,ge=function(s,t){const l=A(this,N,re).call(this,t);return l.map((n,d)=>{const m=s[d];return n.defaultedQueryOptions.notifyOnChangeProps?m:n.observer.trackResult(m,h=>{l.forEach(c=>{c.observer.trackProp(h)})})})},ue=function(s,t){return t?((!u(this,H)||u(this,L)!==u(this,X)||t!==u(this,_))&&(C(this,_,t),C(this,X,u(this,L)),C(this,H,qe(u(this,H),t(s)))),u(this,H)):s},re=function(s){const t=new Map(u(this,M).map(n=>[n.options.queryHash,n])),l=[];return s.forEach(n=>{const d=u(this,Y).defaultQueryOptions(n),m=t.get(d.queryHash);m?l.push({defaultedQueryOptions:d,observer:m}):l.push({defaultedQueryOptions:d,observer:new De(u(this,Y),d)})}),l},pe=function(s,t){const l=u(this,M).indexOf(s);l!==-1&&(C(this,L,us(u(this,L),l,t)),A(this,N,fe).call(this))},fe=function(){var s;if(this.hasListeners()){const t=u(this,H),l=A(this,N,ue).call(this,A(this,N,ge).call(this,u(this,L),u(this,q)),(s=u(this,V))==null?void 0:s.combine);t!==l&&ce.batch(()=>{this.listeners.forEach(n=>{n(u(this,L))})})}},Te);function fs(l,t){var n=l,{queries:r}=n,s=Be(n,["queries"]);const d=Je(),m=Ye(),h=Ve(),c=f.useMemo(()=>r.map(b=>{const B=d.defaultQueryOptions(b);return B._optimisticResults=m?"isRestoring":"optimistic",B}),[r,d,m]);c.forEach(b=>{We(b),_e(b,h)}),Xe(h);const[i]=f.useState(()=>new ps(d,c,s)),[x,k,y]=i.getOptimisticResult(c,s.combine);f.useSyncExternalStore(f.useCallback(b=>m?Ze:i.subscribe(ce.batchCalls(b)),[i,m]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),f.useEffect(()=>{i.setQueries(c,s,{listeners:!1})},[c,s,i]);const R=x.some((b,B)=>Se(c[B],b))?x.flatMap((b,B)=>{const p=c[B];if(p){const T=new De(d,p);if(Se(p,b))return Re(p,T,h);es(b,m)&&Re(p,T,h)}return[]}):[];if(R.length>0)throw Promise.all(R);const Q=x.find((b,B)=>{const p=c[B];return p&&ss({result:b,errorResetBoundary:h,throwOnError:p.throwOnError,query:d.getQueryCache().get(p.queryHash)})});if(Q!=null&&Q.error)throw Q.error;return k(y())}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=le("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=le("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bs=le("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ns=({status:r,bookingStatus:s})=>s==="Confirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[e.jsx(xe,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Confirmed"]}):s==="Unconfirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border border-amber-200",children:[e.jsx(me,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Unconfirmed"]}):r==="Cancelled"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200",children:[e.jsx(he,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Cancelled"]}):e.jsx("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200",children:s}),oe=r=>new Date(r).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),Me=r=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r),vs=({label:r,icon:s,secondary:t,danger:l,onClick:n})=>{let d="bg-[#5BBEBC] text-white hover:bg-[#4BA9A6]";return t&&(d="bg-gray-100 text-gray-700 hover:bg-gray-200"),l&&(d="bg-red-100 text-red-700 hover:bg-red-200"),e.jsxs("button",{onClick:n,className:`flex items-center gap-1 md:gap-2 px-2 md:px-4 py-1.5 md:py-2 rounded-lg text-xs md:text-sm font-medium transition ${d}`,children:[s,e.jsx("span",{className:"hidden sm:inline",children:r})]})},de=({active:r,onClick:s,children:t,count:l})=>e.jsxs("button",{onClick:s,className:`w-full sm:w-auto relative px-3 py-2 rounded-lg text-xs sm:text-sm font-semibold transition-all duration-200 whitespace-nowrap flex items-center justify-center sm:justify-start gap-1 ${r?"bg-[#5BBEBC] text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:[t,l>0&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 rounded-full text-xs font-bold ${r?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:l})]}),ws=()=>{const[r,s]=f.useState(""),[t,l]=f.useState(""),[n,d]=f.useState("upcoming"),[m,h]=f.useState(!1),[c,i]=f.useState(null),[x,k]=f.useState(null),[y,S]=f.useState(!1);f.useEffect(()=>{window.scrollTo(0,0)},[]);const{data:R,isLoading:Q,error:b}=is(),B=ls(),p=fs({queries:((R==null?void 0:R.hotels)||[]).map(a=>({queryKey:["my-bookings",a.hotelCode,r],queryFn:()=>ie(void 0,null,function*(){if(!a.hotelCode||!r||!a.authKey)return{BookingList:[],hotelInfo:a};try{const j=yield ts.get("/api/seemybookings",{params:{hotelCode:a.hotelCode,email:r,apiKey:a.authKey}});return I(P({},j.data),{hotelInfo:a,BookingList:(j.data.BookingList||[]).map(g=>I(P({},g),{hotelInfo:a}))})}catch(j){return console.error(`Failed to fetch bookings for ${a.name}:`,j),{BookingList:[],hotelInfo:a}}}),enabled:!!a.hotelCode&&!!r&&!!a.authKey,staleTime:3e4,refetchOnWindowFocus:!1}))}),T=p.reduce((a,j)=>{var g;return(g=j.data)!=null&&g.BookingList&&a.push(...j.data.BookingList),a},[]);console.log(T);const v=p.some(a=>a.isLoading),Z=p.some(a=>a.error);f.useEffect(()=>{const a=localStorage.getItem("user_email");console.log(a),s(a)},[R]);const w=()=>{p.forEach(a=>a.refetch())},O=a=>{i(a),k(a.hotelInfo),h(!0)},ye=()=>ie(void 0,null,function*(){if(!c||!x){as.error("No booking selected or hotel information missing");return}S(!0);try{yield B.mutateAsync({hotelCode:x.hotelCode,apiKey:x.authKey,reservationNo:c.ReservationNo}),p.forEach(a=>a.refetch()),h(!1),i(null),k(null)}catch(a){console.error("Booking cancellation error:",a)}finally{S(!1)}}),G=(()=>{const a=new Date,j=T.filter(g=>{var $;return g.GuestName.toLowerCase().includes(t.toLowerCase())||g.ReservationNo.toLowerCase().includes(t.toLowerCase())||(($=g.hotelInfo)==null?void 0:$.name.toLowerCase().includes(t.toLowerCase()))});switch(n){case"upcoming":return j.filter(g=>{const $=new Date(g.DepartureDate);return g.Status!=="Cancelled"&&g.BookingStatus!=="Cancelled"&&$>=a});case"confirmed":return j.filter(g=>g.BookingStatus==="Confirmed Reservation"&&g.Status!=="Cancelled");case"cancelled":return j.filter(g=>g.Status==="Cancelled"||g.BookingStatus==="Cancelled");default:return j}})();console.log(G,"Filtered Bookings");const D=(()=>{const a=new Date,j=T.filter(E=>{const ee=new Date(E.DepartureDate);return E.Status!=="Cancelled"&&E.BookingStatus!=="Cancelled"&&ee>=a}).length,g=T.filter(E=>E.BookingStatus==="Confirmed Reservation"&&E.Status!=="Cancelled").length,$=T.filter(E=>E.Status==="Cancelled"||E.BookingStatus==="Cancelled").length;return{upcoming:j,confirmed:g,cancelled:$}})();return Q?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:e.jsx("div",{className:"content mx-auto px-4 py-4 md:py-8",children:e.jsxs("div",{className:"space-y-4 md:space-y-8",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 md:h-10 w-48 md:w-64 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl mb-2 md:mb-4"}),e.jsx("div",{className:"h-4 md:h-6 w-64 md:w-96 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"grid gap-4 md:gap-6",children:[1,2,3].map(a=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-4 md:p-8",children:e.jsxs("div",{className:"animate-pulse space-y-4 md:space-y-6",children:[e.jsx("div",{className:"h-6 md:h-8 w-32 md:w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-4 md:h-6 w-24 md:w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-3 md:h-4 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-3 md:h-4 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-3 md:h-4 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})},a))})]})})}):b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-6 md:p-8 flex items-start shadow-2xl max-w-md w-full",children:[e.jsx(me,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3 mt-1 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-700 text-sm md:text-base",children:"Failed to load hotel information. Please check your connection and try again."})]})]})}):e.jsxs("div",{className:"min-h-screen",children:[m&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 ",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-4 transform transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 md:h-16 md:w-16 rounded-full bg-red-100 mb-3 md:mb-4",children:e.jsx(Oe,{className:"h-6 w-6 md:h-8 md:w-8 text-red-600"})}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-2",children:"Cancel Booking"}),e.jsxs("p",{className:"text-gray-600 mb-4 md:mb-6 text-sm md:text-base",children:["Are you sure you want to cancel the booking for ",e.jsx("span",{className:"font-semibold",children:c==null?void 0:c.GuestName}),"?",e.jsx("br",{}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-500",children:["Reservation #",c==null?void 0:c.ReservationNo]})]}),e.jsxs("div",{className:"flex gap-2 md:gap-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"flex-1 px-3 md:px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl text-sm md:text-base font-medium transition-colors",children:"Keep Booking"}),e.jsx("button",{onClick:ye,className:"flex-1 px-3 md:px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-xl text-sm md:text-base font-medium transition-colors flex justify-center items-center",disabled:y,children:y?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 md:h-5 md:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Cancelling..."})]}):"Cancel Booking"})]})]})})}),e.jsxs("div",{className:"mx-auto",children:[e.jsxs("div",{className:"mb-6 md:mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 md:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-gray-900 mb-1 md:mb-2",children:"My Bookings"}),e.jsx("p",{className:"text-sm md:text-lg text-gray-500",children:"Manage and review your hotel reservations"})]}),e.jsx("div",{className:"flex gap-2 md:gap-3",children:e.jsxs("button",{onClick:w,className:"flex items-center gap-1 md:gap-2 px-3 md:px-5 py-2 md:py-3 text-white bg-[#5BBEBC] hover:bg-[#4BA9A6] rounded-xl shadow-md transition text-sm md:text-base",children:[e.jsx(os,{className:"w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})})]}),!v&&e.jsx("div",{className:"bg-white p-2.5 sm:p-4 md:p-6 rounded-xl shadow-md mb-6 md:mb-8 border border-gray-200",children:e.jsxs("div",{className:"flex flex-row gap-1 sm:gap-2 md:gap-4 overflow-x-auto pb-2 sm:pb-0 scrollbar-hide",children:[e.jsxs(de,{active:n==="upcoming",onClick:()=>d("upcoming"),count:D.upcoming,children:[e.jsx(ae,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Upcoming"})]}),e.jsxs(de,{active:n==="confirmed",onClick:()=>d("confirmed"),count:D.confirmed,children:[e.jsx(xe,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Confirmed"})]}),e.jsxs(de,{active:n==="cancelled",onClick:()=>d("cancelled"),count:D.cancelled,children:[e.jsx(he,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Cancelled"})]})]})})]}),v&&e.jsx("div",{className:"grid gap-4 md:gap-8",children:[1,2,3].map(a=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20",children:[e.jsx("div",{className:"p-4 md:p-8 border-b border-gray-100",children:e.jsxs("div",{className:"animate-pulse flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsx("div",{className:"h-6 md:h-8 w-32 md:w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-4 md:h-5 w-24 md:w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"h-6 md:h-8 w-16 md:w-24 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"})]})}),e.jsx("div",{className:"p-4 md:p-8",children:e.jsxs("div",{className:"animate-pulse grid md:grid-cols-2 gap-4 md:gap-8",children:[e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-4 md:h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-4 md:h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})})]},a))}),Z&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-4 md:p-8 flex items-start shadow-2xl",children:[e.jsx(me,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3 mt-1 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg mb-2",children:"Failed to Load Bookings"}),e.jsx("p",{className:"text-red-700 text-sm md:text-base",children:"Please check your connection and try again. If the problem persists, contact support."})]})]}),G.length>0?e.jsxs("div",{className:"space-y-4 md:space-y-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("h2",{className:"text-xl md:text-3xl font-bold text-gray-900",children:[n.charAt(0).toUpperCase()+n.slice(1)," Reservations",e.jsx("span",{className:"ml-2 md:ml-3 inline-flex items-center px-2 md:px-4 py-1 md:py-2 rounded-full text-sm md:text-lg font-semibold bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800",children:G.length})]})}),e.jsx("div",{className:"grid gap-4 md:gap-6",children:G.map(a=>{var j,g;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-md p-4 md:p-6 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 md:mb-4 gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-base md:text-lg font-semibold text-gray-900 flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("span",{className:"truncate",children:a.GuestName.trim()}),e.jsx(Ns,{status:a.Status,bookingStatus:a.BookingStatus})]}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-500 mt-1",children:["Reservation #",a.ReservationNo]}),e.jsx("p",{className:"text-xs md:text-sm text-[#5BBEBC] font-medium",children:(j=a.hotelInfo)==null?void 0:j.name})]}),e.jsxs("div",{className:"text-left sm:text-right flex-shrink-0",children:[e.jsx("p",{className:"text-lg md:text-xl font-bold text-[#5BBEBC]",children:Me(a.TotalInclusiveTax)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Amount"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4 mb-3 md:mb-4 text-xs md:text-sm text-gray-700",children:[e.jsxs("div",{className:"space-y-1 md:space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Stay:"})," ",oe(a.ArrivalDate)," - ",oe(a.DepartureDate)," (",a.NoOfNights," nights)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Room:"})," ",a.Room," #",a.RoomNo]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Guests:"})," ",a.Adult," Adult",a.Child>0?`, ${a.Child} Child`:""]})]}),e.jsxs("div",{className:"space-y-1 md:space-y-2",children:[e.jsxs("p",{className:"truncate",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",a.Email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",a.Mobile]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",a.TransactionStatus]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment Type:"})," ",((g=a.hotelInfo)==null?void 0:g.payAtHotel)==="yes"?"Pay at Hotel":"Paid Online"]}),a.DueAmount>0&&e.jsxs("p",{className:"font-semibold text-red-500",children:["Due: ",Me(a.DueAmount)]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center text-xs text-gray-500 border-t pt-3 md:pt-4 gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4",children:[e.jsxs("span",{children:["Booked: ",oe(a.ReservationDate)]}),e.jsxs("span",{children:["Source: ",a.Source]}),e.jsxs("span",{children:["Folio: ",a.FolioNo]})]}),e.jsx("div",{className:"flex gap-2 md:gap-3 justify-end",children:a.Status!=="Cancelled"&&a.BookingStatus!=="Cancelled"&&e.jsx(vs,{label:"Cancel",icon:e.jsx(Oe,{className:"w-3 h-3 md:w-4 md:h-4"}),danger:!0,onClick:()=>O(a)})})]})]},a.ReservationNo)})})]}):!v&&e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl  text-center py-8 md:py-16 px-4 md:px-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 md:gap-6",children:[e.jsxs("div",{className:"p-4 md:p-6 bg-gradient-to-br from-gray-100 to-slate-100 rounded-full",children:[n==="upcoming"&&e.jsx(ae,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"}),n==="confirmed"&&e.jsx(xe,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"}),n==="cancelled"&&e.jsx(he,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:["No ",n," bookings found"]}),e.jsx("p",{className:"text-gray-600 text-base md:text-lg max-w-md",children:t?`No ${n} bookings match your search criteria.`:`You don't have any ${n} bookings across all hotels yet.`})]}),!t&&n==="upcoming"&&e.jsxs("button",{className:"mt-2 md:mt-4 inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-primary-green text-white rounded-xl font-semibold shadow-lg transition-all duration-200 hover:scale-105 text-sm md:text-base",children:[e.jsx(ae,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Make a Booking"]})]})})]})]})},Cs=({onViewAll:r})=>{var n,d,m,h,c;const s=localStorage.getItem("user_email"),{openHotelModal:t}=Pe(),{data:l}=Ie(s);return console.log(l),e.jsxs("div",{className:" md:p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[e.jsx("div",{className:"bg-white rounded-3xl shadow-lg p-4 overflow-hidden max-w-md mx-auto",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-green-500 mb-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Book direct & pay less"]}),e.jsx("h3",{className:"text-gray-600 text-3xl font-bold mb-3",children:"Complete a stay and get 5% extra off on your next booking"}),e.jsx("button",{onClick:t,className:"px-4 py-2 mt-4 border border-primary-green rounded text-primary-green font-medium hover:bg-yellow-50 transition",children:"Book Now"})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"bg-white p-4 pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-primary-green text-2xl font-semibold mb-1",children:"Sunstar"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-900 font-semibold",children:((n=l==null?void 0:l.data)==null?void 0:n.firstName)+" "+((d=l==null?void 0:l.data)==null?void 0:d.lastName)}),e.jsx("div",{className:"text-gray-500 text-sm",children:(m=l==null?void 0:l.data)==null?void 0:m.email})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/images/loyalty-illustration.svg",alt:"",className:"h-[110px]"})})]}),e.jsx("div",{className:"bg-primary-green p-4",children:e.jsxs("div",{className:"flex justify-between items-center text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-semibold",children:[(h=l==null?void 0:l.data)==null?void 0:h.totalBookings," Stays"]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm opacity-90",children:"1 Stay to Road Warrior"})})]})})]})})]}),e.jsxs("div",{className:" mx-auto mt-5 md:p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Your Recent Stays"}),e.jsxs("p",{className:"mt-2 text-gray-500",children:[(c=l==null?void 0:l.data)==null?void 0:c.totalBookings," Stays completed in the past 180 days. Stays will appear here after check-out. They will be counted towards loyalty benefits within 48hrs."]}),e.jsxs("div",{className:"mt-6 bg-gray-100 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"You don't have any recent stays"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"It looks like you haven't completed a stay with us in the past 180 days. Check out our top-rated hotels & book direct to save more!"}),e.jsx("button",{onClick:r,className:"mt-4 bg-primary-green hover:bg-primary-green text-white font-semibold px-6 py-3 rounded-lg",children:"View All Bookings"})]})]})]})},ks=({onViewAll:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 max-w-6xl",children:[e.jsx("h2",{className:"text-xl md:text-4xl font-bold text-gray-800 mb-6",children:"Loyalty Program"}),e.jsx("div",{className:"bg-gradient-to-r from-primary-green to-primary-green rounded-lg p-4 md:p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-2",children:"Gold Member"}),e.jsx("p",{className:"text-yellow-100 text-sm md:text-base",children:"You've earned 1,250 points"})]}),e.jsx(Fe,{className:"w-8 h-8 md:w-12 md:h-12 text-yellow-200"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Points Balance"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-teal-500",children:"1,250"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Tier Status"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-primary-green",children:"Gold"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Next Tier"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-600",children:"Platinum (750 pts)"})]})]})]}),e.jsx(Cs,{onViewAll:r})]}),Bs=({onViewAll:r})=>{const s=[{id:1,customer:"John Doe",hotel:"SunStar Hotel",date:"2025-01-15",status:"Confirmed",bookingAmount:25e3,commissionRate:.1,location:"Mumbai",nights:3},{id:2,customer:"Jane Smith",hotel:"Blue Lagoon Resort",date:"2025-01-22",status:"Confirmed",bookingAmount:18e3,commissionRate:.08,location:"Goa",nights:2},{id:3,customer:"Mike Johnson",hotel:"Ocean View Hotel",date:"2025-02-05",status:"Confirmed",bookingAmount:32e3,commissionRate:.12,location:"Kerala",nights:4},{id:4,customer:"Sarah Wilson",hotel:"Mountain Resort",date:"2025-02-18",status:"Confirmed",bookingAmount:28e3,commissionRate:.09,location:"Manali",nights:5},{id:5,customer:"David Brown",hotel:"City Center Hotel",date:"2025-03-08",status:"Confirmed",bookingAmount:22e3,commissionRate:.11,location:"Delhi",nights:2},{id:6,customer:"Emma Davis",hotel:"Seaside Resort",date:"2025-03-20",status:"Pending",bookingAmount:35e3,commissionRate:.1,location:"Chennai",nights:6}],l=(()=>{const i={};return s.filter(x=>x.status==="Confirmed").forEach(x=>{const k=new Date(x.date),S=["January","February","March","April","May","June","July","August","September","October","November","December"][k.getMonth()],R=x.bookingAmount*x.commissionRate;i[S]||(i[S]=0),i[S]+=R}),Object.entries(i).map(([x,k])=>({month:x,amount:k}))})(),n=s.slice(-6).reverse(),d=s.filter(i=>i.status==="Confirmed").reduce((i,x)=>i+x.bookingAmount*x.commissionRate,0),m=s.length,h=s.filter(i=>i.status==="Confirmed").length,c=s.filter(i=>i.status==="Pending").length;return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-12",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h1",{className:"text-3xl front-medium text-gray-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Track your performance and earnings"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"text-2xl front-medium text-gray-900",children:["₹",d.toLocaleString("en-IN")]}),e.jsx(ys,{className:"w-4 h-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Total Earnings"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900",children:m}),e.jsx(bs,{className:"w-4 h-4 text-blue-500"})]}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Total Bookings"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900 block mb-2",children:h}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Confirmed"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900 block mb-2",children:c}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Pending"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl front-medium text-gray-900 mb-1",children:"Monthly Earnings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Commission breakdown by month"})]}),l.length>0?e.jsx("div",{className:"space-y-4",children:l.map((i,x)=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100 last:border-b-0",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:i.month}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["₹",i.amount.toLocaleString("en-IN")]})]},x))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No earnings data available"})})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl front-medium text-gray-900 mb-1",children:"Recent Bookings"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[h," confirmed, ",c," pending"]})]}),e.jsxs("button",{onClick:r,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx("span",{children:"View all"}),e.jsx(ds,{className:"w-4 h-4"})]})]}),n.length>0?e.jsx("div",{className:"space-y-1",children:n.map((i,x)=>{const k=i.bookingAmount*i.commissionRate;return e.jsx("div",{className:"group hover:bg-gray-50 transition-colors rounded-lg p-4 -mx-4",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Le,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:i.customer}),e.jsx("p",{className:"text-sm text-gray-500",children:i.hotel})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-700",children:i.location}),e.jsxs("p",{className:"text-xs text-gray-500",children:[i.nights," nights"]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("p",{className:"text-sm text-gray-700",children:new Date(i.date).toLocaleDateString("en-GB")})}),e.jsxs("div",{className:"col-span-2 text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["₹",i.bookingAmount.toLocaleString("en-IN")]}),e.jsx("p",{className:"text-sm text-green-600",children:i.status==="Confirmed"?`+₹${k.toLocaleString("en-IN")}`:"Pending"})]}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${i.status==="Confirmed"?"bg-green-500":"bg-yellow-500"}`})})]})},i.id)})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mb-4",children:e.jsx(Le,{className:"w-12 h-12 text-gray-300 mx-auto"})}),e.jsx("h3",{className:"text-lg front-medium text-gray-700 mb-2",children:"No bookings yet"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Start making bookings to see them here"}),e.jsx("button",{onClick:r,className:"inline-flex items-center space-x-2 bg-gray-900 hover:bg-gray-800 text-white px-6 py-2 rounded-md text-sm transition-colors",children:e.jsx("span",{children:"Get Started"})})]})]})]})]})},Ss=()=>{const r=[{month:"January",amount:"₹1,20,000"},{month:"February",amount:"₹98,500"},{month:"March",amount:"₹1,45,300"}],s=[{id:"C-101",dept:"Sales",rooms:6,date:"2025-03-12",status:"Confirmed"},{id:"C-102",dept:"HR",rooms:3,date:"2025-03-19",status:"Pending"}];return e.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Monthly Spend"}),e.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(t=>e.jsxs("li",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-gray-700",children:t.month}),e.jsx("span",{className:"font-medium text-primary-green",children:t.amount})]},t.month))})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Recent Corporate Bookings"}),e.jsxs("p",{className:"mt-2 text-gray-500",children:[s.length," group bookings in the last 180 days."]}),s.length>0?e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"ID"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Department"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Rooms"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Date"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Status"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"border border-gray-200 p-3",children:t.id}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.dept}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.rooms}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.date}),e.jsx("td",{className:`border border-gray-200 p-3 font-medium ${t.status==="Confirmed"?"text-green-600":"text-yellow-600"}`,children:t.status})]},t.id))})]})}):e.jsxs("div",{className:"mt-6 bg-gray-100 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"No recent corporate bookings"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Plan your next offsite or block rooms for your team."})]})]})]})},qs=()=>{var E,ee,je,be;const s=(ee=(E=rs().state)==null?void 0:E.tab)!=null?ee:"profile",[t,l]=f.useState(s),[n,d]=f.useState(null),[m,h]=f.useState(!1),[c,i]=f.useState(!1),{setIsNavColor:x}=Pe(),k=localStorage.getItem("user_email"),{data:y,isLoading:S}=cs(k),R=!!y&&(y==null?void 0:y.role)==="agent",Q=(je=y==null?void 0:y.approved)!=null?je:!1,b=!!y&&(y==null?void 0:y.role)==="corporate",B=(be=y==null?void 0:y.approved)!=null?be:!1,{data:p}=Ie(k);console.log(p);const{mutate:T}=ns();f.useEffect(()=>(x(!0),()=>{x(!1)}),[x]);const[v,Z]=f.useState({legalName:"",email:"",mobile:"",dateOfBirth:"",gender:"",cityOfResidence:""});f.useEffect(()=>{if(p!=null&&p.data){const{firstName:o,lastName:U,email:se,phone:Ne,dateOfBirth:Qe,gender:Ue,cityOfResidence:$e}=p.data;Z({legalName:`${o||""} ${U||""}`.trim(),email:se||"",mobile:Ne?`+91 - ${Ne}`:"",dateOfBirth:Qe||"",gender:Ue||"",cityOfResidence:$e||""})}},[p]);const[w,O]=f.useState({}),W=(()=>{const o=[{id:"loyalty",label:"Loyalty",icon:Fe},{id:"bookings",label:"Bookings",icon:ae},{id:"profile",label:"Profile",icon:gs}];return!S&&R&&Q&&o.push({id:"agent",label:"Agent",icon:Ee}),!S&&b&&B&&o.push({id:"corporate",label:"Corporate",icon:Ee}),o})(),G=W.find(o=>o.id===t)||W[0],z=o=>{d(o),O({[o]:v[o]})},D=o=>{const U=w[o];if(U===v[o]||U.trim()===""){d(null),O({});return}const se=I(P({},v),{[o]:U});Z(se),d(null),O({}),T(se)},a=()=>{d(null),O({})},j=o=>{l(o),i(!1)},g=()=>{switch(t){case"loyalty":return e.jsx(ks,{onViewAll:()=>l("bookings")});case"bookings":return e.jsx(ws,{});case"corporate":return S?e.jsx("div",{className:"p-4",children:"Loading corporate data..."}):b?B?e.jsx(Ss,{}):e.jsx("div",{className:"p-4",children:"Your corporate account is pending approval."}):e.jsx("div",{className:"p-4 text-red-600",children:"Not authorized as Corporate."});case"agent":return S?e.jsx("div",{className:"p-4",children:"Loading agent data..."}):R?Q?e.jsx(Bs,{}):e.jsx("div",{className:"p-4",children:"Your agent account is pending approval."}):e.jsx("div",{className:"p-4 text-red-600",children:"Not authorized as Agent."});case"profile":default:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Legal Name"}),n==="legalName"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:w.legalName||"",onChange:o=>O(I(P({},w),{legalName:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>D("legalName"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:v.legalName})]}),n!=="legalName"&&e.jsx("button",{onClick:()=>z("legalName"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email Address"}),n==="email"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"email",value:w.email||"",onChange:o=>O(I(P({},w),{email:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>D("email"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:v.email})]}),n!=="email"&&e.jsx("button",{onClick:()=>z("email"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Mobile Number"}),n==="mobile"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"tel",value:w.mobile||"",onChange:o=>O(I(P({},w),{mobile:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>D("mobile"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:v.mobile})]}),n!=="mobile"&&e.jsx("button",{onClick:()=>z("mobile"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date of Birth"}),n==="dateOfBirth"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"date",value:w.dateOfBirth||"",onChange:o=>O(I(P({},w),{dateOfBirth:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>D("dateOfBirth"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${v.dateOfBirth?"text-gray-800":"text-gray-400"}`,children:v.dateOfBirth||"Date of Birth"})]}),n!=="dateOfBirth"&&e.jsx("button",{onClick:()=>z("dateOfBirth"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Gender"}),n==="gender"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:w.gender||"",onChange:o=>O(I(P({},w),{gender:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("button",{onClick:()=>D("gender"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${v.gender?"text-gray-800":"text-gray-400"}`,children:v.gender||"Gender"})]}),n!=="gender"&&e.jsx("button",{onClick:()=>z("gender"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"City of Residence"}),n==="cityOfResidence"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:w.cityOfResidence||"",onChange:o=>O(I(P({},w),{cityOfResidence:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0",placeholder:"Enter your city"}),e.jsx("button",{onClick:()=>D("cityOfResidence"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(J,{className:"w-4 h-4"})}),e.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${v.cityOfResidence?"text-gray-800":"text-gray-400"}`,children:v.cityOfResidence||"City of Residence"})]}),n!=="cityOfResidence"&&e.jsx("button",{onClick:()=>z("cityOfResidence"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]})]})}},$=()=>{localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(o=>{const U=o.split("=")[0].trim();document.cookie=`${U}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}),"caches"in window&&caches.keys().then(o=>{o.forEach(U=>caches.delete(U))}),window.location.href="/"};return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"content mt-28 sm:mt-28 mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"lg:hidden mb-4 pt-6 mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>i(!c),className:"flex items-center justify-between w-full text-gray-700 bg-white px-4 py-2 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(G.icon,{className:"w-5 h-5"}),e.jsx("span",{children:G.label})]}),e.jsx(ms,{className:`w-4 h-4 transform transition-transform duration-200 ${c?"rotate-180":""}`})]}),c&&e.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:W.map(o=>e.jsxs("button",{onClick:()=>j(o.id),className:`w-full flex items-center space-x-2 px-4 py-3 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg transition-colors ${t===o.id?"bg-primary-green text-white hover:bg-primary-green":"text-gray-700"}`,children:[e.jsx(o.icon,{className:"w-5 h-5"}),e.jsx("span",{children:o.label})]},o.id))})]})}),e.jsxs("div",{className:"flex gap-6 min-h-[calc(100vh-120px)]",children:[m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>h(!1)}),e.jsx("div",{className:`
            fixed lg:sticky lg:top-0 top-0 left-0 h-full lg:h-auto
            w-80 max-w-[90vw] bg-white lg:bg-transparent
            transform transition-transform duration-300 ease-in-out
            ${m?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            z-50 lg:z-auto overflow-y-auto
          `,children:e.jsxs("div",{className:"p-4 lg:p-0 space-y-4",children:[e.jsx("div",{className:"lg:hidden flex justify-end",children:e.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(K,{className:"w-6 h-6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("img",{src:"/images/loyalty-illustration.svg",alt:"",className:"mx-auto h-[180px]"})}),e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Account Details"}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:v.email})]}),e.jsx("div",{className:"space-y-1",children:W.map(o=>e.jsxs("button",{onClick:()=>{l(o.id),h(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 text-left transition-colors ${t===o.id?"bg-primary-green text-white":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(o.icon,{className:"w-5 h-5"}),e.jsx("span",{className:t===o.id?"font-medium":"",children:o.label})]},o.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Need Help?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"mailto:booking@sunstarhospitality.com",className:"flex items-center space-x-2 text-primary-green hover:text-primary-green",children:[e.jsx(xs,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm break-all",children:"booking@sunstarhospitality.com"})]}),e.jsxs("a",{href:"tel:+91-9310831646",className:"flex items-center space-x-2 text-primary-green hover:text-primary-green",children:[e.jsx(hs,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"+91-91 9310831646"})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("a",{href:"/terms-conditions&cancellation",className:"block hover:text-gray-800 transition-colors",children:"Cancellation Policy"}),e.jsx("a",{href:"/terms-conditions&cancellation",className:"block hover:text-gray-800 transition-colors",children:"Terms & Conditions"}),e.jsx("a",{href:"/privacy-policies",className:"block hover:text-gray-800 transition-colors",children:"Privacy Policy"})]})]})}),e.jsxs("div",{className:"flex-1 bg-white my-6 hotelSelection rounded-lg p-4 sm:p-6 overflow-y-auto max-h-full",children:[g(),t==="profile"&&e.jsx("div",{className:"mt-12 pt-6 border-t border-gray-200",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(js,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Having trouble with your profile? Contact Support"})]}),e.jsx("button",{onClick:$,className:"bg-primary-green hover:bg-primary-green text-white px-6 py-2 rounded-md text-sm font-medium transition-colors self-start sm:self-center",children:"Logout"})]})})]})]})]})})};export{qs as default};
