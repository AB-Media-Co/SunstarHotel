var N=Object.defineProperty,T=Object.defineProperties;var _=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var z=(a,n,r)=>n in a?N(a,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[n]=r,j=(a,n)=>{for(var r in n||(n={}))K.call(n,r)&&z(a,r,n[r]);if(W)for(var r of W(n))O.call(n,r)&&z(a,r,n[r]);return a},g=(a,n)=>T(a,_(n));import{j as e,r as P,k as J,h as k}from"./index-AsfY2M-N.js";import{useGetHotels as Q}from"./useHotelHook2-DcvbjV10.js";import{c as p}from"./createSvgIcon-qo7wo3dq.js";import{C as X}from"./ContactMail-BzAJBn--.js";import{L as Y}from"./LocationCity-D52KQfur.js";import{A as Z}from"./ArrowForward-Dgwsw7bY.js";import{C as $}from"./Container-BIoi389N.js";import{P as ee,B as m,T as x,a as y,C as re,c as u,F as S,I,S as A}from"./TextField-C4GxksxH.js";import{b as se,c as ae,d as ne,A as v}from"./Stepper-BLHmO0MD.js";import{C as b,a as C,G as o}from"./Grid-CZCjkVh6.js";import{M as t}from"./MenuItem-DIbsenIH.js";import{C as le}from"./Chip-rRGLqGKZ.js";import"./clsx-B-dksMZM.js";import"./useThemeProps-3LT6cBRi.js";import"./useFormControl-BujTOs7L.js";import"./hoist-non-react-statics.cjs-Cxfv-rx9.js";import"./index-CLRDah4M.js";const te=p(e.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"})),ie=p(e.jsx("path",{d:"M20 7h-5V4c0-1.1-.9-2-2-2h-2c-1.1 0-2 .9-2 2v3H4c-1.1 0-2 .9-2 2v11c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V9c0-1.1-.9-2-2-2M9 12c.83 0 1.5.67 1.5 1.5S9.83 15 9 15s-1.5-.67-1.5-1.5S8.17 12 9 12m3 6H6v-.75c0-1 2-1.5 3-1.5s3 .5 3 1.5zm1-9h-2V4h2zm5 7.5h-4V15h4zm0-3h-4V12h4z"})),oe=p(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"})),de=p(e.jsx("path",{d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m-9-2V7H4v3H1v2h3v3h2v-3h3v-2zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"})),ce=p(e.jsx("path",{d:"M12.65 10C11.83 7.67 9.61 6 7 6c-3.31 0-6 2.69-6 6s2.69 6 6 6c2.61 0 4.83-1.67 5.65-4H17v4h4v-4h2v-4zM7 14c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2"})),We=()=>{const[a,n]=P.useState(0),[r,f]=P.useState({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),{data:h}=Q(),{mutate:B,isLoading:l}=J(),M=["Basic Information","Personal Details","Role & Security","Access Control"],c=s=>{const{name:d,value:i}=s.target;f(d==="allowedHotels"?g(j({},r),{[d]:typeof i=="string"?i.split(","):i}):g(j({},r),{[d]:i}))},E=()=>{n(s=>s+1)},L=()=>{n(s=>s-1)},V=s=>{s.preventDefault();const d=g(j({},r),{allowedCities:r.allowedCities?r.allowedCities.split(",").map(i=>i.trim()):[],allowedHotels:r.allowedHotels||[]});B(d,{onSuccess:()=>{k.success("User created successfully"),f({username:"",email:"",phone:"",gender:"",age:"",role:"",password:"",allowedCities:"",allowedHotels:[]}),n(0)},onError:i=>{k.error(i.message||"User creation failed")}})},D=()=>e.jsx(b,{elevation:0,sx:{p:2},children:e.jsxs(C,{children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(v,{sx:{bgcolor:"primary.main",mr:2},children:e.jsx(X,{})}),e.jsx(x,{variant:"h6",children:"Basic Information"})]}),e.jsx(u,{fullWidth:!0,label:"Username",name:"username",value:r.username,onChange:c,placeholder:"Enter username",required:!0,disabled:l,variant:"outlined",sx:{mb:3}}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(u,{fullWidth:!0,label:"Email",type:"email",name:"email",value:r.email,onChange:c,placeholder:"Enter email address",required:!0,disabled:l,variant:"outlined"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(u,{fullWidth:!0,label:"Phone Number",type:"tel",name:"phone",value:r.phone,onChange:c,placeholder:"Enter phone number",required:!0,disabled:l,variant:"outlined"})})]})]})}),R=()=>e.jsx(b,{elevation:0,sx:{p:2},children:e.jsxs(C,{children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(v,{sx:{bgcolor:"secondary.main",mr:2},children:e.jsx(ie,{})}),e.jsx(x,{variant:"h6",children:"Personal Details"})]}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:12,children:e.jsxs(S,{fullWidth:!0,variant:"outlined",children:[e.jsx(I,{children:"Gender"}),e.jsxs(A,{name:"gender",value:r.gender,onChange:c,label:"Gender",required:!0,disabled:l,children:[e.jsx(t,{value:"",disabled:!0,children:"Select gender"}),e.jsx(t,{value:"male",children:"Male"}),e.jsx(t,{value:"female",children:"Female"}),e.jsx(t,{value:"other",children:"Other"})]})]})}),e.jsx(o,{item:!0,xs:12,md:12,children:e.jsx(u,{fullWidth:!0,label:"Age",type:"number",name:"age",value:r.age,onChange:c,placeholder:"Enter age",required:!0,disabled:l,variant:"outlined",InputProps:{inputProps:{min:18,max:100}}})})]})]})}),q=()=>e.jsx(b,{elevation:0,sx:{p:2},children:e.jsxs(C,{children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(v,{sx:{bgcolor:"error.main",mr:2},children:e.jsx(ce,{})}),e.jsx(x,{variant:"h6",children:"Role & Security"})]}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(S,{fullWidth:!0,variant:"outlined",children:[e.jsx(I,{children:"Role"}),e.jsxs(A,{name:"role",value:r.role,onChange:c,label:"Role",required:!0,disabled:l,children:[e.jsx(t,{value:"",disabled:!0,children:"Select role"}),e.jsx(t,{value:"superadmin",children:"SuperAdmin"}),e.jsx(t,{value:"admin",children:"Admin"}),e.jsx(t,{value:"manager",children:"Manager"}),e.jsx(t,{value:"contentManager",children:"Content Manager"}),e.jsx(t,{value:"cityManager",children:"City Manager"}),e.jsx(t,{value:"hotelManager",children:"Hotel Manager"}),e.jsx(t,{value:"digitalMarketer",children:"Digital Marketer"})]})]})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(u,{fullWidth:!0,label:"Password",type:"password",name:"password",value:r.password,onChange:c,placeholder:"Enter password",required:!0,disabled:l,variant:"outlined"})})]})]})}),U=()=>{var s;return e.jsx(b,{elevation:0,sx:{p:2},children:e.jsxs(C,{children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(v,{sx:{bgcolor:"success.main",mr:2},children:e.jsx(Y,{})}),e.jsx(x,{variant:"h6",children:"Access Control"})]}),e.jsxs(o,{container:!0,spacing:2,children:[e.jsx(o,{item:!0,xs:12,md:6,children:e.jsx(u,{fullWidth:!0,label:"Allowed Cities",name:"allowedCities",value:r.allowedCities,onChange:c,placeholder:"e.g., city1, city2",disabled:l,variant:"outlined",helperText:"Enter cities separated by commas"})}),e.jsx(o,{item:!0,xs:12,md:6,children:e.jsxs(S,{fullWidth:!0,variant:"outlined",children:[e.jsx(I,{children:"Allowed Hotels"}),e.jsx(A,{multiple:!0,name:"allowedHotels",value:r.allowedHotels,onChange:c,label:"Allowed Hotels",disabled:l,renderValue:d=>e.jsx(m,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:d.map(i=>{const w=Array.isArray(h==null?void 0:h.hotels)?h.hotels.find(G=>G._id===i):null;return e.jsx(le,{label:(w==null?void 0:w.name)||i,size:"small",color:"primary",variant:"outlined"},i)})}),children:(s=h==null?void 0:h.hotels)==null?void 0:s.map(d=>e.jsx(t,{value:d._id,children:d.name},d._id))})]})})]})]})})},F=s=>{switch(s){case 0:return D();case 1:return R();case 2:return q();case 3:return U();default:return"Unknown step"}},H=s=>{switch(s){case 0:return r.username&&r.email&&r.phone;case 1:return r.gender&&r.age;case 2:return r.role&&r.password;case 3:return!0;default:return!1}};return e.jsx($,{maxWidth:"lg",sx:{mt:15,mb:5,minHeight:"80vh"},children:e.jsxs(ee,{elevation:3,sx:{p:4,borderRadius:2},children:[e.jsxs(m,{sx:{display:"flex",alignItems:"center",mb:4},children:[e.jsx(de,{fontSize:"large",sx:{color:"primary.main",mr:2}}),e.jsx(x,{variant:"h4",component:"h1",color:"primary.main",fontWeight:"500",children:"Create New User"})]}),e.jsx(se,{activeStep:a,alternativeLabel:!0,sx:{mb:4},children:M.map(s=>e.jsx(ae,{children:e.jsx(ne,{children:s})},s))}),e.jsxs(m,{component:"form",onSubmit:V,noValidate:!0,children:[F(a),e.jsxs(m,{sx:{display:"flex",justifyContent:"space-between",mt:4},children:[e.jsx(y,{variant:"outlined",disabled:a===0||l,onClick:L,startIcon:e.jsx(te,{}),children:"Back"}),a===M.length-1?e.jsx(y,{type:"submit",variant:"contained",color:"success",disabled:l||!H(a),endIcon:l?e.jsx(re,{size:20}):e.jsx(oe,{}),children:l?"Creating...":"Create User"}):e.jsx(y,{variant:"contained",onClick:E,disabled:!H(a),endIcon:e.jsx(Z,{}),children:"Next"})]})]})]})})};export{We as CreateUser,We as default};
