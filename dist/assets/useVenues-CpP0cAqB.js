var _=Object.defineProperty,D=Object.defineProperties;var F=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var K=Object.prototype.hasOwnProperty,g=Object.prototype.propertyIsEnumerable;var V=(t,e,a)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,q=(t,e)=>{for(var a in e||(e={}))K.call(e,a)&&V(t,a,e[a]);if(Q)for(var a of Q(e))g.call(e,a)&&V(t,a,e[a]);return t},v=(t,e)=>D(t,F(e));var d=(t,e,a)=>new Promise((s,n)=>{var r=u=>{try{c(a.next(u))}catch(p){n(p)}},i=u=>{try{c(a.throw(u))}catch(p){n(p)}},c=u=>u.done?s(u.value):Promise.resolve(u.value).then(r,i);c((a=a.apply(t,e)).next())});import{g as w,x as f,y as m,h as l,f as y}from"./index-_uP16iPH.js";const o={all:["venues"],list:t=>["venues","list",t],detail:t=>["venues","detail",t]},h=(...e)=>d(void 0,[...e],function*(t={}){const{data:a}=yield y.get("/api/venues",{params:t});return a}),C=t=>d(void 0,null,function*(){const{data:e}=yield y.post("/api/venues",t);return e}),E=a=>d(void 0,[a],function*({id:t,updates:e}){const{data:s}=yield y.put(`/api/venues/${t}`,e);return s}),S=t=>d(void 0,null,function*(){const{data:e}=yield y.delete(`/api/venues/${t}`);return e}),L=(t={},e={})=>w(q({queryKey:o.list(t),queryFn:()=>h(t),keepPreviousData:!0,staleTime:6e4},e)),P=()=>{const t=f();return m({mutationFn:C,onSuccess:e=>{var a;t.invalidateQueries({queryKey:o.all}),(a=e==null?void 0:e.data)!=null&&a._id&&t.setQueryData(o.detail(e.data._id),e),l.success("Venue created successfully")},onError:e=>{var a,s;l.error(((s=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to create venue")}})},$=()=>{const t=f();return m({mutationFn:E,onSuccess:e=>{const a=e==null?void 0:e.data;a!=null&&a._id&&t.setQueryData(o.detail(a._id),e),t.invalidateQueries({queryKey:o.all}),l.success("Venue updated successfully")},onError:e=>{var a,s;l.error(((s=(a=e==null?void 0:e.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to update venue")}})},b=()=>{const t=f();return m({mutationFn:S,onMutate:e=>d(void 0,null,function*(){yield t.cancelQueries({queryKey:o.all});const a=t.getQueriesData({queryKey:o.all});return a.forEach(([s,n])=>{var i;if(!(n!=null&&n.data))return;const r=v(q({},n),{data:n.data.filter(c=>c._id!==e),total:Math.max(0,((i=n.total)!=null?i:0)-1)});t.setQueryData(s,r)}),{prevLists:a}}),onError:(e,a,s)=>{var n,r,i;(n=s==null?void 0:s.prevLists)==null||n.forEach(([c,u])=>{t.setQueryData(c,u)}),l.error(((i=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:i.message)||"Failed to delete venue")},onSuccess:()=>{l.success("Venue deleted successfully")},onSettled:()=>{t.invalidateQueries({queryKey:o.all})}})};export{P as a,$ as b,b as c,L as u};
