var Je=Object.defineProperty,Ve=Object.defineProperties;var Ye=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,Re=Object.prototype.propertyIsEnumerable;var Oe=r=>{throw TypeError(r)};var Be=(r,s,t)=>s in r?Je(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t,D=(r,s)=>{for(var t in s||(s={}))Se.call(s,t)&&Be(r,t,s[t]);if(te)for(var t of te(s))Re.call(s,t)&&Be(r,t,s[t]);return r},P=(r,s)=>Ve(r,Ye(s));var Ee=(r,s)=>{var t={};for(var a in r)Se.call(r,a)&&s.indexOf(a)<0&&(t[a]=r[a]);if(r!=null&&te)for(var a of te(r))s.indexOf(a)<0&&Re.call(r,a)&&(t[a]=r[a]);return t};var de=(r,s,t)=>s.has(r)||Oe("Cannot "+t);var p=(r,s,t)=>(de(r,s,"read from private field"),t?t.call(r):s.get(r)),I=(r,s,t)=>s.has(r)?Oe("Cannot add the same private member more than once"):s instanceof WeakSet?s.add(r):s.set(r,t),B=(r,s,t,a)=>(de(r,s,"write to private field"),a?a.call(r,t):s.set(r,t),t),O=(r,s,t)=>(de(r,s,"access private method"),t);var ae=(r,s,t)=>new Promise((a,d)=>{var i=c=>{try{u(t.next(c))}catch(n){d(n)}},m=c=>{try{u(t.throw(c))}catch(n){d(n)}},u=c=>c.done?a(c.value):Promise.resolve(c.value).then(i,m);u((t=t.apply(r,s)).next())});import{S as We,E as xe,F as _e,Q as He,x as Xe,G as Ze,H as es,r as y,I as ss,J as ts,K as as,M as rs,N as Le,P as Ae,T as ls,U as ns,z as be,d as is,f as os,j as e,h as ds,u as cs}from"./index-CpVBVbB-.js";import{e as ms,u as Ue,f as xs}from"./useUser-RLWBpsMH.js";import{useGetHotels as hs}from"./useHotelHook2-BjuuErFG.js";import{C as he,R as gs,a as ge,b as ue}from"./refresh-cw-C1HFK3wJ.js";import{T as Me}from"./trash-2-BFxPfkWw.js";import{C as re}from"./calendar-DTE8ytvS.js";import{S as Qe}from"./star-CHfoB2Fj.js";import{c as Z}from"./createLucideIcon-DqZxdNDy.js";import{E as us}from"./eye-CuSVP1WC.js";import{f as ps}from"./useAgentHook-CYlNwA17.js";import{C as fs}from"./chevron-down-CAY9xvMd.js";import{X as K}from"./x-p3bfvtVD.js";import{M as ys}from"./mail-Cwdv7lLk.js";import{P as js}from"./phone-BNsduY_x.js";import{S as V}from"./save-CbJOZE0S.js";import{U as bs}from"./user-ByTTsgvO.js";import{S as Te}from"./shield-DzJGg8t2.js";function De(r,s){return r.filter(t=>!s.includes(t))}function Ns(r,s,t){const a=r.slice(0);return a[s]=t,a}var Y,E,q,W,L,z,_,X,j,pe,fe,le,ye,je,Fe,vs=(Fe=class extends We{constructor(s,t,a){super();I(this,j);I(this,Y);I(this,E);I(this,q);I(this,W);I(this,L);I(this,z);I(this,_);I(this,X);B(this,Y,s),B(this,W,a),B(this,q,[]),B(this,L,[]),B(this,E,[]),this.setQueries(t)}onSubscribe(){this.listeners.size===1&&p(this,L).forEach(s=>{s.subscribe(t=>{O(this,j,ye).call(this,s,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,p(this,L).forEach(s=>{s.destroy()})}setQueries(s,t,a){B(this,q,s),B(this,W,t),xe.batch(()=>{const d=p(this,L),i=O(this,j,le).call(this,p(this,q));i.forEach(n=>n.observer.setOptions(n.defaultedQueryOptions,a));const m=i.map(n=>n.observer),u=m.map(n=>n.getCurrentResult()),c=m.some((n,g)=>n!==d[g]);d.length===m.length&&!c||(B(this,L,m),B(this,E,u),this.hasListeners()&&(De(d,m).forEach(n=>{n.destroy()}),De(m,d).forEach(n=>{n.subscribe(g=>{O(this,j,ye).call(this,n,g)})}),O(this,j,je).call(this)))})}getCurrentResult(){return p(this,E)}getQueries(){return p(this,L).map(s=>s.getCurrentQuery())}getObservers(){return p(this,L)}getOptimisticResult(s,t){const d=O(this,j,le).call(this,s).map(i=>i.observer.getOptimisticResult(i.defaultedQueryOptions));return[d,i=>O(this,j,fe).call(this,i!=null?i:d,t),()=>O(this,j,pe).call(this,d,s)]}},Y=new WeakMap,E=new WeakMap,q=new WeakMap,W=new WeakMap,L=new WeakMap,z=new WeakMap,_=new WeakMap,X=new WeakMap,j=new WeakSet,pe=function(s,t){const a=O(this,j,le).call(this,t);return a.map((d,i)=>{const m=s[i];return d.defaultedQueryOptions.notifyOnChangeProps?m:d.observer.trackResult(m,u=>{a.forEach(c=>{c.observer.trackProp(u)})})})},fe=function(s,t){return t?((!p(this,z)||p(this,E)!==p(this,X)||t!==p(this,_))&&(B(this,_,t),B(this,X,p(this,E)),B(this,z,_e(p(this,z),t(s)))),p(this,z)):s},le=function(s){const t=new Map(p(this,L).map(d=>[d.options.queryHash,d])),a=[];return s.forEach(d=>{const i=p(this,Y).defaultQueryOptions(d),m=t.get(i.queryHash);m?a.push({defaultedQueryOptions:i,observer:m}):a.push({defaultedQueryOptions:i,observer:new He(p(this,Y),i)})}),a},ye=function(s,t){const a=p(this,L).indexOf(s);a!==-1&&(B(this,E,Ns(p(this,E),a,t)),O(this,j,je).call(this))},je=function(){var s;if(this.hasListeners()){const t=p(this,z),a=O(this,j,fe).call(this,O(this,j,pe).call(this,p(this,E),p(this,q)),(s=p(this,W))==null?void 0:s.combine);t!==a&&xe.batch(()=>{this.listeners.forEach(d=>{d(p(this,E))})})}},Fe);function ws(a,t){var d=a,{queries:r}=d,s=Ee(d,["queries"]);const i=Xe(),m=Ze(),u=es(),c=y.useMemo(()=>r.map(x=>{const N=i.defaultQueryOptions(x);return N._optimisticResults=m?"isRestoring":"optimistic",N}),[r,i,m]);c.forEach(x=>{ss(x),ts(x,u)}),as(u);const[n]=y.useState(()=>new vs(i,c,s)),[g,b,G]=n.getOptimisticResult(c,s.combine);y.useSyncExternalStore(y.useCallback(x=>m?rs:n.subscribe(xe.batchCalls(x)),[n,m]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),y.useEffect(()=>{n.setQueries(c,s,{listeners:!1})},[c,s,n]);const A=g.some((x,N)=>Le(c[N],x))?g.flatMap((x,N)=>{const C=c[N];if(C){const M=new He(i,C);if(Le(C,x))return Ae(C,M,u);ls(x,m)&&Ae(C,M,u)}return[]}):[];if(A.length>0)throw Promise.all(A);const R=g.find((x,N)=>{const C=c[N];return C&&ns({result:x,errorResetBoundary:u,throwOnError:C.throwOnError,query:i.getQueryCache().get(C.queryHash)})});if(R!=null&&R.error)throw R.error;return b(G())}/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cs=Z("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ks=Z("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=Z("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bs=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=Z("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Ss=({status:r,bookingStatus:s})=>s==="Confirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[e.jsx(ge,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Confirmed"]}):s==="Unconfirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border border-amber-200",children:[e.jsx(he,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Unconfirmed"]}):r==="Cancelled"?e.jsxs("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200",children:[e.jsx(ue,{className:"w-3 h-3 mr-1 md:mr-1.5"}),"Cancelled"]}):e.jsx("span",{className:"inline-flex items-center px-2 md:px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200",children:s}),ce=r=>new Date(r).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),Ie=r=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(r),Rs=({label:r,icon:s,secondary:t,danger:a,onClick:d})=>{let i="bg-[#5BBEBC] text-white hover:bg-[#4BA9A6]";return t&&(i="bg-gray-100 text-gray-700 hover:bg-gray-200"),a&&(i="bg-red-100 text-red-700 hover:bg-red-200"),e.jsxs("button",{onClick:d,className:`flex items-center gap-1 md:gap-2 px-2 md:px-4 py-1.5 md:py-2 rounded-lg text-xs md:text-sm font-medium transition ${i}`,children:[s,e.jsx("span",{className:"hidden sm:inline",children:r})]})},me=({active:r,onClick:s,children:t,count:a})=>e.jsxs("button",{onClick:s,className:`w-full sm:w-auto relative px-3 py-2 rounded-lg text-xs sm:text-sm font-semibold transition-all duration-200 whitespace-nowrap flex items-center justify-center sm:justify-start gap-1 ${r?"bg-[#5BBEBC] text-white shadow-lg":"bg-white text-gray-600 hover:bg-gray-50 border border-gray-200"}`,children:[t,a>0&&e.jsx("span",{className:`ml-0.5 px-1 py-0.5 rounded-full text-xs font-bold ${r?"bg-white/20 text-white":"bg-gray-100 text-gray-600"}`,children:a})]}),Os=()=>{const{openHotelModal:r}=be(),[s,t]=y.useState("");is();const[a,d]=y.useState(""),[i,m]=y.useState("upcoming"),[u,c]=y.useState(!1),[n,g]=y.useState(null),[b,G]=y.useState(null),[F,A]=y.useState(!1);y.useEffect(()=>{window.scrollTo(0,0)},[]);const{data:R,isLoading:x,error:N}=hs(),C=ms(),M=ws({queries:((R==null?void 0:R.hotels)||[]).map(l=>({queryKey:["my-bookings",l.hotelCode,s],queryFn:()=>ae(void 0,null,function*(){if(!l.hotelCode||!s||!l.authKey)return{BookingList:[],hotelInfo:l};try{const f=yield os.get("/api/seemybookings",{params:{hotelCode:l.hotelCode,email:s,apiKey:l.authKey}});return P(D({},f.data),{hotelInfo:l,BookingList:(f.data.BookingList||[]).map(h=>P(D({},h),{hotelInfo:l}))})}catch(f){return console.error(`Failed to fetch bookings for ${l.name}:`,f),{BookingList:[],hotelInfo:l}}}),enabled:!!l.hotelCode&&!!s&&!!l.authKey,staleTime:3e4,refetchOnWindowFocus:!1}))}),U=M.reduce((l,f)=>{var h;return(h=f.data)!=null&&h.BookingList&&l.push(...f.data.BookingList),l},[]);console.log(U);const J=M.some(l=>l.isLoading),Q=M.some(l=>l.error);y.useEffect(()=>{const l=localStorage.getItem("user_email");console.log(l),t(l)},[R]);const ie=()=>{M.forEach(l=>l.refetch())},v=l=>{g(l),G(l.hotelInfo),c(!0)},ee=()=>ae(void 0,null,function*(){if(!n||!b){ds.error("No booking selected or hotel information missing");return}A(!0);try{yield C.mutateAsync({hotelCode:b.hotelCode,apiKey:b.authKey,reservationNo:n.ReservationNo}),M.forEach(l=>l.refetch()),c(!1),g(null),G(null)}catch(l){console.error("Booking cancellation error:",l)}finally{A(!1)}}),w=(()=>{const l=new Date,f=U.filter(h=>{var S;return h.GuestName.toLowerCase().includes(a.toLowerCase())||h.ReservationNo.toLowerCase().includes(a.toLowerCase())||((S=h.hotelInfo)==null?void 0:S.name.toLowerCase().includes(a.toLowerCase()))});switch(i){case"upcoming":return f.filter(h=>{const S=new Date(h.DepartureDate);return h.Status!=="Cancelled"&&h.BookingStatus!=="Cancelled"&&S>=l});case"confirmed":return f.filter(h=>h.BookingStatus==="Confirmed Reservation"&&h.Status!=="Cancelled");case"cancelled":return f.filter(h=>h.Status==="Cancelled"||h.BookingStatus==="Cancelled");default:return f}})();console.log(w,"Filtered Bookings");const $=(()=>{const l=new Date,f=U.filter(T=>{const oe=new Date(T.DepartureDate);return T.Status!=="Cancelled"&&T.BookingStatus!=="Cancelled"&&oe>=l}).length,h=U.filter(T=>T.BookingStatus==="Confirmed Reservation"&&T.Status!=="Cancelled").length,S=U.filter(T=>T.Status==="Cancelled"||T.BookingStatus==="Cancelled").length;return{upcoming:f,confirmed:h,cancelled:S}})();return x?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:e.jsx("div",{className:"content mx-auto px-4 py-4 md:py-8",children:e.jsxs("div",{className:"space-y-4 md:space-y-8",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-8 md:h-10 w-48 md:w-64 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl mb-2 md:mb-4"}),e.jsx("div",{className:"h-4 md:h-6 w-64 md:w-96 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"grid gap-4 md:gap-6",children:[1,2,3].map(l=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-4 md:p-8",children:e.jsxs("div",{className:"animate-pulse space-y-4 md:space-y-6",children:[e.jsx("div",{className:"h-6 md:h-8 w-32 md:w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-4 md:h-6 w-24 md:w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-3 md:h-4 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-3 md:h-4 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-3 md:h-4 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})},l))})]})})}):N?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-6 md:p-8 flex items-start shadow-2xl max-w-md w-full",children:[e.jsx(he,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3 mt-1 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-700 text-sm md:text-base",children:"Failed to load hotel information. Please check your connection and try again."})]})]})}):e.jsxs("div",{className:"min-h-screen",children:[u&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 ",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-4 transform transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 md:h-16 md:w-16 rounded-full bg-red-100 mb-3 md:mb-4",children:e.jsx(Me,{className:"h-6 w-6 md:h-8 md:w-8 text-red-600"})}),e.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-2",children:"Cancel Booking"}),e.jsxs("p",{className:"text-gray-600 mb-4 md:mb-6 text-sm md:text-base",children:["Are you sure you want to cancel the booking for ",e.jsx("span",{className:"font-semibold",children:n==null?void 0:n.GuestName}),"?",e.jsx("br",{}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-500",children:["Reservation #",n==null?void 0:n.ReservationNo]})]}),e.jsxs("div",{className:"flex gap-2 md:gap-3",children:[e.jsx("button",{onClick:()=>c(!1),className:"flex-1 px-3 md:px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl text-sm md:text-base font-medium transition-colors",children:"Keep Booking"}),e.jsx("button",{onClick:ee,className:"flex-1 px-3 md:px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-xl text-sm md:text-base font-medium transition-colors flex justify-center items-center",disabled:F,children:F?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-4 w-4 md:h-5 md:w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z"})]}),e.jsx("span",{className:"hidden sm:inline",children:"Cancelling..."})]}):"Cancel Booking"})]})]})})}),e.jsxs("div",{className:"mx-auto",children:[e.jsxs("div",{className:"mb-6 md:mb-12",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center mb-4 md:mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-4xl font-bold text-gray-900 mb-1 md:mb-2",children:"My Bookings"}),e.jsx("p",{className:"text-sm md:text-lg text-gray-500",children:"Manage and review your hotel reservations"})]}),e.jsx("div",{className:"flex gap-2 md:gap-3",children:e.jsxs("button",{onClick:ie,className:"flex items-center gap-1 md:gap-2 px-3 md:px-5 py-2 md:py-3 text-white bg-[#5BBEBC] hover:bg-[#4BA9A6] rounded-xl shadow-md transition text-sm md:text-base",children:[e.jsx(gs,{className:"w-4 h-4 md:w-5 md:h-5"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]})})]}),!J&&e.jsx("div",{className:"bg-white p-2.5 sm:p-4 md:p-6 rounded-xl shadow-md mb-6 md:mb-8 border border-gray-200",children:e.jsxs("div",{className:"flex flex-row gap-1 sm:gap-2 md:gap-4 overflow-x-auto pb-2 sm:pb-0 scrollbar-hide",children:[e.jsxs(me,{active:i==="upcoming",onClick:()=>m("upcoming"),count:$.upcoming,children:[e.jsx(re,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Upcoming"})]}),e.jsxs(me,{active:i==="confirmed",onClick:()=>m("confirmed"),count:$.confirmed,children:[e.jsx(ge,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Confirmed"})]}),e.jsxs(me,{active:i==="cancelled",onClick:()=>m("cancelled"),count:$.cancelled,children:[e.jsx(ue,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 md:w-4 md:h-4"}),e.jsx("span",{className:" sm:inline",children:"Cancelled"})]})]})})]}),J&&e.jsx("div",{className:"grid gap-4 md:gap-8",children:[1,2,3].map(l=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20",children:[e.jsx("div",{className:"p-4 md:p-8 border-b border-gray-100",children:e.jsxs("div",{className:"animate-pulse flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsx("div",{className:"h-6 md:h-8 w-32 md:w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-4 md:h-5 w-24 md:w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"h-6 md:h-8 w-16 md:w-24 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"})]})}),e.jsx("div",{className:"p-4 md:p-8",children:e.jsxs("div",{className:"animate-pulse grid md:grid-cols-2 gap-4 md:gap-8",children:[e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-4 md:h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"space-y-2 md:space-y-4",children:[e.jsx("div",{className:"h-4 md:h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 md:h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})})]},l))}),Q&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-4 md:p-8 flex items-start shadow-2xl",children:[e.jsx(he,{className:"h-5 w-5 md:h-6 md:w-6 mr-2 md:mr-3 mt-1 text-red-500 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-base md:text-lg mb-2",children:"Failed to Load Bookings"}),e.jsx("p",{className:"text-red-700 text-sm md:text-base",children:"Please check your connection and try again. If the problem persists, contact support."})]})]}),w.length>0?e.jsxs("div",{className:"space-y-4 md:space-y-8",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("h2",{className:"text-xl md:text-3xl font-bold text-gray-900",children:[i.charAt(0).toUpperCase()+i.slice(1)," Reservations",e.jsx("span",{className:"ml-2 md:ml-3 inline-flex items-center px-2 md:px-4 py-1 md:py-2 rounded-full text-sm md:text-lg font-semibold bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800",children:w.length})]})}),e.jsx("div",{className:"grid gap-4 md:gap-6",children:w.map(l=>{var f,h;return e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-md p-4 md:p-6 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 md:mb-4 gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("h2",{className:"text-base md:text-lg font-semibold text-gray-900 flex flex-col sm:flex-row sm:items-center gap-2",children:[e.jsx("span",{className:"truncate",children:l.GuestName.trim()}),e.jsx(Ss,{status:l.Status,bookingStatus:l.BookingStatus})]}),e.jsxs("p",{className:"text-xs md:text-sm text-gray-500 mt-1",children:["Reservation #",l.ReservationNo]}),e.jsx("p",{className:"text-xs md:text-sm text-[#5BBEBC] font-medium",children:(f=l.hotelInfo)==null?void 0:f.name})]}),e.jsxs("div",{className:"text-left sm:text-right flex-shrink-0",children:[e.jsx("p",{className:"text-lg md:text-xl font-bold text-[#5BBEBC]",children:Ie(l.TotalInclusiveTax)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Amount"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4 mb-3 md:mb-4 text-xs md:text-sm text-gray-700",children:[e.jsxs("div",{className:"space-y-1 md:space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Stay:"})," ",ce(l.ArrivalDate)," - ",ce(l.DepartureDate)," (",l.NoOfNights," nights)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Room:"})," ",l.Room," #",l.RoomNo]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Guests:"})," ",l.Adult," Adult",l.Child>0?`, ${l.Child} Child`:""]})]}),e.jsxs("div",{className:"space-y-1 md:space-y-2",children:[e.jsxs("p",{className:"truncate",children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",l.Email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",l.Mobile]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",l.TransactionStatus]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment Type:"})," ",((h=l.hotelInfo)==null?void 0:h.payAtHotel)==="yes"?"Pay at Hotel":"Paid Online"]}),l.DueAmount>0&&e.jsxs("p",{className:"font-semibold text-red-500",children:["Due: ",Ie(l.DueAmount)]})]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:justify-between lg:items-center text-xs text-gray-500 border-t pt-3 md:pt-4 gap-3",children:[e.jsxs("div",{className:"flex flex-wrap gap-2 md:gap-4",children:[e.jsxs("span",{children:["Booked: ",ce(l.ReservationDate)]}),e.jsxs("span",{children:["Source: ",l.Source]}),e.jsxs("span",{children:["Folio: ",l.FolioNo]})]}),e.jsx("div",{className:"flex gap-2 md:gap-3 justify-end",children:l.Status!=="Cancelled"&&l.BookingStatus!=="Cancelled"&&e.jsx(Rs,{label:"Cancel",icon:e.jsx(Me,{className:"w-3 h-3 md:w-4 md:h-4"}),danger:!0,onClick:()=>v(l)})})]})]},l.ReservationNo)})})]}):!J&&e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl  text-center py-8 md:py-16 px-4 md:px-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 md:gap-6",children:[e.jsxs("div",{className:"p-4 md:p-6 bg-gradient-to-br from-gray-100 to-slate-100 rounded-full",children:[i==="upcoming"&&e.jsx(re,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"}),i==="confirmed"&&e.jsx(ge,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"}),i==="cancelled"&&e.jsx(ue,{className:"w-8 h-8 md:w-12 md:h-12 text-gray-400"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:["No ",i," bookings found"]}),e.jsx("p",{className:"text-gray-600 text-base md:text-lg max-w-md",children:a?`No ${i} bookings match your search criteria.`:`You don't have any ${i} bookings across all hotels yet.`})]}),!a&&i==="upcoming"&&e.jsxs("button",{onClick:r,className:"mt-2 md:mt-4 inline-flex items-center justify-center px-6 md:px-8 py-3 md:py-4 bg-primary-green text-white rounded-xl font-semibold shadow-lg transition-all duration-200 hover:scale-105 text-sm md:text-base",children:[e.jsx(re,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Make a Booking"]})]})})]})]})},Es=({onViewAll:r})=>{var d,i,m,u,c;const s=localStorage.getItem("user_email"),{openHotelModal:t}=be(),{data:a}=Ue(s);return console.log(a),e.jsxs("div",{className:" md:p-8",children:[e.jsxs("div",{className:"max-w-6xl mx-auto grid lg:grid-cols-2 gap-12 items-center",children:[e.jsx("div",{className:"bg-white rounded-3xl shadow-lg p-4 overflow-hidden max-w-md mx-auto",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center text-sm text-green-500 mb-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Book direct & pay less"]}),e.jsx("h3",{className:"text-gray-600 text-3xl font-bold mb-3",children:"Complete a stay and get 5% extra off on your next booking"}),e.jsx("button",{onClick:t,className:"px-4 py-2 mt-4 border border-primary-green rounded text-primary-green font-medium hover:bg-yellow-50 transition",children:"Book Now"})]})}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"bg-white rounded-3xl shadow-lg overflow-hidden max-w-md mx-auto",children:[e.jsxs("div",{className:"bg-white p-4 pb-0",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("div",{children:e.jsx("h2",{className:"text-primary-green text-2xl font-semibold mb-1",children:"Sunstar"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-gray-900 font-semibold",children:((d=a==null?void 0:a.data)==null?void 0:d.firstName)+" "+((i=a==null?void 0:a.data)==null?void 0:i.lastName)}),e.jsx("div",{className:"text-gray-500 text-sm",children:(m=a==null?void 0:a.data)==null?void 0:m.email})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("img",{src:"/images/loyalty-illustration.svg",alt:"",className:"h-[110px]"})})]}),e.jsx("div",{className:"bg-primary-green p-4",children:e.jsxs("div",{className:"flex justify-between items-center text-white",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg font-semibold",children:[(u=a==null?void 0:a.data)==null?void 0:u.totalBookings," Stays"]}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"text-sm opacity-90",children:"1 Stay to Road Warrior"})})]})})]})})]}),e.jsxs("div",{className:" mx-auto mt-5 md:p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Your Recent Stays"}),e.jsxs("p",{className:"mt-2 text-gray-500",children:[(c=a==null?void 0:a.data)==null?void 0:c.totalBookings," Stays completed in the past 180 days. Stays will appear here after check-out. They will be counted towards loyalty benefits within 48hrs."]}),e.jsxs("div",{className:"mt-6 bg-gray-100 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"You don't have any recent stays"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"It looks like you haven't completed a stay with us in the past 180 days. Check out our top-rated hotels & book direct to save more!"}),e.jsx("button",{onClick:r,className:"mt-4 bg-primary-green hover:bg-primary-green text-white font-semibold px-6 py-3 rounded-lg",children:"View All Bookings"})]})]})]})},Ls=({onViewAll:r})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-6 max-w-6xl",children:[e.jsx("h2",{className:"text-xl md:text-4xl font-bold text-gray-800 mb-6",children:"Loyalty Program"}),e.jsx("div",{className:"bg-gradient-to-r from-primary-green to-primary-green rounded-lg p-4 md:p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg md:text-xl font-semibold mb-2",children:"Gold Member"}),e.jsx("p",{className:"text-yellow-100 text-sm md:text-base",children:"You've earned 1,250 points"})]}),e.jsx(Qe,{className:"w-8 h-8 md:w-12 md:h-12 text-yellow-200"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Points Balance"}),e.jsx("p",{className:"text-xl md:text-2xl font-bold text-teal-500",children:"1,250"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Tier Status"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-primary-green",children:"Gold"})]}),e.jsxs("div",{className:"bg-white border rounded-lg p-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 text-sm md:text-base",children:"Next Tier"}),e.jsx("p",{className:"text-base md:text-lg font-semibold text-gray-600",children:"Platinum (750 pts)"})]})]})]}),e.jsx(Es,{onViewAll:r})]}),As=({onViewAll:r})=>{const s=[{id:1,customer:"John Doe",hotel:"SunStar Hotel",date:"2025-01-15",status:"Confirmed",bookingAmount:25e3,commissionRate:.1,location:"Mumbai",nights:3},{id:2,customer:"Jane Smith",hotel:"Blue Lagoon Resort",date:"2025-01-22",status:"Confirmed",bookingAmount:18e3,commissionRate:.08,location:"Goa",nights:2},{id:3,customer:"Mike Johnson",hotel:"Ocean View Hotel",date:"2025-02-05",status:"Confirmed",bookingAmount:32e3,commissionRate:.12,location:"Kerala",nights:4},{id:4,customer:"Sarah Wilson",hotel:"Mountain Resort",date:"2025-02-18",status:"Confirmed",bookingAmount:28e3,commissionRate:.09,location:"Manali",nights:5},{id:5,customer:"David Brown",hotel:"City Center Hotel",date:"2025-03-08",status:"Confirmed",bookingAmount:22e3,commissionRate:.11,location:"Delhi",nights:2},{id:6,customer:"Emma Davis",hotel:"Seaside Resort",date:"2025-03-20",status:"Pending",bookingAmount:35e3,commissionRate:.1,location:"Chennai",nights:6}],a=(()=>{const n={};return s.filter(g=>g.status==="Confirmed").forEach(g=>{const b=new Date(g.date),F=["January","February","March","April","May","June","July","August","September","October","November","December"][b.getMonth()],A=g.bookingAmount*g.commissionRate;n[F]||(n[F]=0),n[F]+=A}),Object.entries(n).map(([g,b])=>({month:g,amount:b}))})(),d=s.slice(-6).reverse(),i=s.filter(n=>n.status==="Confirmed").reduce((n,g)=>n+g.bookingAmount*g.commissionRate,0),m=s.length,u=s.filter(n=>n.status==="Confirmed").length,c=s.filter(n=>n.status==="Pending").length;return e.jsxs("div",{className:"max-w-7xl mx-auto p-6 space-y-12",children:[e.jsxs("div",{className:"border-b border-gray-200 pb-8",children:[e.jsx("h1",{className:"text-3xl front-medium text-gray-900 mb-2",children:"Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Track your performance and earnings"})]}),e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsxs("span",{className:"text-2xl front-medium text-gray-900",children:["₹",i.toLocaleString("en-IN")]}),e.jsx(Cs,{className:"w-4 h-4 text-green-500"})]}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Total Earnings"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900",children:m}),e.jsx(Bs,{className:"w-4 h-4 text-blue-500"})]}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Total Bookings"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900 block mb-2",children:u}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Confirmed"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-2xl front-medium text-gray-900 block mb-2",children:c}),e.jsx("p",{className:"text-sm text-gray-500 uppercase tracking-wide",children:"Pending"})]})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-xl front-medium text-gray-900 mb-1",children:"Monthly Earnings"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Commission breakdown by month"})]}),a.length>0?e.jsx("div",{className:"space-y-4",children:a.map((n,g)=>e.jsxs("div",{className:"flex justify-between items-center py-3 border-b border-gray-100 last:border-b-0",children:[e.jsx("span",{className:"text-gray-700 font-medium",children:n.month}),e.jsxs("span",{className:"text-gray-900 font-medium",children:["₹",n.amount.toLocaleString("en-IN")]})]},g))}):e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"No earnings data available"})})]}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl front-medium text-gray-900 mb-1",children:"Recent Bookings"}),e.jsxs("p",{className:"text-sm text-gray-500",children:[u," confirmed, ",c," pending"]})]}),e.jsxs("button",{onClick:r,className:"flex items-center space-x-1 text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[e.jsx("span",{children:"View all"}),e.jsx(us,{className:"w-4 h-4"})]})]}),d.length>0?e.jsx("div",{className:"space-y-1",children:d.map((n,g)=>{const b=n.bookingAmount*n.commissionRate;return e.jsx("div",{className:"group hover:bg-gray-50 transition-colors rounded-lg p-4 -mx-4",children:e.jsxs("div",{className:"grid grid-cols-12 gap-4 items-center",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"w-8 h-8 bg-gray-100 rounded-full flex items-center justify-center",children:e.jsx(Pe,{className:"w-4 h-4 text-gray-500"})})}),e.jsxs("div",{className:"col-span-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:n.customer}),e.jsx("p",{className:"text-sm text-gray-500",children:n.hotel})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-700",children:n.location}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.nights," nights"]})]}),e.jsx("div",{className:"col-span-2",children:e.jsx("p",{className:"text-sm text-gray-700",children:new Date(n.date).toLocaleDateString("en-GB")})}),e.jsxs("div",{className:"col-span-2 text-right",children:[e.jsxs("p",{className:"font-medium text-gray-900",children:["₹",n.bookingAmount.toLocaleString("en-IN")]}),e.jsx("p",{className:"text-sm text-green-600",children:n.status==="Confirmed"?`+₹${b.toLocaleString("en-IN")}`:"Pending"})]}),e.jsx("div",{className:"col-span-1 text-right",children:e.jsx("span",{className:`inline-block w-2 h-2 rounded-full ${n.status==="Confirmed"?"bg-green-500":"bg-yellow-500"}`})})]})},n.id)})}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"mb-4",children:e.jsx(Pe,{className:"w-12 h-12 text-gray-300 mx-auto"})}),e.jsx("h3",{className:"text-lg front-medium text-gray-700 mb-2",children:"No bookings yet"}),e.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Start making bookings to see them here"}),e.jsx("button",{onClick:r,className:"inline-flex items-center space-x-2 bg-gray-900 hover:bg-gray-800 text-white px-6 py-2 rounded-md text-sm transition-colors",children:e.jsx("span",{children:"Get Started"})})]})]})]})]})},Ms=()=>{const r=[{month:"January",amount:"₹1,20,000"},{month:"February",amount:"₹98,500"},{month:"March",amount:"₹1,45,300"}],s=[{id:"C-101",dept:"Sales",rooms:6,date:"2025-03-12",status:"Confirmed"},{id:"C-102",dept:"HR",rooms:3,date:"2025-03-19",status:"Pending"}];return e.jsxs("div",{className:"space-y-8 p-4 md:p-6",children:[e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Monthly Spend"}),e.jsx("ul",{className:"divide-y divide-gray-200",children:r.map(t=>e.jsxs("li",{className:"flex justify-between py-2",children:[e.jsx("span",{className:"text-gray-700",children:t.month}),e.jsx("span",{className:"font-medium text-primary-green",children:t.amount})]},t.month))})]}),e.jsxs("div",{className:"bg-white shadow-md rounded-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800",children:"Recent Corporate Bookings"}),e.jsxs("p",{className:"mt-2 text-gray-500",children:[s.length," group bookings in the last 180 days."]}),s.length>0?e.jsx("div",{className:"mt-6 overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse border border-gray-200 text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"ID"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Department"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Rooms"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Date"}),e.jsx("th",{className:"border border-gray-200 p-3 text-left",children:"Status"})]})}),e.jsx("tbody",{children:s.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[e.jsx("td",{className:"border border-gray-200 p-3",children:t.id}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.dept}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.rooms}),e.jsx("td",{className:"border border-gray-200 p-3",children:t.date}),e.jsx("td",{className:`border border-gray-200 p-3 font-medium ${t.status==="Confirmed"?"text-green-600":"text-yellow-600"}`,children:t.status})]},t.id))})]})}):e.jsxs("div",{className:"mt-6 bg-gray-100 rounded-lg p-8 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-700",children:"No recent corporate bookings"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Plan your next offsite or block rooms for your team."})]})]})]})},Ts=({isOpen:r,onClose:s,onConfirm:t,isLoggingOut:a})=>r?e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:s}),e.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-[90%] max-w-md mx-4 overflow-hidden animate-in fade-in zoom-in duration-200",children:[e.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-orange-50 p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(ne,{className:"w-8 h-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Logout Confirmation"}),e.jsx("p",{className:"text-gray-600 mt-2 text-sm",children:"Are you sure you want to logout from your account?"})]}),e.jsxs("div",{className:"p-6 flex flex-col sm:flex-row gap-3",children:[e.jsx("button",{onClick:s,disabled:a,className:"flex-1 px-6 py-3 border-2 border-gray-200 text-gray-700 rounded-xl font-medium hover:bg-gray-50 hover:border-gray-300 transition-all duration-200 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{onClick:t,disabled:a,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-500 to-red-600 text-white rounded-xl font-medium hover:from-red-600 hover:to-red-700 transition-all duration-200 flex items-center justify-center gap-2 disabled:opacity-70 shadow-lg shadow-red-500/25",children:a?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Logging out..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Yes, Logout"})]})})]})]})]}):null,Zs=()=>{var Ne,ve,we,Ce;const s=(ve=(Ne=cs().state)==null?void 0:Ne.tab)!=null?ve:"profile",[t,a]=y.useState(s),[d,i]=y.useState(null),[m,u]=y.useState(!1),[c,n]=y.useState(!1),[g,b]=y.useState(!1),[G,F]=y.useState(!1),{setIsNavColor:A}=be(),R=localStorage.getItem("user_email"),{data:x,isLoading:N}=ps(R),C=!!x&&(x==null?void 0:x.role)==="agent",M=(we=x==null?void 0:x.approved)!=null?we:!1,U=!!x&&(x==null?void 0:x.role)==="corporate",J=(Ce=x==null?void 0:x.approved)!=null?Ce:!1,{data:Q}=Ue(R);console.log(Q);const{mutate:ie}=xs();y.useEffect(()=>(A(!0),()=>{A(!1)}),[A]);const[v,ee]=y.useState({legalName:"",email:"",mobile:"",dateOfBirth:"",gender:"",cityOfResidence:""});y.useEffect(()=>{if(Q!=null&&Q.data){const{firstName:o,lastName:H,email:se,phone:ke,dateOfBirth:Ge,gender:Ke,cityOfResidence:qe}=Q.data;ee({legalName:`${o||""} ${H||""}`.trim(),email:se||"",mobile:ke?`+91 - ${ke}`:"",dateOfBirth:Ge||"",gender:Ke||"",cityOfResidence:qe||""})}},[Q]);const[k,w]=y.useState({}),$=(()=>{const o=[{id:"loyalty",label:"Loyalty",icon:Qe},{id:"bookings",label:"Bookings",icon:re},{id:"profile",label:"Profile",icon:bs}];return!N&&C&&M&&o.push({id:"agent",label:"Agent",icon:Te}),!N&&U&&J&&o.push({id:"corporate",label:"Corporate",icon:Te}),o})(),l=$.find(o=>o.id===t)||$[0],f=o=>{i(o),w({[o]:v[o]})},h=o=>{const H=k[o];if(H===v[o]||H.trim()===""){i(null),w({});return}const se=P(D({},v),{[o]:H});ee(se),i(null),w({}),ie(se)},S=()=>{i(null),w({})},T=o=>{a(o),n(!1)},oe=()=>ae(void 0,null,function*(){F(!0),yield new Promise(o=>setTimeout(o,800)),localStorage.clear(),sessionStorage.clear(),document.cookie.split(";").forEach(o=>{const H=o.split("=")[0].trim();document.cookie=`${H}=;expires=Thu, 01 Jan 1970 00:00:00 UTC;path=/;`}),"caches"in window&&caches.keys().then(o=>{o.forEach(H=>caches.delete(H))}),window.location.href="/"}),ze=()=>{switch(t){case"loyalty":return e.jsx(Ls,{onViewAll:()=>a("bookings")});case"bookings":return e.jsx(Os,{});case"corporate":return N?e.jsx("div",{className:"p-4",children:"Loading corporate data..."}):U?J?e.jsx(Ms,{}):e.jsx("div",{className:"p-4",children:"Your corporate account is pending approval."}):e.jsx("div",{className:"p-4 text-red-600",children:"Not authorized as Corporate."});case"agent":return N?e.jsx("div",{className:"p-4",children:"Loading agent data..."}):C?M?e.jsx(As,{}):e.jsx("div",{className:"p-4",children:"Your agent account is pending approval."}):e.jsx("div",{className:"p-4 text-red-600",children:"Not authorized as Agent."});case"profile":default:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Legal Name"}),d==="legalName"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:k.legalName||"",onChange:o=>w(P(D({},k),{legalName:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>h("legalName"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:v.legalName})]}),d!=="legalName"&&e.jsx("button",{onClick:()=>f("legalName"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Email Address"}),d==="email"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"email",value:k.email||"",onChange:o=>w(P(D({},k),{email:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>h("email"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:v.email})]}),d!=="email"&&e.jsx("button",{onClick:()=>f("email"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Mobile Number"}),d==="mobile"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"tel",value:k.mobile||"",onChange:o=>w(P(D({},k),{mobile:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>h("mobile"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:"text-gray-800 break-words",children:v.mobile})]}),d!=="mobile"&&e.jsx("button",{onClick:()=>f("mobile"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Date of Birth"}),d==="dateOfBirth"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"date",value:k.dateOfBirth||"",onChange:o=>w(P(D({},k),{dateOfBirth:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0"}),e.jsx("button",{onClick:()=>h("dateOfBirth"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${v.dateOfBirth?"text-gray-800":"text-gray-400"}`,children:v.dateOfBirth||"Date of Birth"})]}),d!=="dateOfBirth"&&e.jsx("button",{onClick:()=>f("dateOfBirth"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"Gender"}),d==="gender"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:k.gender||"",onChange:o=>w(P(D({},k),{gender:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]}),e.jsx("button",{onClick:()=>h("gender"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${v.gender?"text-gray-800":"text-gray-400"}`,children:v.gender||"Gender"})]}),d!=="gender"&&e.jsx("button",{onClick:()=>f("gender"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]}),e.jsx("div",{className:"border-t border-gray-200"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-500 mb-1",children:"City of Residence"}),d==="cityOfResidence"?e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:k.cityOfResidence||"",onChange:o=>w(P(D({},k),{cityOfResidence:o.target.value})),className:"border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-teal-500 flex-1 min-w-0",placeholder:"Enter your city"}),e.jsx("button",{onClick:()=>h("cityOfResidence"),className:"text-teal-500 hover:text-teal-600 p-1",children:e.jsx(V,{className:"w-4 h-4"})}),e.jsx("button",{onClick:S,className:"text-gray-500 hover:text-gray-600 p-1",children:e.jsx(K,{className:"w-4 h-4"})})]}):e.jsx("p",{className:`break-words ${v.cityOfResidence?"text-gray-800":"text-gray-400"}`,children:v.cityOfResidence||"City of Residence"})]}),d!=="cityOfResidence"&&e.jsx("button",{onClick:()=>f("cityOfResidence"),className:"text-teal-500 hover:text-teal-600 text-sm font-medium self-start sm:self-center",children:"Edit"})]})]})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Ts,{isOpen:g,onClose:()=>b(!1),onConfirm:oe,isLoggingOut:G}),e.jsxs("div",{className:"content mt-28 sm:mt-28 mx-auto px-4 sm:px-6",children:[e.jsx("div",{className:"lg:hidden mb-4 pt-6 mt-4",children:e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>n(!c),className:"flex items-center justify-between w-full text-gray-700 bg-white px-4 py-2 rounded-lg shadow-sm border",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l.icon,{className:"w-5 h-5"}),e.jsx("span",{children:l.label})]}),e.jsx(fs,{className:`w-4 h-4 transform transition-transform duration-200 ${c?"rotate-180":""}`})]}),c&&e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg z-50",children:[$.map(o=>e.jsxs("button",{onClick:()=>T(o.id),className:`w-full flex items-center space-x-2 px-4 py-3 text-left hover:bg-gray-50 first:rounded-t-lg last:rounded-b-lg transition-colors ${t===o.id?"bg-primary-green text-white hover:bg-primary-green":"text-gray-700"}`,children:[e.jsx(o.icon,{className:"w-5 h-5"}),e.jsx("span",{children:o.label})]},o.id)),e.jsx("div",{className:"border-t border-gray-200",children:e.jsxs("button",{onClick:()=>{n(!1),b(!0)},className:"w-full flex items-center space-x-2 px-4 py-3 text-left text-red-600 hover:bg-red-50 rounded-b-lg transition-colors",children:[e.jsx(ne,{className:"w-5 h-5"}),e.jsx("span",{children:"Logout"})]})})]})]})}),e.jsxs("div",{className:"flex gap-6 min-h-[calc(100vh-120px)]",children:[m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-40 lg:hidden",onClick:()=>u(!1)}),e.jsx("div",{className:`
            fixed lg:sticky lg:top-0 top-0 left-0 h-full lg:h-auto
            w-80 max-w-[90vw] bg-white lg:bg-transparent
            transform transition-transform duration-300 ease-in-out
            ${m?"translate-x-0":"-translate-x-full lg:translate-x-0"}
            z-50 lg:z-auto overflow-y-auto
          `,children:e.jsxs("div",{className:"p-4 lg:p-0 space-y-4",children:[e.jsx("div",{className:"lg:hidden flex justify-end",children:e.jsx("button",{onClick:()=>u(!1),className:"text-gray-500 hover:text-gray-700",children:e.jsx(K,{className:"w-6 h-6"})})}),e.jsxs("div",{children:[e.jsx("div",{className:"hidden lg:block",children:e.jsx("img",{src:"/images/loyalty-illustration.svg",alt:"",className:"mx-auto h-[180px]"})}),e.jsxs("div",{className:"bg-white rounded-lg overflow-hidden shadow-sm",children:[e.jsxs("div",{className:"p-4 border-b",children:[e.jsx("h3",{className:"font-medium text-gray-800",children:"Account Details"}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:v.email})]}),e.jsx("div",{className:"space-y-1",children:$.map(o=>e.jsxs("button",{onClick:()=>{a(o.id),u(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 text-left transition-colors ${t===o.id?"bg-primary-green text-white":"hover:bg-gray-50 text-gray-700"}`,children:[e.jsx(o.icon,{className:"w-5 h-5"}),e.jsx("span",{className:t===o.id?"font-medium":"",children:o.label})]},o.id))})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[e.jsx("h3",{className:"font-medium text-gray-800 mb-4",children:"Need Help?"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:"mailto:booking@sunstarhospitality.com",className:"flex items-center space-x-2 text-primary-green hover:text-primary-green",children:[e.jsx(ys,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm break-all",children:"booking@sunstarhospitality.com"})]}),e.jsxs("a",{href:"tel:+91-9310831646",className:"flex items-center space-x-2 text-primary-green hover:text-primary-green",children:[e.jsx(js,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"+91-91 9310831646"})]})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[e.jsx("a",{href:"/terms-conditions&cancellation",className:"block hover:text-gray-800 transition-colors",children:"Cancellation Policy"}),e.jsx("a",{href:"/terms-conditions&cancellation",className:"block hover:text-gray-800 transition-colors",children:"Terms & Conditions"}),e.jsx("a",{href:"/privacy-policies",className:"block hover:text-gray-800 transition-colors",children:"Privacy Policy"})]}),e.jsx("div",{className:"py-2",children:e.jsxs("button",{onClick:()=>b(!0),className:"group w-full flex items-center justify-center gap-3 px-4 py-3 bg-gradient-to-r from-red-50 to-orange-50 hover:from-red-100 hover:to-orange-100 border border-red-200 hover:border-red-300 text-red-600 hover:text-red-700 rounded-xl transition-all duration-300 shadow-sm hover:shadow-md",children:[e.jsx("div",{className:"p-1.5 bg-red-100 group-hover:bg-red-200 rounded-lg transition-colors duration-300",children:e.jsx(ne,{className:"w-4 h-4"})}),e.jsx("span",{className:"font-medium",children:"Logout"})]})})]})}),e.jsxs("div",{className:"flex-1 bg-white my-6 hotelSelection rounded-lg p-4 sm:p-6 overflow-y-auto max-h-full",children:[ze(),t==="profile"&&e.jsx("div",{className:"mt-12 pt-6 border-t border-gray-200",children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:e.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[e.jsx(ks,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:"Having trouble with your profile? Contact Support"})]})})})]})]})]})]})};export{Zs as default};
