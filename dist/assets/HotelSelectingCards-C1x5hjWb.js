const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calendar-C-FMPJMO.js","assets/index-AsfY2M-N.js","assets/index-C9Ub2gIR.css","assets/index-hJzA2ap8.js","assets/Icons-BC8cY_4R.js","assets/useRoomsHook-D6KCaqGp.js","assets/useHotelHook2-DcvbjV10.js","assets/urlHelper-C1y1jxtM.js","assets/isSameMonth-Cfl0aQcP.js","assets/ArrowBackIosNew-Cis064_n.js","assets/createSvgIcon-qo7wo3dq.js","assets/clsx-B-dksMZM.js","assets/ArrowForwardIos-nW7TOSIY.js","assets/Close-Bg-hxcZs.js"])))=>i.map(i=>d[i]);
import{r as i,j as e,_ as I,A as S}from"./index-AsfY2M-N.js";import{useGetHotels as P}from"./useHotelHook2-DcvbjV10.js";import{r as H,m as w}from"./proxy-Ykm3ZXdV.js";import{c as E}from"./createSvgIcon-qo7wo3dq.js";import{C as O,a as R}from"./chevron-right-BV0pKIp1.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-CaOQPjdY.js";const D={some:0,all:1};function _(t,r,{root:l,margin:u,amount:d="some"}={}){const a=H(t),o=new WeakMap,c=f=>{f.forEach(m=>{const h=o.get(m.target);if(m.isIntersecting!==!!h)if(m.isIntersecting){const v=r(m);typeof v=="function"?o.set(m.target,v):n.unobserve(m.target)}else h&&(h(m),o.delete(m.target))})},n=new IntersectionObserver(c,{root:l,rootMargin:u,threshold:typeof d=="number"?d:D[d]});return a.forEach(f=>n.observe(f)),()=>n.disconnect()}function z(t,{root:r,margin:l,amount:u,once:d=!1}={}){const[a,o]=i.useState(!1);return i.useEffect(()=>{if(!t.current||d&&a)return;const c=()=>(o(!0),d?void 0:()=>o(!1)),n={root:r&&r.current||void 0,margin:l,amount:u};return _(t.current,c,n)},[r,t,l,d,u]),a}const T=E(e.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),L=i.lazy(()=>I(()=>import("./Calendar-C-FMPJMO.js").then(t=>t.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13]))),M=t=>{if(!t)return"";const r=t.split(",").map(l=>l.trim());if(r.length>=3){const l=r[r.length-2],u=r[r.length-1].split("-")[0];return`${l}, ${u}`}else if(r.length===2)return r.join(", ");return t},X=({hotel:t})=>{var p;const[r,l]=i.useState(0),[u,d]=i.useState(!1),a=((p=t==null?void 0:t.imageSections)==null?void 0:p.carouselImages)||(t==null?void 0:t.images)||[],o=i.useRef(null),c=i.useRef(!1),n=i.useRef(null),f=50,m=i.useCallback(()=>{l(s=>s===0?a.length-1:s-1)},[a.length]),h=i.useCallback(()=>{l(s=>s===a.length-1?0:s+1)},[a.length]),v=s=>{l(s)},b=s=>{s.pointerType==="mouse"&&s.button!==0||(o.current=s.clientX,n.current=s.clientX,c.current=!0,s.currentTarget.setPointerCapture(s.pointerId))},j=s=>{c.current&&(n.current=s.clientX)},g=s=>{var N;if(!c.current)return;c.current=!1;try{s.currentTarget.releasePointerCapture(s.pointerId)}catch(V){}const x=o.current,k=(N=n.current)!=null?N:s.clientX;if(x==null)return;const y=k-x;Math.abs(y)>=f&&(y<0?h():m()),o.current=null,n.current=null};return a.length===0?e.jsx("div",{className:"w-full h-96 bg-gray-300 rounded-xl flex items-center justify-center",children:"No images available"}):e.jsxs("div",{className:"w-full relative",children:[e.jsxs("div",{className:"relative w-full h-80 bg-gray-200 rounded-2xl overflow-hidden group touch-action-pan-y",onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onPointerDown:b,onPointerMove:j,onPointerUp:g,children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:a.map((s,x)=>e.jsx("img",{src:s,alt:`Hotel image ${x+1}`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${x===r?"opacity-100":"opacity-0"}`,loading:"lazy",decoding:"async",draggable:!1},x))}),e.jsx("button",{onClick:m,onPointerDown:s=>s.stopPropagation(),className:`absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 p-2.5 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 ${u?"opacity-100":"opacity-0"}`,children:e.jsx(O,{size:24,strokeWidth:3})}),e.jsx("button",{onClick:h,onPointerDown:s=>s.stopPropagation(),className:`absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 p-2.5 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 ${u?"opacity-100":"opacity-0"}`,children:e.jsx(R,{size:24,strokeWidth:3})})]}),e.jsx("div",{className:"bottom-2 absolute left-0 right-0 flex justify-center gap-2",children:a.map((s,x)=>e.jsx("button",{onClick:()=>v(x),className:`h-1 rounded-full transition-all duration-300 ${r===x?"bg-primary-green w-8":"bg-gray-300 w-6 hover:bg-gray-400"}`},x))})]})},C=i.memo(({hotel:t,close:r})=>{var v,b,j;const l={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},[u,d]=i.useState(!1),[,a]=i.useState(null),[,o]=i.useState(null);i.useEffect(()=>{const g=localStorage.getItem("checkInDate"),p=localStorage.getItem("checkOutDate");g&&p&&(a(g),o(p))},[]);const c=((v=t==null?void 0:t.amenities)==null?void 0:v.slice(0,3))||[],n=(((b=t==null?void 0:t.amenities)==null?void 0:b.length)||0)-c.length,f=i.useCallback(()=>{localStorage.setItem("hotelInfo",JSON.stringify(t)),d(!0)},[t]),m=i.useCallback(()=>{d(!1),r()},[r]),h=g=>{if(!g&&g!==0)return null;const p=Number(g).toFixed(1);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("img",{src:"/images/tripadvisor-logo.svg",alt:"Tripadvisor rating",className:"h-4 md:h-5",loading:"lazy"}),e.jsx("span",{className:"text-primary-green text-base font-semibold",children:p})]})};return e.jsxs(w.div,{className:"bg-primary-white rounded-2xl shadow-lg overflow-hidden w-full h-full transition-transform duration-300 hover:scale-105 flex flex-col",variants:l,initial:"hidden",animate:"visible",children:[e.jsx(X,{hotel:t}),e.jsxs("div",{className:"p-4 flex flex-col flex-grow justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center gap-4",children:[e.jsx("h1",{className:"text-xl  text-start font-bold text-black cursor-pointer hover:text-primary-green   transition-colors duration-300",onClick:f,children:t==null?void 0:t.name}),h(t.rating)]}),e.jsxs("div",{className:"flex items-center mt-1 text-gray-600 text-sm font-semibold",children:[e.jsx(T,{className:"text-primary-green mr-1",style:{fontSize:"16px"}}),e.jsx("span",{children:M((j=t==null?void 0:t.location)==null?void 0:j.hotelAddress)})]}),e.jsxs("ul",{className:"flex items-center mt-2 flex-wrap",children:[c.length>0?c.map((g,p)=>{const s=typeof g=="object"?g.value:g;return e.jsx("li",{className:"bg-gradient-to-r from-primary-green to-primary-green text-primary-white text-xs px-3 py-1 rounded-full m-1",children:e.jsx("span",{children:s})},p)}):e.jsx("li",{children:"No amenities listed"}),n>0&&e.jsxs("li",{className:"text-gray-600 text-xs m-1",children:["+",n," more"]})]})]}),e.jsxs("div",{className:"mt-4 w-full",children:[e.jsxs("div",{className:"text-start",children:[e.jsxs("span",{className:"text-2xl leading-none font-bold text-primary-green",children:["â‚¹ ",t==null?void 0:t.price,e.jsx("span",{className:"text-gray-400 text-sm font-medium",children:" / night onwards"}),e.jsx("br",{}),e.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Incl. taxes"})]}),e.jsx("p",{className:"text-primary-green text-[12px] font-semibold",children:"Lowest Price, Guaranteed!"})]}),e.jsx("button",{onClick:f,className:"bg-primary-green cursor-pointer w-full text-primary-white px-4 py-2 rounded-lg shadow-md flex justify-center items-center transition duration-300 hover:bg-primary-dark-green mt-4",children:"Select Hotel"})]})]}),u&&e.jsx("div",{className:"fixed inset-0 flex justify-center items-center z-50",children:e.jsx(i.Suspense,{fallback:e.jsx("div",{className:"bg-white p-8 rounded-lg animate-pulse",children:e.jsx("div",{className:"h-64 w-96 bg-gray-200 rounded"})}),children:e.jsx(L,{setCheckInDate:a,setCheckOutDate:o,setOpenCalender:m,hotelCode:t.hotelCode})})})]})});C.displayName="HotelCard";const $=i.memo(({data:t,close:r})=>{console.log(t);const l=i.useRef(null);z(l,{once:!0,amount:.1});const{data:u,isLoading:d}=P();console.log(u);const{availabilityData:a}=S();console.log(a);const o=u||t;console.log(o);const c=i.useMemo(()=>o!=null&&o.hotels?o.hotels.filter(n=>n!=null&&n.active?(a&&Object.keys(a).length>0&&a[n.hotelCode],!0):!1):[],[o,a]);return console.log("activeHotels",c),d?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:[...Array(6)].map((n,f)=>e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 h-48 rounded-2xl mb-4"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},f))}):e.jsxs(w.div,{ref:l,className:"grid grid-cols-1 items-stretch bg-primary-white sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 p-6",children:[c.length===0&&e.jsx("p",{children:"No hotels found (activeHotels is empty)"}),c.map((n,f)=>e.jsx(C,{hotel:n,close:r},n._id||n.hotelCode))]})});$.displayName="HotelSelectingCards";export{$ as default};
