import{j as e,L as Y,N as se,Q as K,E as D,T as u,b as _,r as y,a as $,U as te,V as re,W as ne,X as Z,Z as X,$ as oe,s as le,e as ae,g as ie}from"./index-CBuf6u-D.js";import{R as ce,W as de}from"./Warning-D6HUNC82.js";import{A as me,a as xe}from"./ArrowRightAlt-CnJqNQEJ.js";import{f as U,d as ue}from"./format-C4BekRQj.js";const he=({ContactUsDetail:t})=>e.jsxs("div",{className:"flex flex-col gap-6 md:gap-10 md:flex-row justify-between md:items-center text-gray-600 px-4 py-6",children:[e.jsxs("div",{className:"flex flex-col gap-3 md:gap-4",children:[e.jsx("p",{className:"text-lg md:text-2xl font-bold tracking-tight",children:"Facing an Issue? Call us for assistance."}),e.jsx("a",{href:`tel:${t==null?void 0:t.phoneNumber}`,className:"text-base md:text-xl font-semibold underline hover:text-gray-800 transition-colors duration-300",children:t==null?void 0:t.phoneNumber})]}),e.jsxs("div",{className:"flex gap-6 md:gap-8",children:[e.jsx(Y,{to:"/terms-conditions&cancellation",className:"text-base md:text-lg font-medium underline hover:text-gray-800 transition-colors duration-300",children:"Cancellation Policy"}),e.jsx(Y,{to:"/terms-conditions&cancellation",className:"text-base md:text-lg font-medium underline hover:text-gray-800 transition-colors duration-300",children:"Terms & Conditions"})]})]}),fe=(t,c,m,i,l)=>K({mutationFn:async o=>{const r={Room_Details:l.reduce((a,s,n)=>(a[`Room_${n+1}`]={Rateplan_Id:s.rateplanId||"",Ratetype_Id:s.RateTypeID||"",Roomtype_Id:s.RoomTypeID||"",baserate:s.price?s.price.toString():"0",extradultrate:s.extraAdultRate?s.extraAdultRate.toString():"0",extrachildrate:s.extraChildRate?s.extraChildRate.toString():"0",number_adults:s.guestQty?s.guestQty.toString():"1",number_children:s.childrenQty?s.childrenQty.toString():"0",ExtraChild_Age:s.childrenQty>0?s.childAge||"0":"",Title:o.title||"",First_Name:o.firstName||"",Last_Name:o.lastName||"",Gender:o.gender||"",SpecialRequest:o.specialRequest||""},a),{}),check_in_date:m,check_out_date:i,Booking_Payment_Mode:o.paymentMethod||"",Email_Address:o.email||"",MobileNo:o.phoneNumber||"",Address:o.address||"",Country:o.country||"",City:o.city||"",Zipcode:o.zipcode||""};return(await D.post("/api/booking",{roomData:r,hotelDetail:{hotelCode:t,authKey:c}})).data},onSuccess:o=>{if(o&&o.ReservationNo)return u.success(`Booking successful! Reservation #${o.ReservationNo}`),o;throw u.error("Booking failed: "+(o.message||"Unknown error")),new Error(o.message||"Unknown error")},onError:o=>{var r,x;throw console.error("Booking error:",o),u.error("Error making booking: "+(((x=(r=o==null?void 0:o.response)==null?void 0:r.data)==null?void 0:x.message)||o.message)),o}}),ge=()=>{const t=se();return K({mutationFn:async c=>(await D.post("/api/newBooking/createBooking",c)).data,onSuccess:()=>{t.invalidateQueries({queryKey:["bookings"]})},onError:c=>{var m,i;u.error(`Failed to create booking: ${((i=(m=c.response)==null?void 0:m.data)==null?void 0:i.message)||c.message}`)}})},pe=({hotelDetail:t,guestFormRef:c,checkIn:m,checkOut:i})=>{const{selectedRooms:l}=_(),[o,r]=y.useState(""),[x,a]=y.useState(!1),s=$(),{mutate:n,isLoading:h}=fe(t==null?void 0:t.hotelCode,t==null?void 0:t.authKey,m,i,l),g=p=>{r(p)},{mutate:j}=te(),b=async()=>{if(c.current&&!c.current.validateForm()){u.error("Please fill all required guest information");return}const p=c.current.getGuestDetails();if(!p.firstName||!p.lastName||!p.email){u.error("Please provide name and email information");return}p.paymentMethod=o;const w={userEmail:p.email,userPhone:p.phoneNumber,checkIn:m,checkOut:i,hotelCode:t==null?void 0:t.hotelCode,Hoteldata:t==null?void 0:t.authKey,selectedRooms:l,submittedAt:new Date().toISOString()};j(w,{onSuccess:()=>{a(!0)},onError:v=>{console.error("Enquiry submission failed:",v),u.error("Failed to submit enquiry. Please try again.")}})};return e.jsxs(e.Fragment,{children:[x&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg p-8 max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Thank You!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your booking has been successfully submitted. We will contact you shortly."}),e.jsx("button",{onClick:()=>s("/"),className:"w-full bg-blue-600 text-white font-semibold py-3 rounded transition-all",style:{backgroundColor:"#058FA2"},children:"Continue to Home"})]})})}),e.jsxs("div",{id:"payment-method",className:"flex flex-col bg-white mt-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 rounded-full mr-3",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Payment Method"})]}),e.jsx("div",{className:"flex flex-col gap-4",children:(t==null?void 0:t.payAtHotel)==="yes"&&e.jsxs("label",{htmlFor:"pay-at-hotel",className:"flex items-center gap-4 p-4 rounded-lg cursor-pointer border-2 border-gray-200 hover:border-teal-200 hover:bg-gray-50 transition-all shadow-sm hover:shadow-lg",children:[e.jsx("input",{type:"radio",id:"pay-at-hotel",name:"payment-method",className:"w-5 h-5",onChange:()=>g("pay-at-hotel"),checked:o==="pay-at-hotel"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-800",children:"Pay at Hotel"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Reserve now and pay directly at the hotel upon check-in."})]})]})}),o&&e.jsx("div",{className:"w-full flex justify-end",children:e.jsx("button",{className:"mt-6 w-[200px] bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded transition-all",style:{backgroundColor:"#058FA2"},onClick:b,disabled:h,children:h?"Processing...":"Continue to Pay"})})]})]})},J=({days:t,showButton:c,isPaymentVisible:m})=>{const{selectedRooms:i,totalOtherCharges:l,finalPrice:o,baseFinalPrice:r,setNights:x}=_();y.useEffect(()=>{t&&(x(t),localStorage.setItem("days",t))},[t,x]);const a=r-o,s=a>0;return e.jsxs("div",{className:"p-6 bg-white sticky top-4 border border-gray-200 rounded-xl shadow-md w-full md:w-96 mx-auto font-sans",children:[e.jsx("div",{className:"flex items-center pb-4 justify-between",children:e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-800",children:"Reservation Summary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-gray-800 mb-3 flex items-center",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-3 mb-4",children:i==null?void 0:i.map((n,h)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 pb-2 border-b border-gray-100",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:n.roomName}),e.jsxs("p",{className:"text-xs text-gray-500",children:[n.option==="roomOnly"?"Room Only":"With Meals"," × ",t," ",t===1?"Night":"Nights"]})]}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",n.price*t]})]},h))}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 pb-2 border-b border-gray-200",children:[e.jsx("p",{children:"Other Charges"}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",l]})]})]}),e.jsxs("div",{className:"pt-3 bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Original Amount"}),e.jsxs("p",{className:"font-medium",children:["₹ ",r]})]}),s&&e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Discount"}),e.jsxs("p",{className:"font-medium text-green-600",children:["- ₹ ",a]})]}),e.jsxs("div",{className:"flex justify-between text-base font-bold pt-2 border-t border-gray-200",children:[e.jsx("p",{children:"Payable Amount"}),e.jsxs("p",{className:"text-primary-green",children:["₹ ",o]})]})]}),c&&e.jsx("a",{href:"#payment-method",className:"block w-full",children:e.jsx("button",{disabled:m,className:`mt-6 w-full py-3.5 font-bold text-white rounded-lg transition-all duration-300 ${m?"bg-gray-300 cursor-not-allowed":"bg-primary-green hover:bg-primary-dark-green"}`,children:"See Payment Options"})})]})};/*! js-cookie v3.0.5 | MIT */function W(t){for(var c=1;c<arguments.length;c++){var m=arguments[c];for(var i in m)t[i]=m[i]}return t}var ye={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function H(t,c){function m(l,o,r){if(!(typeof document>"u")){r=W({},c,r),typeof r.expires=="number"&&(r.expires=new Date(Date.now()+r.expires*864e5)),r.expires&&(r.expires=r.expires.toUTCString()),l=encodeURIComponent(l).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var x="";for(var a in r)r[a]&&(x+="; "+a,r[a]!==!0&&(x+="="+r[a].split(";")[0]));return document.cookie=l+"="+t.write(o,l)+x}}function i(l){if(!(typeof document>"u"||arguments.length&&!l)){for(var o=document.cookie?document.cookie.split("; "):[],r={},x=0;x<o.length;x++){var a=o[x].split("="),s=a.slice(1).join("=");try{var n=decodeURIComponent(a[0]);if(r[n]=t.read(s,n),l===n)break}catch{}}return l?r[l]:r}}return Object.create({set:m,get:i,remove:function(l,o){m(l,"",W({},o,{expires:-1}))},withAttributes:function(l){return H(this.converter,W({},this.attributes,l))},withConverter:function(l){return H(W({},this.converter,l),this.attributes)}},{attributes:{value:Object.freeze(c)},converter:{value:Object.freeze(t)}})}var M=H(ye,{path:"/"});const be=({hotelDetail:t,checkIn:c})=>{const[m,i]=y.useState(""),[l,o]=y.useState(null),[,r]=y.useState(null),[x,a]=y.useState(!1),s="#058FA2",{mutate:n,data:h}=re(),{mutateAsync:g}=ne(),{finalPrice:j,setFinalPrice:b,baseFinalPrice:p,phoneVerified:w,setPhoneVerified:v}=_(),[P,N]=y.useState(!1),[C,E]=y.useState(""),[B,G]=y.useState(""),[z,q]=y.useState(!1),{mutate:F}=Z(),{mutate:Q}=X();y.useEffect(()=>{t&&t._id&&n(t._id)},[n,t]),y.useEffect(()=>{M.get("phoneVerified")==="true"&&v(!0)},[]);const V=()=>{if(!C.trim()){u.error("Please enter a valid phone number");return}F(`+91${C}`,{onSuccess:d=>{d&&d.sessionId&&localStorage.setItem("otpSessionId",d.sessionId),N(!0),u.success("OTP sent to your phone")},onError:()=>{u.error("Error sending OTP")}})},f=()=>{if(!B.trim()){u.error("Please enter the OTP");return}let d=C.trim();d.startsWith("+91")||(d="+91"+d);const A=localStorage.getItem("otpSessionId");if(!A){u.error("Session expired. Please request a new OTP");return}Q({phone:d,code:B,sessionId:A},{onSuccess:L=>{L&&L.status==="OTP Matched"?(M.set("phoneVerified","true",{expires:30}),v(!0),N(!1),u.success("Phone number verified")):u.error("Invalid OTP")},onError:()=>{u.error("OTP verification failed")}})},O=async()=>{var d,A,L,T;if(m.trim())try{const S=await g({hotelId:t._id,rate:j,offerCode:m.trim(),checkInDate:c});r(S),S.discountedRate&&b(S.discountedRate),u.success("Discounted rate calculated successfully")}catch(S){u.error((A=(d=S==null?void 0:S.response)==null?void 0:d.data)!=null&&A.error?(T=(L=S==null?void 0:S.response)==null?void 0:L.data)==null?void 0:T.error:"Error calculating discounted rate")}},k=()=>{o(null),r(null),b(p)},I=async d=>{var A,L,T,S;o(d),a(!1);try{const R=await g({hotelId:t._id,rate:j,offerCode:d.offerCode,checkInDate:c});r(R),R.discountedRate&&b(R.discountedRate),a(!0)}catch(R){u.error((L=(A=R==null?void 0:R.response)==null?void 0:A.data)!=null&&L.error?(S=(T=R==null?void 0:R.response)==null?void 0:T.data)==null?void 0:S.error:"Error calculating discounted rate")}};return w?e.jsxs("div",{className:"flex flex-col bg-white w-full mx-auto font-sans",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-cyan-600 text-white mr-3",style:{backgroundColor:s},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Exclusive Offers"})]}),!l&&e.jsx("div",{className:"relative mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-3",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",id:"promo",placeholder:"Enter Offer Code Here",className:"w-full h-14 shadow-md border border-gray-300 rounded-lg py-2 pl-12 pr-4 text-lg focus:outline-none focus:ring-2 focus:border-cyan-300 transition-all",style:{"--tw-ring-color":s},value:m,onChange:d=>i(d.target.value)}),e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})})]}),e.jsx("button",{onClick:O,className:"h-14 px-6 md:w-40 rounded-lg text-white font-bold transition-all hover:shadow-lg flex items-center justify-center",style:{backgroundColor:s},children:"Apply Code"})]})}),!l&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-1 h-6 rounded-full mr-3",style:{backgroundColor:s}}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Available Offer Codes"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h&&h.map(d=>e.jsxs("div",{onClick:()=>I(d),className:"p-4 rounded-lg border-2 cursor-pointer transition-all border-gray-200 hover:bg-cyan-50 transform hover:-translate-y-1 hover:shadow-md",style:{"--tw-hover-border-opacity":1,"--tw-hover-border-color":s},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-lg text-gray-800",children:d.offerCode}),e.jsxs("span",{className:"text-sm font-semibold px-3 py-1 rounded-full text-white",style:{backgroundColor:s},children:[d.discountPercent,"%"]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("span",{className:"text-xs font-medium flex items-center",style:{color:s},children:["Click to apply",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-1",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5l7 7-7 7"})]})]})})]},d.offerCode))})]}),l&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-1 h-6 rounded-full mr-3",style:{backgroundColor:s}}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Applied Offer"})]}),e.jsxs("button",{onClick:k,className:"flex items-center text-sm px-4 py-2 bg-red-50 text-red-600 rounded-full hover:bg-red-100 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),"Remove & Change"]})]}),e.jsxs("div",{className:"relative overflow-hidden p-6 bg-cyan-50 border-2 rounded-lg shadow-sm",style:{borderColor:s},children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 transform translate-x-8 -translate-y-8",children:e.jsx("div",{className:"absolute transform rotate-45 text-white font-bold py-1 w-32 text-center text-xs",style:{backgroundColor:s},children:"APPLIED"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-2xl text-gray-800",children:l.offerCode}),e.jsx("div",{className:"text-gray-600 mt-2",children:l.description})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("span",{className:"text-lg font-semibold px-4 py-2 rounded-full text-white",style:{backgroundColor:s},children:[l.discountPercent,"%"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-cyan-200 flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",style:{color:s},children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),x&&e.jsx("p",{className:"font-medium",style:{color:s},children:"Offer successfully applied to your order!"})]})]})]})]}):e.jsxs("div",{className:"flex flex-col font-sans",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 rounded-full mr-3",style:{backgroundColor:s}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Exclusive Offers"})]}),e.jsxs("div",{className:"mb-6 p-6 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-cyan-100 p-2 rounded-full mr-3",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-xl text-gray-800",children:"Verify Your Phone Number"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Unlock special discounts exclusive to verified users"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 my-4",children:[e.jsxs("div",{className:"flex items-center flex-grow gap-2 bg-gray-50 p-3 rounded-lg",children:[e.jsx("div",{className:"h-10 w-10 bg-cyan-600 rounded-full flex items-center justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Exclusive Offers"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Up to 25% off on bookings"})]})]}),e.jsxs("div",{className:"flex items-center flex-grow gap-2 bg-gray-50 p-3 rounded-lg",children:[e.jsx("div",{className:"h-10 w-10 bg-cyan-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Secure Process"}),e.jsx("p",{className:"text-xs text-gray-500",children:"OTP verification for security"})]})]})]}),e.jsxs("button",{onClick:()=>N(!0),className:"w-full py-3 bg-blue-600 text-white font-semibold rounded-lg shadow-md hover:shadow-lg flex items-center justify-center gap-2 transition-all",style:{backgroundColor:s},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.94z"})}),"Verify Phone Number"]})]}),P&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-96 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Phone Verification"}),e.jsx("button",{onClick:()=>N(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),z?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0110 0v4"})]})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Enter Verification Code"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["We've sent a 6-digit code to +91 ",C]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",value:B,onChange:d=>G(d.target.value),placeholder:"Enter 6-digit OTP",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-lg tracking-widest focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"6"})}),e.jsx("button",{onClick:f,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Verify & Continue"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Didn't receive the code?"," ",e.jsx("button",{onClick:V,className:"text-cyan-600 font-medium hover:underline",children:"Resend"})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your phone number to receive a verification code"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("span",{className:"text-gray-500",children:"+91"})}),e.jsx("input",{type:"text",value:C,onChange:d=>E(d.target.value),placeholder:"Your phone number",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"10"})]}),e.jsx("button",{onClick:V,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Send Verification Code"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})]})})]})},je=({data:t})=>{const c=t==null?void 0:t.addToYourStay,[m,i]=y.useState({}),{selectedOtherCharges:l,setSelectedOtherCharges:o}=_(),r=s=>{i(n=>({...n,[s]:!n[s]}))},x=(s,n)=>{n.stopPropagation(),o(h=>(Array.isArray(h)?h.find(j=>j._id===s._id):null)?h.filter(j=>j._id!==s._id):[...h,s])},a=s=>l.some(n=>n._id===s);return e.jsxs("div",{className:"bg-white w-full mx-auto p-6",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"w-1 h-8 bg-primary-green rounded-full mr-4",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800 tracking-tight",children:"Add To Your Stay"})]}),e.jsx("div",{className:"space-y-6",children:c.map(s=>{var n,h;return e.jsxs("div",{className:`transition-all duration-200 border-2 rounded-lg overflow-hidden ${a(s._id)?"border-primary-green bg-teal-50":"border-gray-200 hover:border-teal-200 hover:bg-gray-50"}`,style:{borderColor:a(s._id)?"#058FA2":"",backgroundColor:a(s._id)?"#e6f7f9":""},children:[e.jsx("div",{className:"flex w-full items-center justify-between p-5 cursor-pointer",onClick:()=>r(s._id),children:e.jsxs("div",{className:"flex items-center gap-5 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-md border flex items-center justify-center cursor-pointer transition-colors ${a(s._id)?"bg-primary-green border-primary-green":"border-gray-300"}`,style:{backgroundColor:a(s._id)?"#058FA2":"",borderColor:a(s._id)?"#058FA2":""},onClick:g=>x(s,g),children:a(s._id)&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("div",{className:"flex gap-4 items-center flex-1",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 leading-tight",children:s.heading}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-lg font-medium mr-4 text-teal-600",style:{color:"#058FA2"},children:["₹ ",(n=s.rate)==null?void 0:n.amount," ",e.jsx("span",{className:"text-base",children:((h=s.rate)==null?void 0:h.period)||""})]}),e.jsx("button",{className:`w-7 h-7 flex items-center justify-center rounded-full transition-colors text-lg ${m[s._id]?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-500"}`,style:{backgroundColor:m[s._id]?"#e6f7f9":"",color:m[s._id]?"#058FA2":""},children:m[s._id]?"−":"+"})]})]})})})]})}),m[s._id]&&e.jsxs("div",{className:"px-16 pb-5 pt-1 text-gray-600 border-t border-gray-100",children:[e.jsx("p",{className:"text-base leading-relaxed",children:s.description}),a(s._id)&&e.jsx("div",{className:"mt-4 text-sm font-medium bg-teal-100 text-primay-green py-2 px-4 rounded-md inline-block",style:{backgroundColor:"#e6f7f9",color:"#058FA2"},children:"✓ Added to your stay"})]})]},s._id)})})]})},ee=y.forwardRef((t,c)=>{const{phoneVerified:m,setPhoneVerified:i}=_(),[l,o]=y.useState(""),[r,x]=y.useState(""),[a,s]=y.useState(""),[n,h]=y.useState(""),[g,j]=y.useState(""),[b,p]=y.useState(!1),w=localStorage.getItem("hotelInfo"),v=w?JSON.parse(w):null,P=M.get("userEmail");let N=M.get("userPhone");N&&(N=N.replace(/[^0-9]/g,"").replace(/^91/,""));const{data:C}=oe(P==null?void 0:P.toLowerCase(),N);y.useEffect(()=>{(C==null?void 0:C.length)>0&&console.log("User booking history:",C)},[C]);const E=y.useRef(null),{mutate:B}=Z(),{mutate:G}=X(),{mutate:z}=ge();y.useEffect(()=>{const f=M.get("phoneVerified"),O=M.get("userPhone"),k=localStorage.getItem("userInfo");if(f==="true"&&O){if(i(!0),h(O),k){const{firstName:I,lastName:d,email:A}=JSON.parse(k);o(I),x(d),s(A)}u.success("Welcome back! Your information is loaded.")}},[i]);const q=()=>l.trim()?r.trim()?a.trim()?n.trim()?!0:(u.error("Please enter your phone number"),!1):(u.error("Please enter your email address"),!1):(u.error("Please enter your last name"),!1):(u.error("Please enter your first name"),!1),F=()=>{q()&&B(`+91${n}`,{onSuccess:f=>{f&&f.sessionId&&localStorage.setItem("otpSessionId",f.sessionId),p(!0),u.success("OTP sent to your phone")},onError:()=>{u.error("Error sending OTP")}})},Q=()=>{if(!g.trim()){u.error("Please enter the OTP");return}let f=n.trim();f.startsWith("+91")||(f="+91"+f);const O=localStorage.getItem("otpSessionId");if(!O){u.error("Session expired. Please request a new OTP");return}G({phone:f,code:g,sessionId:O,firstName:l,lastName:r,email:a},{onSuccess:k=>{k&&(k.status==="OTP Matched"||k.valid===!0)?(i(!0),p(!1),j(""),M.set("phoneVerified","true",{expires:30}),M.set("userPhone",f,{expires:30}),M.set("userEmail",a,{expires:30}),localStorage.setItem("userInfo",JSON.stringify({firstName:l,lastName:r,email:a})),u.success("Phone number verified"),z({name:`${l} ${r}`,email:a,mobileNumber:f,hotelcode:(v==null?void 0:v.hotelCode)||"",authcode:(v==null?void 0:v.authKey)||"",roomDetails:[]})):u.error("Invalid OTP")},onError:k=>{var I,d;(d=(I=k==null?void 0:k.response)==null?void 0:I.data)!=null&&d.message?u.error(`OTP verification failed: ${k.response.data.message}`):u.error("OTP verification failed. Please try again.")}})},V=()=>{var f,O,k,I,d;return l.trim()?r.trim()?a.trim()?n.trim()?m?!0:(u.error("Please verify your phone number"),(d=E.current)==null||d.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your mobile number"),(I=E.current)==null||I.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your email address"),(k=E.current)==null||k.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your last name"),(O=E.current)==null||O.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your first name"),(f=E.current)==null||f.scrollIntoView({behavior:"smooth"}),!1)};return y.useImperativeHandle(c,()=>({validateForm:V,getGuestDetails:()=>({firstName:l,lastName:r,email:a,phoneNumber:n})})),e.jsxs("div",{ref:E,className:"flex flex-col gap-8 bg-white  rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("div",{className:"w-1.5 h-10 bg-primary-green rounded-full mr-4",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-4xl font-bold text-gray-900 tracking-tight",children:"Enter Your Details"})]}),e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[{id:"firstName",label:"First Name *",placeholder:"John",type:"text"},{id:"lastName",label:"Last Name *",placeholder:"Smith",type:"text"},{id:"email",label:"Email Address *",placeholder:"abc@example.com",type:"email"},{id:"mobile",label:"Mobile Number *",placeholder:"1234567896",type:"tel"}].map(({id:f,label:O,placeholder:k,type:I})=>e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("label",{htmlFor:f,className:"block text-base font-semibold text-gray-800 tracking-wide",children:O}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:I,id:f,placeholder:k,className:"w-full h-[54px] shadow-sm border border-gray-300 rounded-lg py-2.5 px-4 text-base text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-primary-green focus:border-transparent transition-all duration-200",value:f==="mobile"?n:f==="firstName"?l:f==="lastName"?r:f==="email"?a:void 0,onChange:d=>{f==="mobile"?h(d.target.value):f==="firstName"?o(d.target.value):f==="lastName"?x(d.target.value):f==="email"&&s(d.target.value)}}),f==="mobile"&&!m&&e.jsx("button",{type:"button",onClick:F,className:`ml-3 px-6 py-2 rounded-lg font-medium transition-all duration-200 ${l.trim()&&r.trim()&&a.trim()&&n.trim()?"bg-cyan-600 hover:bg-cyan-700 text-white":"bg-gray-400 cursor-not-allowed text-white"}`,disabled:!l.trim()||!r.trim()||!a.trim()||!n.trim(),children:"Verify"})]})]},f))}),b&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-96 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Enter Verification Code"}),e.jsx("button",{onClick:()=>p(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["We've sent a 6-digit code to +91 ",n]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",value:g,onChange:f=>j(f.target.value),placeholder:"Enter 6-digit OTP",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-lg tracking-widest focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"6"})}),e.jsx("button",{onClick:Q,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Verify & Continue"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Didn't receive the code?"," ",e.jsx("button",{onClick:F,className:"text-cyan-600 font-medium hover:underline",children:"Resend"})]})})]})}),m&&e.jsx("div",{className:"mt-4 py-3 px-4 bg-green-50 border border-green-200 rounded-lg",children:e.jsxs("p",{className:"text-green-700 font-medium flex items-center",children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Phone number verified successfully"]})})]})});ee.displayName="GuestDetailsForm";const ve=()=>{const{details:t,setDetails:c,selectedRooms:m,setSelectedRooms:i,setEditAddPricing:l}=_(),o=$(),r=(s,n)=>{i(h=>{var w,v,P,N,C;const g=[...h],j=((v=(w=t[s])==null?void 0:w.roomData)==null?void 0:v.discountRate)||0,b=((C=(N=(P=t[s])==null?void 0:P.continentalPlan)==null?void 0:N.rate)==null?void 0:C.amount)||0;let p=j;return n==="continental"&&(p+=b),g[s]={...g[s],option:n,price:p},g})},x=(s,n)=>{i(h=>{var w,v,P,N;const g=[...h],j=((v=(w=t[s])==null?void 0:w.roomData)==null?void 0:v.maxGuests)||2;let b=((P=g[s])==null?void 0:P.guestQty)??2,p=((N=g[s])==null?void 0:N.showMaxGuestAlert)??!1;return n==="increment"?b<j?(b+=1,p=!1):p=!0:n==="decrement"&&(b>0&&(b-=1),p=!1),g[s]={...g[s],guestQty:b,showMaxGuestAlert:p},b===0&&(g.splice(s,1),c(C=>C.filter((E,B)=>B!==s))),g})},a=()=>{var s;l(!0),localStorage.setItem("editAddPricing",!0),o(`/hotels/${(s=t[0])==null?void 0:s.hotelCode}`)};return e.jsxs(e.Fragment,{children:[t==null?void 0:t.map((s,n)=>{var g,j,b,p,w,v;const h=m[n]||{roomName:((g=s==null?void 0:s.roomData)==null?void 0:g.RoomName)||"",option:"roomOnly",price:((j=s==null?void 0:s.roomData)==null?void 0:j.discountRate)||0,guestQty:1,showMaxGuestAlert:!1};return h.guestQty===0?null:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:h-[200px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsxs("div",{className:"w-full lg:w-1/3 relative",children:[e.jsx("img",{src:(b=s==null?void 0:s.aboutUs)==null?void 0:b.img,alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 left-5 bg-white bg-opacity-75 px-3 py-1 rounded-l-full",children:e.jsx("p",{className:"text-[10px] font-bold text-yellow-600 uppercase tracking-wider",children:"Best Choice"})})]}),e.jsxs("div",{className:"flex flex-col justify-center w-full gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-[#288592] mb-1",children:(p=s==null?void 0:s.roomData)==null?void 0:p.RoomName}),e.jsxs("p",{className:"text-sm text-gray-500 mb-1",children:[s==null?void 0:s.name,", ",(w=s==null?void 0:s.cityLocation)==null?void 0:w.name]}),e.jsxs("p",{className:"text-md font-semibold text-gray-800",children:["Price: ",e.jsxs("span",{className:"text-[#288592]",children:["₹",h.price]})]})]}),e.jsxs("div",{className:"flex flex-col items-start w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>x(n,"decrement"),children:e.jsx(ce,{})}),e.jsx("span",{children:h.guestQty>1?`${h.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>x(n,"increment"),children:e.jsx(le,{})})]}),h.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-32 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(de,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(v=s==null?void 0:s.roomData)==null?void 0:v.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:a,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>i(P=>{const N=[...P];return N[n].showMaxGuestAlert=!1,N}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${n}`,value:"roomOnly",checked:h.option==="roomOnly",onChange:()=>r(n,"roomOnly"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${n}`,value:"continental",checked:h.option==="continental",onChange:()=>r(n,"continental"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]})]},n)}),t.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},we=()=>{var g,j,b;const{details:t,setDetails:c,selectedRooms:m,setSelectedRooms:i,setEditAddPricing:l}=_();console.log(t);const o=localStorage.getItem("hotelInfo"),r=JSON.parse(o),x=localStorage.getItem("checkInDate"),a=localStorage.getItem("checkOutDate");console.log(r);const s=$(),n=()=>x&&a?e.jsxs("div",{children:["(",ue(new Date(a),new Date(x))," ","Nights)"]}):0,h=()=>{var p;l(!0),localStorage.setItem("editAddPricing",!0),s(`/hotels/${(p=t[0])==null?void 0:p.hotelCode}`)};return e.jsxs("div",{className:"flex flex-col gap-4 py-6 border-b-2",children:[e.jsx("div",{className:"text-mobile/h3 text-gray-500 md:text-desktop/h3",children:r==null?void 0:r.name}),e.jsx("div",{className:"text-mobile/small/body font-medium md:font-medium text-gray-500 md:text-desktop/body/1",children:(g=r==null?void 0:r.location)==null?void 0:g.hotelAddress}),e.jsx("div",{className:"flex gap-4 flex-col",children:e.jsxs("div",{className:"flex flex-row items-center gap-4  md:gap-10 ",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-[14px] text-gray-500 md:text-xl",children:x?U(x,"dd MMM, EEEE"):"Check in"}),e.jsxs("p",{className:"text-[9px] md:text-sm  font-medium text-gray-500",children:["Check-in ",((j=t[0])==null?void 0:j.checkIn)||"1:00 PM"]})]}),e.jsx(me,{className:"text-yellow-500"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-semibold text-[14px] text-gray-500 md:text-xl",children:a?U(a,"dd MMM, EEEE"):"Check-out"}),e.jsxs("p",{className:"text-[9px] md:text-sm  font-medium text-gray-500",children:["Check-out ",((b=t[0])==null?void 0:b.checkOut)||"11:00 AM"]})]}),x&&a&&e.jsx("span",{className:"flex items-center text-gray-500 justify-center font-semibold text-[10px] md:text-base rounded-full md:border border-gray-300 px-3 py-2 md:py-1",children:n()})]})}),e.jsx("div",{className:" border-gray-200 flex items-center justify-between",children:e.jsx("button",{onClick:h,className:"py-1 text-lg font-medium underline text-primary-yellow rounded-full transition",children:"Change Date /Room Selection"})})]})},Ne=(t,c)=>{if(!t||!c)return 0;const m=new Date(t),i=new Date(c),l=Math.abs(i-m);return Math.ceil(l/(1e3*60*60*24))},Oe=()=>{const{ContactUsDetail:t}=ae(),{details:c,hotelData:m}=_(),i=c[0],l=$(),o=localStorage.getItem("hotelInfo"),r=JSON.parse(o),x=localStorage.getItem("checkInDate"),a=localStorage.getItem("checkOutDate"),s=Ne(x,a),[n,h]=y.useState(!1),[g,j]=y.useState(!0),b=y.useRef();return y.useEffect(()=>{const p=document.querySelector("#payment-method");if(p){const w=new IntersectionObserver(([v])=>{h(v.isIntersecting)},{threshold:.1});return w.observe(p),()=>w.disconnect()}},[]),y.useEffect(()=>{n?setTimeout(()=>j(!1),300):j(!0)},[n]),y.useEffect(()=>{(!c||c.length===0||!i)&&l(`/hotels/${r==null?void 0:r.hotelCode}`)},[c,m,i,l,r]),!c||c.length===0||!i?null:e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green",children:[e.jsxs(ie,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex items-center gap-2 py-4 md:py-10 text-mobile/h1 md:text-desktop/h2 text-white",children:[e.jsx("button",{onClick:()=>l(-1),"aria-label":"Go back",children:e.jsx(xe,{className:"text-white",style:{height:"35px",width:"35px"}})}),e.jsx("span",{children:"Booking Details"})]}),e.jsxs("div",{className:"md:flex gap-5 content  bg-white rounded-t-3xl",children:[e.jsxs("div",{className:"flex flex-col md:px-8 md:py-10 gap-8",children:[e.jsx(we,{}),e.jsx(ve,{}),e.jsx(ee,{ref:b}),i.addToYourStay.length>0&&e.jsx(je,{data:i}),e.jsx(be,{hotelDetail:i,checkIn:x}),e.jsx("div",{className:"lg:hidden",children:e.jsx(J,{hotelDetail:i,checkIn:x,checkOut:a,days:s,showButton:g,isPaymentVisible:n})}),e.jsx(pe,{hotelDetail:i,guestFormRef:b,checkIn:x,checkOut:a}),e.jsx(he,{ContactUsDetail:t})]}),e.jsx("div",{className:"hidden md:px-8 py-10  lg:block",children:e.jsx(J,{hotelDetail:i,checkIn:x,checkOut:a,days:s,showButton:g,isPaymentVisible:n})})]})]})};export{Oe as default};
