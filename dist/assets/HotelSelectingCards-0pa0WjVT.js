const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Calendar-tEf2aAcd.js","assets/index-Dkp8bbAB.js","assets/index-DAP2NcdM.css","assets/index-hJzA2ap8.js","assets/Icons-QLu82uUn.js","assets/useRoomsHook-C_dRs_ng.js","assets/useHotelHook2-CSOfL0T2.js","assets/urlHelper-C1y1jxtM.js","assets/format-Ck-D5MMj.js","assets/isSameMonth-Bbw7Qfju.js","assets/ArrowBackIosNew-CpRCUYE0.js","assets/createSvgIcon-BetL97M7.js","assets/clsx-B-dksMZM.js","assets/ArrowForwardIos-B0VbC9aT.js","assets/Close-kscXcp3-.js"])))=>i.map(i=>d[i]);
import{r,j as t,_ as E}from"./index-Dkp8bbAB.js";import{useGetHotels as O}from"./useHotelHook2-CSOfL0T2.js";import{u as R}from"./useRoomsHook-C_dRs_ng.js";import{r as H,m as k}from"./proxy-QxJFhRaf.js";import{c as L}from"./createSvgIcon-BetL97M7.js";import{C as M,a as T}from"./chevron-right-BXYTrykv.js";import{f as S}from"./format-Ck-D5MMj.js";import"./clsx-B-dksMZM.js";import"./createLucideIcon-D6DjG1EV.js";const _={some:0,all:1};function z(e,i,{root:l,margin:p,amount:d="some"}={}){const u=H(e),c=new WeakMap,x=m=>{m.forEach(s=>{const a=c.get(s.target);if(s.isIntersecting!==!!a)if(s.isIntersecting){const g=i(s);typeof g=="function"?c.set(s.target,g):o.unobserve(s.target)}else a&&(a(s),c.delete(s.target))})},o=new IntersectionObserver(x,{root:l,rootMargin:p,threshold:typeof d=="number"?d:_[d]});return u.forEach(m=>o.observe(m)),()=>o.disconnect()}function X(e,{root:i,margin:l,amount:p,once:d=!1}={}){const[u,c]=r.useState(!1);return r.useEffect(()=>{if(!e.current||d&&u)return;const x=()=>(c(!0),d?void 0:()=>c(!1)),o={root:i&&i.current||void 0,margin:l,amount:p};return z(e.current,x,o)},[i,e,l,d,p]),u}const A=L(t.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7m0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"})),V=r.lazy(()=>E(()=>import("./Calendar-tEf2aAcd.js").then(e=>e.a),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]))),$=e=>{if(!e)return"";const i=e.split(",").map(l=>l.trim());if(i.length>=3){const l=i[i.length-2],p=i[i.length-1].split("-")[0];return`${l}, ${p}`}else if(i.length===2)return i.join(", ");return e},W=()=>S(new Date,"yyyy-MM-dd"),B=()=>S(new Date(Date.now()+864e5),"yyyy-MM-dd"),F=({hotel:e,availabilityData:i,isLoadingAvailability:l,roomsLeft:p})=>{var h;const[d,u]=r.useState(0),[c,x]=r.useState(!1),o=((h=e==null?void 0:e.imageSections)==null?void 0:h.carouselImages)||(e==null?void 0:e.images)||[],m=r.useRef(null),s=r.useRef(!1),a=r.useRef(null),g=50,b=r.useCallback(()=>{u(n=>n===0?o.length-1:n-1)},[o.length]),v=r.useCallback(()=>{u(n=>n===o.length-1?0:n+1)},[o.length]),j=n=>{u(n)},w=n=>{n.pointerType==="mouse"&&n.button!==0||(m.current=n.clientX,a.current=n.clientX,s.current=!0,n.currentTarget.setPointerCapture(n.pointerId))},N=n=>{s.current&&(a.current=n.clientX)},f=n=>{var I;if(!s.current)return;s.current=!1;try{n.currentTarget.releasePointerCapture(n.pointerId)}catch(K){}const y=m.current,P=(I=a.current)!=null?I:n.clientX;if(y==null)return;const C=P-y;Math.abs(C)>=g&&(C<0?v():b()),m.current=null,a.current=null};return o.length===0?t.jsx("div",{className:"w-full h-96 bg-gray-300 rounded-xl flex items-center justify-center",children:"No images available"}):t.jsxs("div",{className:"w-full relative",children:[t.jsxs("div",{className:"relative w-full h-80 bg-gray-200 rounded-2xl overflow-hidden group touch-action-pan-y",onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),onPointerDown:w,onPointerMove:N,onPointerUp:f,children:[t.jsx("div",{className:"absolute inset-0 overflow-hidden",children:o.map((n,y)=>t.jsx("img",{src:n,alt:`Hotel image ${y+1}`,className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-700 ease-in-out ${y===d?"opacity-100":"opacity-0"}`,loading:"lazy",decoding:"async",draggable:!1},y))}),t.jsx("button",{onClick:b,onPointerDown:n=>n.stopPropagation(),className:`absolute left-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 p-2.5 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 ${c?"opacity-100":"opacity-0"}`,children:t.jsx(M,{size:24,strokeWidth:3})}),t.jsx("button",{onClick:v,onPointerDown:n=>n.stopPropagation(),className:`absolute right-4 top-1/2 -translate-y-1/2 z-20 bg-white/80 hover:bg-white text-gray-800 p-2.5 rounded-full shadow-lg transition-all duration-300 transform hover:scale-110 ${c?"opacity-100":"opacity-0"}`,children:t.jsx(T,{size:24,strokeWidth:3})})]}),t.jsx("div",{className:"bottom-2 absolute left-0 right-0 flex justify-center gap-2",children:o.map((n,y)=>t.jsx("button",{onClick:()=>j(y),className:`h-1 rounded-full transition-all duration-300 ${d===y?"bg-primary-green w-8":"bg-gray-300 w-6 hover:bg-gray-400"}`},y))})]})},D=r.memo(({hotel:e,close:i,roomsLeft:l})=>{var j,w,N;const p={hidden:{opacity:0,y:10},visible:{opacity:1,y:0,transition:{duration:.3,ease:"easeOut"}}},[d,u]=r.useState(!1),[,c]=r.useState(null),[,x]=r.useState(null);r.useEffect(()=>{const f=localStorage.getItem("checkInDate"),h=localStorage.getItem("checkOutDate");f&&h&&(c(f),x(h))},[]);const{data:o,isLoading:m}=R(e==null?void 0:e.hotelCode,e==null?void 0:e.authKey,W(),B(),{enabled:!!(e!=null&&e.hotelCode&&(e!=null&&e.authKey)),staleTime:1e3*60*5,gcTime:1e3*60*30,refetchOnWindowFocus:!1,cacheTime:1e3*60*10,retry:1}),s=((j=e==null?void 0:e.amenities)==null?void 0:j.slice(0,3))||[],a=(((w=e==null?void 0:e.amenities)==null?void 0:w.length)||0)-s.length,g=r.useCallback(()=>{localStorage.setItem("hotelInfo",JSON.stringify(e)),u(!0)},[e]),b=r.useCallback(()=>{u(!1),i()},[i]),v=f=>{if(!f&&f!==0)return null;const h=Number(f).toFixed(1);return t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("img",{src:"/images/tripadvisor-logo.svg",alt:"Tripadvisor rating",className:"h-4 md:h-5",loading:"lazy"}),t.jsx("span",{className:"text-primary-green text-base font-semibold",children:h})]})};return t.jsxs(k.div,{className:"bg-primary-white rounded-2xl shadow-lg overflow-hidden w-full h-full transition-transform duration-300 hover:scale-105 flex flex-col",variants:p,initial:"hidden",animate:"visible",children:[t.jsx(F,{hotel:e,availabilityData:o,isLoadingAvailability:m,roomsLeft:l}),t.jsxs("div",{className:"p-4 flex flex-col flex-grow justify-between",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex justify-between items-center gap-4",children:[t.jsx("h1",{className:"text-xl  text-start font-bold text-black cursor-pointer hover:text-primary-green   transition-colors duration-300",onClick:g,children:e==null?void 0:e.name}),v(e.rating)]}),t.jsxs("div",{className:"flex items-center mt-1 text-gray-600 text-sm font-semibold",children:[t.jsx(A,{className:"text-primary-green mr-1",style:{fontSize:"16px"}}),t.jsx("span",{children:$((N=e==null?void 0:e.location)==null?void 0:N.hotelAddress)})]}),t.jsxs("ul",{className:"flex items-center mt-2 flex-wrap",children:[s.length>0?s.map((f,h)=>{const n=typeof f=="object"?f.value:f;return t.jsx("li",{className:"bg-gradient-to-r from-primary-green to-primary-green text-primary-white text-xs px-3 py-1 rounded-full m-1",children:t.jsx("span",{children:n})},h)}):t.jsx("li",{children:"No amenities listed"}),a>0&&t.jsxs("li",{className:"text-gray-600 text-xs m-1",children:["+",a," more"]})]})]}),t.jsxs("div",{className:"mt-4 w-full",children:[t.jsxs("div",{className:"text-start",children:[t.jsxs("span",{className:"text-2xl leading-none font-bold text-primary-green",children:["â‚¹ ",e==null?void 0:e.price,t.jsx("span",{className:"text-gray-400 text-sm font-medium",children:" / night onwards"}),t.jsx("br",{}),t.jsx("span",{className:"text-gray-400 text-sm font-medium",children:"Incl. taxes"})]}),t.jsx("p",{className:"text-primary-green text-[12px] font-semibold",children:"Lowest Price, Guaranteed!"})]}),t.jsx("button",{onClick:g,className:"bg-primary-green cursor-pointer w-full text-primary-white px-4 py-2 rounded-lg shadow-md flex justify-center items-center transition duration-300 hover:bg-primary-dark-green mt-4",children:"Select Hotel"})]})]}),d&&t.jsx("div",{className:"fixed inset-0 flex justify-center items-center z-50",children:t.jsx(r.Suspense,{fallback:t.jsx("div",{className:"bg-white p-8 rounded-lg animate-pulse",children:t.jsx("div",{className:"h-64 w-96 bg-gray-200 rounded"})}),children:t.jsx(V,{setCheckInDate:c,setCheckOutDate:x,setOpenCalender:b,hotelCode:e.hotelCode})})})]})});D.displayName="HotelCard";const G=r.memo(({data:e,close:i})=>{var m;const l=r.useRef(null),p=X(l,{once:!0,amount:.1}),{data:d,isLoading:u}=O(),c=e||d,x=((m=c==null?void 0:c.hotels)==null?void 0:m.filter(s=>s==null?void 0:s.active))||[],o=r.useMemo(()=>{const s=Array.from({length:10},(a,g)=>g+1);for(let a=s.length-1;a>0;a--){const g=Math.floor(Math.random()*(a+1));[s[a],s[g]]=[s[g],s[a]]}return s},[]);return u?t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 p-6",children:[...Array(6)].map((s,a)=>t.jsxs("div",{className:"animate-pulse",children:[t.jsx("div",{className:"bg-gray-200 h-48 rounded-2xl mb-4"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),t.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},a))}):t.jsx(k.div,{ref:l,className:"grid grid-cols-1 items-stretch bg-primary-white sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-3 gap-6 p-6",initial:{opacity:0},animate:p?{opacity:1}:{opacity:0},transition:{duration:.4,ease:"easeOut"},children:x.map((s,a)=>t.jsx(D,{hotel:s,close:i,roomsLeft:o[a%o.length]},s._id||s.hotelCode))})});G.displayName="HotelSelectingCards";export{G as default};
