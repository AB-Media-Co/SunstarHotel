var _e=Object.defineProperty,Ve=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var se=Object.getOwnPropertySymbols;var Se=Object.prototype.hasOwnProperty,ke=Object.prototype.propertyIsEnumerable;var Ie=(t,r,a)=>r in t?_e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,I=(t,r)=>{for(var a in r||(r={}))Se.call(r,a)&&Ie(t,a,r[a]);if(se)for(var a of se(r))ke.call(r,a)&&Ie(t,a,r[a]);return t},T=(t,r)=>Ve(t,Ke(r));var oe=(t,r)=>{var a={};for(var s in t)Se.call(t,s)&&r.indexOf(s)<0&&(a[s]=t[s]);if(t!=null&&se)for(var s of se(t))r.indexOf(s)<0&&ke.call(t,s)&&(a[s]=t[s]);return a};var Te=(t,r,a)=>new Promise((s,m)=>{var u=n=>{try{d(a.next(n))}catch(C){m(C)}},l=n=>{try{d(a.throw(n))}catch(C){m(C)}},d=n=>n.done?s(n.value):Promise.resolve(n.value).then(u,l);d((a=a.apply(t,r)).next())});import{j as e,r as c,n as ie,a as Xe}from"./index-Kj3knSog.js";import{uploadImagesAPIV2 as Qe,useGetHotels as Ye}from"./useHotelHook2-CoeoE2sM.js";import{u as Je,a as Ze}from"./useRoomsHook-CF3aVIKu.js";import{c as F,g as Le,a as Be,s as N,b as L,m as J,u as Fe,d as $e,l as et,e as tt}from"./createSvgIcon-C5wF46kr.js";import{H as rt}from"./Hotel-CmtfpiVv.js";import{L as at}from"./Loader-BhlYnuRi.js";import{k as ne,c as fe,a as Y,u as st}from"./useFormControl-CTHIuVRe.js";import{s as z}from"./useThemeProps-B8fkWxLm.js";import{u as ot,B as i,T as x,a as A,b as nt,P as E,F as ze,I as He,S as qe,c as M}from"./TextField-7KJqB9OX.js";import{C as Ee,a as it,G as g}from"./Grid-BkS2nylW.js";import{S as lt}from"./Switch-CzRBhzRy.js";import{C as Ne}from"./CardMedia-1Oepdhpq.js";import{C as ct,D as dt,a as ut,b as pt,c as mt}from"./DialogTitle-D29dIHtl.js";import{C as xt}from"./Close-Drb1QvfI.js";import{G as ht}from"./Group-w5jMbLq5.js";import{C as Ue,P as bt,a as gt}from"./Checkbox-BL-fzT-t.js";import{M as ft}from"./MultipleImageUpload-DK0VJ4tu.js";import{I as vt}from"./ImageUpload-GDMRwb_D.js";import{u as jt}from"./useUpdatePagesHook-DSINXOom.js";import{u as yt,T as Ct,a as le}from"./index-sbaUctZw.js";import{S as Rt,a as It,A as St,b as kt,c as ce,d as de}from"./Stepper-CXJvs-od.js";import{I as We,F as Tt}from"./FormControlLabel-0GoN7TSJ.js";import{c as Ge}from"./clsx-B-dksMZM.js";import{M as me}from"./MenuItem-Drli-kKm.js";import{A as Pt}from"./Autocomplete-6o0xt6Mm.js";import{C as At}from"./Chip-BIgRexBP.js";import{C as Dt}from"./Container-DnVsbCxw.js";import"./hoist-non-react-statics.cjs-Cxfv-rx9.js";import"./index-DxHt9AM2.js";import"./SwitchBase-LlrphCMH.js";import"./Popper-B_TbhypX.js";const Pe=F(e.jsx("path",{d:"M21 10.78V8c0-1.65-1.35-3-3-3h-4c-.77 0-1.47.3-2 .78-.53-.48-1.23-.78-2-.78H6C4.35 5 3 6.35 3 8v2.78c-.61.55-1 1.34-1 2.22v6h2v-2h16v2h2v-6c0-.88-.39-1.67-1-2.22M14 7h4c.55 0 1 .45 1 1v2h-6V8c0-.55.45-1 1-1M5 8c0-.55.45-1 1-1h4c.55 0 1 .45 1 1v2H5z"})),wt=F(e.jsx("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),Mt=F(e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM8 9h8v10H8zm7.5-5-1-1h-5l-1 1H5v2h14V4z"})),Lt=F(e.jsx("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"})),Bt=F([e.jsx("path",{fillRule:"evenodd",d:"M16.67 13.13C18.04 14.06 19 15.32 19 17v3h4v-3c0-2.18-3.57-3.47-6.33-3.87"},"0"),e.jsx("circle",{cx:"9",cy:"8",r:"4",fillRule:"evenodd"},"1"),e.jsx("path",{fillRule:"evenodd",d:"M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4c-.47 0-.91.1-1.33.24C14.5 5.27 15 6.58 15 8s-.5 2.73-1.33 3.76c.42.14.86.24 1.33.24m-6 1c-2.67 0-8 1.34-8 4v3h16v-3c0-2.66-5.33-4-8-4"},"2")]),Ft=F(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m-8 6H8v1h3c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1v1H8v-1H6v-2h4v-1H7c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h1V7h2v1h2zm4 6.25-2-2h4zM14 10l2-2 2 2z"})),$t=F(e.jsx("path",{d:"M2 17h20v2H2zm11.84-9.21c.1-.24.16-.51.16-.79 0-1.1-.9-2-2-2s-2 .9-2 2c0 .28.06.55.16.79C6.25 8.6 3.27 11.93 3 16h18c-.27-4.07-3.25-7.4-7.16-8.21"})),Oe=F(e.jsx("path",{d:"m17.66 17.66-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06L9.7 9.7l-1.06 1.06-.71-.71 1.06-1.06-1.94-1.94-1.06 1.06-.71-.71 1.06-1.06L4 4v14c0 1.1.9 2 2 2h14zM7 17v-5.76L12.76 17z"}));function zt(t){return Le("MuiLinearProgress",t)}Be("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","bar1","bar2","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const xe=4,he=ne`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`,Ht=typeof he!="string"?fe`
        animation: ${he} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
      `:null,be=ne`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`,qt=typeof be!="string"?fe`
        animation: ${be} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
      `:null,ge=ne`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`,Et=typeof ge!="string"?fe`
        animation: ${ge} 3s infinite linear;
      `:null,Nt=t=>{const{classes:r,variant:a,color:s}=t,m={root:["root",`color${L(s)}`,a],dashed:["dashed",`dashedColor${L(s)}`],bar1:["bar","bar1",`barColor${L(s)}`,(a==="indeterminate"||a==="query")&&"bar1Indeterminate",a==="determinate"&&"bar1Determinate",a==="buffer"&&"bar1Buffer"],bar2:["bar","bar2",a!=="buffer"&&`barColor${L(s)}`,a==="buffer"&&`color${L(s)}`,(a==="indeterminate"||a==="query")&&"bar2Indeterminate",a==="buffer"&&"bar2Buffer"]};return $e(m,zt,r)},ve=(t,r)=>t.vars?t.vars.palette.LinearProgress[`${r}Bg`]:t.palette.mode==="light"?et(t.palette[r].main,.62):tt(t.palette[r].main,.5),Ut=N("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:a}=t;return[r.root,r[`color${L(a.color)}`],r[a.variant]]}})(J(({theme:t})=>({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},variants:[...Object.entries(t.palette).filter(Y()).map(([r])=>({props:{color:r},style:{backgroundColor:ve(t,r)}})),{props:({ownerState:r})=>r.color==="inherit"&&r.variant!=="buffer",style:{"&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}}},{props:{variant:"buffer"},style:{backgroundColor:"transparent"}},{props:{variant:"query"},style:{transform:"rotate(180deg)"}}]}))),Wt=N("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,r)=>{const{ownerState:a}=t;return[r.dashed,r[`dashedColor${L(a.color)}`]]}})(J(({theme:t})=>({position:"absolute",marginTop:0,height:"100%",width:"100%",backgroundSize:"10px 10px",backgroundPosition:"0 -23px",variants:[{props:{color:"inherit"},style:{opacity:.3,backgroundImage:"radial-gradient(currentColor 0%, currentColor 16%, transparent 42%)"}},...Object.entries(t.palette).filter(Y()).map(([r])=>{const a=ve(t,r);return{props:{color:r},style:{backgroundImage:`radial-gradient(${a} 0%, ${a} 16%, transparent 42%)`}}})]})),Et||{animation:`${ge} 3s infinite linear`}),Gt=N("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,r)=>{const{ownerState:a}=t;return[r.bar,r.bar1,r[`barColor${L(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&r.bar1Indeterminate,a.variant==="determinate"&&r.bar1Determinate,a.variant==="buffer"&&r.bar1Buffer]}})(J(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[{props:{color:"inherit"},style:{backgroundColor:"currentColor"}},...Object.entries(t.palette).filter(Y()).map(([r])=>({props:{color:r},style:{backgroundColor:(t.vars||t).palette[r].main}})),{props:{variant:"determinate"},style:{transition:`transform .${xe}s linear`}},{props:{variant:"buffer"},style:{zIndex:1,transition:`transform .${xe}s linear`}},{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:{width:"auto"}},{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:Ht||{animation:`${he} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite`}}]}))),Ot=N("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,r)=>{const{ownerState:a}=t;return[r.bar,r.bar2,r[`barColor${L(a.color)}`],(a.variant==="indeterminate"||a.variant==="query")&&r.bar2Indeterminate,a.variant==="buffer"&&r.bar2Buffer]}})(J(({theme:t})=>({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",variants:[...Object.entries(t.palette).filter(Y()).map(([r])=>({props:{color:r},style:{"--LinearProgressBar2-barColor":(t.vars||t).palette[r].main}})),{props:({ownerState:r})=>r.variant!=="buffer"&&r.color!=="inherit",style:{backgroundColor:"var(--LinearProgressBar2-barColor, currentColor)"}},{props:({ownerState:r})=>r.variant!=="buffer"&&r.color==="inherit",style:{backgroundColor:"currentColor"}},{props:{color:"inherit"},style:{opacity:.3}},...Object.entries(t.palette).filter(Y()).map(([r])=>({props:{color:r,variant:"buffer"},style:{backgroundColor:ve(t,r),transition:`transform .${xe}s linear`}})),{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:{width:"auto"}},{props:({ownerState:r})=>r.variant==="indeterminate"||r.variant==="query",style:qt||{animation:`${be} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite`}}]}))),_t=c.forwardRef(function(r,a){const s=Fe({props:r,name:"MuiLinearProgress"}),o=s,{className:m,color:u="primary",value:l,valueBuffer:d,variant:n="indeterminate"}=o,C=oe(o,["className","color","value","valueBuffer","variant"]),f=T(I({},s),{color:u,variant:n}),j=Nt(f),S=ot(),h={},v={bar1:{},bar2:{}};if((n==="determinate"||n==="buffer")&&l!==void 0){h["aria-valuenow"]=Math.round(l),h["aria-valuemin"]=0,h["aria-valuemax"]=100;let k=l-100;S&&(k=-k),v.bar1.transform=`translateX(${k}%)`}if(n==="buffer"&&d!==void 0){let k=(d||0)-100;S&&(k=-k),v.bar2.transform=`translateX(${k}%)`}return e.jsxs(Ut,T(I(T(I({className:Ge(j.root,m),ownerState:f,role:"progressbar"},h),{ref:a}),C),{children:[n==="buffer"?e.jsx(Wt,{className:j.dashed,ownerState:f}):null,e.jsx(Gt,{className:j.bar1,ownerState:f,style:v.bar1}),n==="determinate"?null:e.jsx(Ot,{className:j.bar2,ownerState:f,style:v.bar2})]}))});function Vt(t){return Le("MuiStepContent",t)}Be("MuiStepContent",["root","last","transition"]);const Kt=t=>{const{classes:r,last:a}=t;return $e({root:["root",a&&"last"],transition:["transition"]},Vt,r)},Xt=N("div",{name:"MuiStepContent",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:a}=t;return[r.root,a.last&&r.last]}})(J(({theme:t})=>({marginLeft:12,paddingLeft:20,paddingRight:8,borderLeft:t.vars?`1px solid ${t.vars.palette.StepContent.border}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[600]}`,variants:[{props:{last:!0},style:{borderLeft:"none"}}]}))),Qt=N(Ue,{name:"MuiStepContent",slot:"Transition",overridesResolver:(t,r)=>r.transition})({}),ue=c.forwardRef(function(r,a){const s=Fe({props:r,name:"MuiStepContent"}),$=s,{children:m,className:u,TransitionComponent:l=Ue,transitionDuration:d="auto",TransitionProps:n,slots:C={},slotProps:f={}}=$,j=oe($,["children","className","TransitionComponent","transitionDuration","TransitionProps","slots","slotProps"]);c.useContext(Rt);const{active:S,last:h,expanded:v}=c.useContext(It),o=T(I({},s),{last:h}),k=Kt(o);let R=d;d==="auto"&&!l.muiSupportAuto&&(R=void 0);const U={slots:C,slotProps:I({transition:n},f)},[D,B]=st("transition",{elementType:Qt,externalForwardedProps:U,ownerState:o,className:k.transition,additionalProps:{in:S||v,timeout:R,unmountOnExit:!0}});return e.jsx(Xt,T(I({className:Ge(k.root,u),ref:a,ownerState:o},j),{children:e.jsx(D,T(I({as:l},B),{children:m}))}))}),Yt=ne`
  from { opacity: 0; }
  to { opacity: 1; }
`,Jt=z(i)(({theme:t})=>({position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"linear-gradient(rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.9))",backdropFilter:"blur(5px)",color:"white",zIndex:9999,animation:`${Yt} 0.3s ease-in-out`})),Zt=({room:t,onEdit:r,onToggleShow:a})=>{var j,S;const[s,m]=c.useState(t.show),[u,l]=c.useState(!1),[d,n]=c.useState(5);c.useEffect(()=>{let h;return u&&(h=setInterval(()=>{n(v=>v<=1?(l(!1),clearInterval(h),5):v-1)},1e3)),()=>clearInterval(h)},[u]);const C=()=>{m(!s),l(!0),n(5),a(t._id,!s)},f=(h,v=15)=>{if(!h)return"";const o=h.split(" ");return o.length<=v?h:o.slice(0,v).join(" ")+"..."};return e.jsxs(Ee,{sx:{width:320,margin:2,display:"flex",flexDirection:"column",borderRadius:3,boxShadow:4,overflow:"hidden",transition:"transform 0.3s ease","&:hover":{transform:"scale(1.02)"}},children:[e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",p:1},children:[e.jsx(x,{variant:"body2",children:"Show Room:"}),e.jsx(lt,{checked:s,onChange:C})]}),u&&e.jsxs(Jt,{children:[e.jsx(at,{fullScreen:!1,size:"sm"}),e.jsx(x,{variant:"h6",sx:{mb:1},children:s?"Showing Room":"Hiding Room"}),e.jsxs(x,{variant:"body1",children:["Please wait ",d," seconds..."]})]}),e.jsx(i,{sx:{height:180,backgroundColor:"grey.200"},children:(j=t.RoomImage)!=null&&j[0]?e.jsx(Ne,{component:"img",image:t.RoomImage[0],alt:t.RoomName,sx:{height:"100%",objectFit:"cover"}}):e.jsx(i,{sx:{height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"grey.300"},children:e.jsx(x,{variant:"caption",children:"No Image Available"})})}),e.jsxs(it,{sx:{flexGrow:1,p:2},children:[e.jsx(x,{variant:"h6",fontWeight:600,children:t.RoomName||"Unnamed Room"}),e.jsx(x,{variant:"body2",color:"text.secondary",children:f(t.RoomDescription)}),e.jsxs(i,{sx:{mt:2,display:"grid",gap:1},children:[t.maxGuests&&e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Bt,{sx:{fontSize:18,mr:.5}}),e.jsxs(x,{variant:"body2",children:["Max Guests: ",t.maxGuests]})]}),t.squareFeet&&e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Oe,{sx:{fontSize:18,mr:.5}}),e.jsxs(x,{variant:"body2",children:["Area: ",t.squareFeet," sq.ft"]})]}),t.Availability!==void 0&&e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(rt,{sx:{fontSize:18,mr:.5}}),e.jsxs(x,{variant:"body2",children:["Available Rooms: ",t.Availability]})]}),((S=t.services)==null?void 0:S.length)>0&&e.jsxs(i,{sx:{display:"flex",alignItems:"center"},children:[e.jsx($t,{sx:{fontSize:18,mr:.5}}),e.jsxs(x,{variant:"body2",children:["Services: ",t.services.join(", ")]})]})]})]}),e.jsxs(ct,{sx:{justifyContent:"space-between",px:2,pb:2},children:[e.jsxs(i,{children:[t.defaultRate&&e.jsxs(x,{variant:"body2",color:"text.secondary",sx:{textDecoration:"line-through"},children:["₹ ",t.defaultRate]}),e.jsxs(x,{variant:"subtitle1",color:"success.main",fontWeight:600,children:["₹ ",t.discountRate]})]}),e.jsx(A,{variant:"outlined",onClick:()=>r(t),children:"Edit"})]})]})},er=({room:t,onEdit:r,onToggleShow:a})=>e.jsx(i,{sx:{display:"flex",flexWrap:"wrap",justifyContent:"center"},children:e.jsx(Zt,{room:t,onEdit:r,onToggleShow:a},t._id)});function pe(t){const u=t,{children:r,value:a,index:s}=u,m=oe(u,["children","value","index"]);return e.jsx("div",T(I({role:"tabpanel",hidden:a!==s,id:`tabpanel-${s}`,"aria-labelledby":`tab-${s}`},m),{children:a===s&&e.jsx(i,{sx:{pt:2},children:r})}))}const tr=(t,r)=>{const[a,s]=c.useState([]);c.useEffect(()=>{if(t&&r){const u=t.filter(l=>r.some(d=>d.value===l.value));s(u)}},[t,r]);const m=c.useCallback((u,l)=>{const d=l==null?void 0:l.map(n=>typeof n=="string"?{value:n,label:n}:n);s(d)},[]);return{selectedAmenities:a,handleAmenitiesChange:m,setSelectedAmenities:s}},Ae=({formData:t,isEdit:r,handleInputChange:a,handleCheckboxChange:s,amenities:m,selectedAmenities:u,handleAmenitiesChange:l})=>{const C={PaperProps:{style:{maxHeight:224,overflowY:"auto"}}};return e.jsxs(i,{component:"form",noValidate:!0,autoComplete:"off",children:[e.jsxs(E,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Basic Information"}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,sm:6,children:e.jsxs(ze,{fullWidth:!0,children:[e.jsx(He,{id:"room-type-label",children:"Room Type"}),e.jsxs(qe,{labelId:"room-type-label",id:"RoomTypeID",name:"RoomTypeID",value:t.RoomTypeID||"",label:"Room Type",MenuProps:C,disabled:!0,sx:{bgcolor:"background.paper"},children:[e.jsx(me,{value:"",children:e.jsx("em",{children:"Select Room Type"})}),e.jsx(me,{value:t.RoomTypeID,children:t==null?void 0:t.RoomTypeID})]})]})}),e.jsx(g,{item:!0,xs:12,sm:6,children:e.jsx(M,{fullWidth:!0,label:"Room Name",name:"RoomName",value:t.RoomName,onChange:a,sx:{bgcolor:"background.paper"},placeholder:"Enter distinctive room name",required:!0,disabled:!0})})]})]}),e.jsxs(E,{elevation:1,sx:{p:3,mb:4,borderRadius:3,bgcolor:"background.paper",border:"1px solid",borderColor:"divider"},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:600,mb:2},children:"Room Details"}),e.jsxs(i,{display:"flex",flexDirection:"column",gap:3,children:[e.jsx(M,{fullWidth:!0,multiline:!0,rows:4,label:"Room Description",name:"RoomDescription",value:t.RoomDescription,onChange:a,sx:{bgcolor:"background.default"},placeholder:"Describe the unique features and benefits of this room"}),e.jsx(M,{fullWidth:!0,type:"number",label:"Max Guests",name:"maxGuests",value:t.maxGuests,onChange:a,placeholder:"e.g., 2 guests",InputProps:{startAdornment:e.jsx(i,{sx:{mr:1,display:"flex",alignItems:"center"},children:e.jsx(ht,{color:"primary"})})},sx:{bgcolor:"background.default"}}),e.jsx(M,{fullWidth:!0,type:"number",label:"Room Size (sq ft)",name:"squareFeet",value:t.squareFeet,onChange:a,placeholder:"e.g., 450 sq ft",InputProps:{startAdornment:e.jsx(i,{sx:{mr:1,display:"flex",alignItems:"center"},children:e.jsx(Oe,{color:"primary"})})},sx:{bgcolor:"background.default"}})]})]}),e.jsxs(E,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Amenities"}),e.jsx(g,{container:!0,spacing:2,children:e.jsx(g,{item:!0,xs:12,children:e.jsx(Pt,{multiple:!0,freeSolo:!0,options:m||[],value:u,onChange:l,getOptionLabel:f=>f.label||"",renderInput:f=>e.jsx(M,T(I({},f),{label:"Amenities",placeholder:"Select amenities",sx:{bgcolor:"background.paper"}})),renderTags:(f,j)=>f.map((S,h)=>e.jsx(At,T(I({variant:"outlined",label:S.label},j({index:h})),{color:"primary",size:"small",sx:{borderRadius:1}})))})})})]}),e.jsxs(E,{elevation:0,sx:{p:2,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Pricing"}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,sm:6,children:e.jsx(M,{fullWidth:!0,label:"Default Rate",name:"defaultRate",type:"number",value:t.defaultRate,onChange:a,sx:{bgcolor:"background.paper"},InputProps:{startAdornment:e.jsx(Ft,{color:"action",sx:{mr:1}})},placeholder:"Base price per night",required:!0})}),e.jsx(g,{item:!0,xs:12,sm:6,children:e.jsx(M,{fullWidth:!0,label:"Discount Rate",name:"discountRate",type:"number",value:t.discountRate,disabled:!0,sx:{bgcolor:"background.paper",opacity:.8},InputProps:{startAdornment:e.jsx(bt,{color:"action",sx:{mr:1}})},helperText:"Managed by pricing system"})}),e.jsx(g,{item:!0,xs:12,children:e.jsx(Tt,{control:e.jsx(gt,{checked:t.available!=="no",onChange:s,color:"primary"}),label:"Room is available for booking"})})]})]})]})},De=({images:t,onUploadSuccess:r,onRemoveImageUrl:a,isUploading:s})=>e.jsx(i,{children:e.jsxs(E,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"Room Images"}),e.jsx(x,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Upload high-quality images that showcase your room. We recommend at least 3 images from different angles."}),s&&e.jsx(i,{sx:{width:"100%",mb:2},children:e.jsx(_t,{})}),e.jsx(ft,{imagesUrls:t,onUploadSuccess:r,onRemoveImageUrl:a,isUploading:s}),t.length>0&&e.jsxs(i,{sx:{mt:3},children:[e.jsxs(x,{variant:"subtitle2",gutterBottom:!0,children:["Current Images (",t.length,")"]}),e.jsx(g,{container:!0,spacing:2,children:t.map((m,u)=>e.jsx(g,{item:!0,xs:6,sm:4,md:3,children:e.jsxs(Ee,{sx:{position:"relative"},children:[e.jsx(Ne,{component:"img",height:"120",image:m,alt:`Room image ${u+1}`,sx:{objectFit:"cover"}}),e.jsx(We,{size:"small",sx:{position:"absolute",top:5,right:5,bgcolor:"rgba(255, 255, 255, 0.8)","&:hover":{bgcolor:"rgba(255, 255, 255, 0.95)"}},onClick:()=>a(m),children:e.jsx(Mt,{fontSize:"small"})})]})},u))})]})]})}),we=({aboutRoom:t,handleAboutChange:r})=>e.jsx(i,{component:"form",noValidate:!0,autoComplete:"off",children:e.jsxs(E,{elevation:0,sx:{p:2,mb:3,bgcolor:"rgba(0, 0, 0, 0.02)",borderRadius:2},children:[e.jsx(x,{variant:"h6",gutterBottom:!0,sx:{color:"primary.main",fontWeight:500},children:"About This Room"}),e.jsx(x,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Provide detailed information about what makes this room special. This will be displayed prominently on booking pages."}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,children:e.jsx(M,{fullWidth:!0,label:"About Room Description",name:"aboutDescription",value:t.description,onChange:a=>r("description",a.target.value),multiline:!0,rows:4,sx:{bgcolor:"background.paper"},placeholder:"Describe unique features, views, or experiences guests can expect"})}),e.jsxs(g,{item:!0,xs:12,children:[e.jsx(x,{variant:"subtitle2",gutterBottom:!0,children:"Featured Image"}),e.jsx(i,{sx:{p:2,border:"1px dashed",borderColor:"divider",borderRadius:1},children:e.jsx(vt,{feature:t,handleFeatureChange:r,setImageUpload:()=>{},index:0})})]})]})]})}),rr=({room:t,roomTypes:r,roomSaving:a,onClose:s,onSave:m,isEdit:u})=>{var V,K;const[l,d]=c.useState(0),[n,C]=c.useState(t.RoomImage||[]),[f,j]=c.useState(!1),{amenities:S}=jt(),h=nt(),v=yt(h.breakpoints.down("sm")),[o,k]=c.useState({HotelCode:t.HotelCode||"",RoomTypeID:t.RoomTypeID&&t.RateTypeID?`${t.RoomTypeID}`:"",RateTypeID:t.RateTypeID||"",RoomName:t.RoomName||"",RoomDescription:t.RoomDescription||"",defaultRate:t.defaultRate||"",discountRate:t.discountRate||"",maxGuests:t.maxGuests||"",squareFeet:t.squareFeet||"",services:t.services?t.services.join(", "):"",available:t.available!=="no",source:t.source||"PMS"}),[R,U]=c.useState({description:((V=t.AboutRoom)==null?void 0:V.description)||"",image:((K=t.AboutRoom)==null?void 0:K.img)||""}),{selectedAmenities:D,handleAmenitiesChange:B}=tr(S,t.Amenities),$=c.useCallback((y,b)=>{d(b)},[]),Z=c.useCallback(y=>{const{name:b,value:P}=y.target;k(w=>T(I({},w),{[b]:P}))},[]),ee=c.useCallback(y=>{k(b=>T(I({},b),{available:y.target.checked}))},[]),te=c.useCallback((y,b)=>{U(P=>T(I({},P),{[y]:b}))},[]),W=c.useCallback(()=>{var P,w,X;const y=(X=(w=(P=o.services)==null?void 0:P.split(","))==null?void 0:w.map(H=>H.trim()))==null?void 0:X.filter(H=>H.length>0),b=T(I(I({},t),o),{RoomImage:n,Amenities:D,maxGuests:o.maxGuests?parseInt(o.maxGuests):void 0,squareFeet:o.squareFeet?parseInt(o.squareFeet):void 0,services:y,defaultRate:o.defaultRate?parseFloat(o.defaultRate):void 0,discountRate:o.discountRate?parseFloat(o.discountRate):void 0,AboutRoom:{description:R.description,img:R.image}});m(b)},[t,o,n,D,R,m]),G=c.useCallback(y=>Te(void 0,null,function*(){if(y.length===0){ie.error("No images selected");return}j(!0);try{const b=yield Qe(y),P=Array.isArray(b)?b:[b];C(w=>[...w,...P[0].imageUrls]),ie.success("Images uploaded successfully!")}catch(b){console.error("Error uploading images:",b),ie.error("Error uploading images")}finally{j(!1)}}),[]),O=c.useCallback(y=>{C(b=>b.filter(P=>P!==y))},[]),_=()=>["RoomName","RoomDescription","defaultRate"].every(b=>o[b]),re=()=>e.jsx(e.Fragment,{children:e.jsx(i,{sx:{mb:2},children:e.jsxs(kt,{activeStep:l,orientation:"vertical",children:[e.jsxs(ce,{children:[e.jsx(de,{children:"Room Info"}),e.jsxs(ue,{children:[e.jsx(Ae,{formData:o,handleInputChange:Z,handleCheckboxChange:ee,roomTypes:r,amenities:S,selectedAmenities:D,handleAmenitiesChange:B,isEdit:u}),e.jsxs(i,{sx:{mt:2},children:[e.jsx(A,{variant:"contained",onClick:()=>d(1),sx:{mr:1},children:"Continue"}),e.jsx(A,{onClick:s,variant:"text",children:"Cancel"})]})]})]}),e.jsxs(ce,{children:[e.jsx(de,{children:"Upload Images"}),e.jsxs(ue,{children:[e.jsx(De,{images:n,onUploadSuccess:G,onRemoveImageUrl:O,isUploading:f}),e.jsxs(i,{sx:{mt:2},children:[e.jsx(A,{variant:"contained",onClick:()=>d(2),sx:{mr:1},children:"Continue"}),e.jsx(A,{onClick:()=>d(0),variant:"text",children:"Back"})]})]})]}),e.jsxs(ce,{children:[e.jsx(de,{children:"About Room"}),e.jsxs(ue,{children:[e.jsx(we,{aboutRoom:R,handleAboutChange:te}),e.jsxs(i,{sx:{mt:2},children:[e.jsx(A,{variant:"contained",onClick:W,disabled:a||!_(),sx:{mr:1},children:a?"Saving...":"Save Room"}),e.jsx(A,{onClick:()=>d(1),variant:"text",children:"Back"})]})]})]})]})})}),ae=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Ct,{value:l,onChange:$,variant:"fullWidth",sx:{mb:2,"& .MuiTab-root":{borderBottom:1,borderColor:"divider"},"& .Mui-selected":{fontWeight:"bold"}},children:[e.jsx(le,{label:"Room Info",icon:e.jsx(Pe,{}),iconPosition:"start"}),e.jsx(le,{label:"Upload Images",icon:e.jsx(Lt,{}),iconPosition:"start"}),e.jsx(le,{label:"About Room",icon:e.jsx(wt,{}),iconPosition:"start"})]}),e.jsx(pe,{value:l,index:0,children:e.jsx(Ae,{formData:o,handleInputChange:Z,handleCheckboxChange:ee,roomTypes:r,amenities:S,selectedAmenities:D,handleAmenitiesChange:B,isEdit:u})}),e.jsx(pe,{value:l,index:1,children:e.jsx(De,{images:n,onUploadSuccess:G,onRemoveImageUrl:O,isUploading:f})}),e.jsx(pe,{value:l,index:2,children:e.jsx(we,{aboutRoom:R,handleAboutChange:te})})]});return e.jsxs(dt,{open:!0,onClose:s,fullWidth:!0,maxWidth:"md",PaperProps:{sx:{borderRadius:2,overflow:"hidden"}},fullScreen:v,children:[e.jsx(ut,{sx:{m:0,p:3,bgcolor:"primary.main",color:"primary.contrastText"},children:e.jsxs(i,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(i,{display:"flex",alignItems:"center",children:[e.jsx(St,{sx:{bgcolor:"background.paper",color:"primary.main",mr:2},children:e.jsx(Pe,{})}),e.jsx(x,{variant:"h5",fontWeight:"medium",children:t._id?"Edit Room":"Add Room"})]}),e.jsx(We,{onClick:s,"aria-label":"close",sx:{color:"primary.contrastText"},children:e.jsx(xt,{})})]})}),e.jsx(pt,{dividers:!0,sx:{p:v?2:3,bgcolor:"background.default"},children:v?re():ae()}),!v&&e.jsx(mt,{sx:{px:3,py:2,bgcolor:"background.paper"},children:e.jsxs(i,{sx:{display:"flex",justifyContent:"space-between",width:"100%"},children:[e.jsxs(i,{children:[e.jsx(A,{onClick:()=>d(Math.max(0,l-1)),disabled:l===0,sx:{ml:1},children:"Previous"}),e.jsx(A,{variant:"contained",color:"primary",onClick:()=>d(Math.min(2,l+1)),disabled:l===2,sx:{ml:1},children:"Next"})]}),e.jsxs(i,{children:[e.jsx(A,{onClick:s,variant:"outlined",color:"secondary",children:"Cancel"}),e.jsx(A,{onClick:W,variant:"contained",color:"primary",disabled:a||!_(),sx:{ml:2},children:a?"Saving...":"Save Room"})]})]})})]})},ar=z(Dt)(({theme:t})=>({paddingTop:t.spacing(12),paddingBottom:t.spacing(4),backgroundColor:"#fff",borderRadius:t.shape.borderRadius})),sr=z(i)(({theme:t})=>({marginBottom:t.spacing(4),padding:t.spacing(2),backgroundColor:"#fff",borderRadius:t.shape.borderRadius})),or=z(ze)(({theme:t})=>({width:"100%",marginBottom:t.spacing(2)})),Me=z(M)(({theme:t})=>({width:"100%",marginBottom:t.spacing(2)})),nr=z(g)(({theme:t})=>({marginTop:t.spacing(2)})),qr=()=>{var W,G,O,_,re,ae,V,K,y,b,P,w,X,H,je,ye,Ce;const[t,r]=c.useState(""),[a,s]=c.useState(""),[m,u]=c.useState(!1),l=Xe(),{data:d}=Ye(),n=(W=d==null?void 0:d.hotels)==null?void 0:W.filter(p=>p.hotelCode);c.useEffect(()=>{if(!t&&n&&n.length>0){const p=n[0];r(String(p.hotelCode)),s(p.authKey)}},[n,t]);const C=(O=(G=new Date)==null?void 0:G.toISOString())==null?void 0:O.split("T")[0],f=(re=(_=new Date(Date.now()+864e5))==null?void 0:_.toISOString())==null?void 0:re.split("T")[0],[j,S]=c.useState(C),[h,v]=c.useState(f),{data:o,isLoading:k}=Je(t,a,j,h),R=(Array!=null&&Array.isArray(o==null?void 0:o.rooms),o==null?void 0:o.rooms);console.log("roomArray",R);const U=(K=(V=(ae=o==null?void 0:o.rateApiData)==null?void 0:ae.RES_Response)==null?void 0:V.RoomInfo)!=null&&K.Source?Array!=null&&Array.isArray((P=(b=(y=o==null?void 0:o.rateApiData)==null?void 0:y.RES_Response)==null?void 0:b.RoomInfo)==null?void 0:P.Source)?(H=(X=(w=o==null?void 0:o.rateApiData)==null?void 0:w.RES_Response)==null?void 0:X.RoomInfo)==null?void 0:H.Source:[(Ce=(ye=(je=o==null?void 0:o.rateApiData)==null?void 0:je.RES_Response)==null?void 0:ye.RoomInfo)==null?void 0:Ce.Source]:[],[D,B]=c.useState(null),$=Ze(t,a,j,h),Z=p=>{u(!0),p._id&&$.mutate(p,{onSuccess:()=>{B(null),u(!1)},onError:q=>{console.error("Error updating room:",q),u(!1)}})},ee=(p,q)=>{const Q=Array.isArray(R)&&R.length>0?R.find(Re=>Re&&Re._id===p):null;Q&&(Q.show=q,$.mutate(Q))},te=z(x)(({theme:p})=>({fontSize:"1.25rem",fontWeight:600}));return e.jsxs(ar,{maxWidth:"lg",children:[e.jsxs(sr,{elevation:2,children:[e.jsx(te,{variant:"h6",children:"Room Configuration"}),e.jsxs("div",{className:"flex w-full justify-between",children:[e.jsxs(g,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(g,{item:!0,xs:12,md:4,children:e.jsxs(or,{children:[e.jsx(He,{id:"hotel-select-label",children:"Select Hotel"}),e.jsx(qe,{labelId:"hotel-select-label",value:t,label:"Select Hotel",onChange:p=>{r(p.target.value);const q=n.find(Q=>String(Q.hotelCode)===p.target.value);q&&s(q.authKey)},children:n==null?void 0:n.map(p=>e.jsx(me,{value:String(p.hotelCode),children:p.name},p._id))})]})}),e.jsx(g,{item:!0,xs:6,md:4,children:e.jsx(Me,{label:"From Date",type:"date",value:j,onChange:p=>S(p.target.value),InputLabelProps:{shrink:!0}})}),e.jsx(g,{item:!0,xs:6,md:4,children:e.jsx(Me,{label:"To Date",type:"date",value:h,onChange:p=>v(p.target.value),InputLabelProps:{shrink:!0}})})]}),e.jsx(g,{item:!0,xs:12,md:4,children:e.jsx(A,{variant:"contained",color:"primary",fullWidth:!0,onClick:()=>l("/admin/day-use-room"),children:"Switch to Day Use Room"})})]})]}),e.jsx(i,{children:k?e.jsx("div",{className:"flex justify-center items-center mx-auto",children:e.jsx("img",{src:"/images/Logo/spinner.svg",alt:""})}):e.jsx(nr,{container:!0,spacing:1,children:R==null?void 0:R.map(p=>e.jsx(g,{item:!0,xs:12,sm:6,md:4,children:e.jsx(er,{room:p,onToggleShow:ee,onEdit:()=>B(p)})},p._id))})}),D&&e.jsx(rr,{room:D,roomTypes:U,onClose:()=>B(null),onSave:Z,isEdit:!!D._id,roomSaving:m})]})};export{qr as Rooms,qr as default};
