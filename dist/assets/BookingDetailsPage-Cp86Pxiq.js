import{j as e,q as X,n as Z,_ as u,b as L,r as f,a as z,s as D,t as ee,v as Q,w as H,p as se,e as te}from"./index-CfYmzgbV.js";import{R as re}from"./Remove-q_I1ycTk.js";import{H as ne}from"./Helmet-H3kwhpjt.js";import"./index-SYb98uRd.js";const le=({ContactUsDetail:r})=>e.jsxs("div",{className:"flex flex-col gap-10 md:flex-row justify-between md:items-center text-gray-600 px-4",children:[e.jsxs("div",{className:"flex flex-col font-semibold md:gap-4",children:[e.jsx("p",{className:"md:text-2xl",children:"Facing an Issue? Call us for assistance."}),e.jsx("a",{href:`tel:${r==null?void 0:r.phoneNumber}`,className:"md:text-xl underline hover:text-gray-800",children:r==null?void 0:r.phoneNumber})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("a",{href:"#",className:"md:text-lg font-semibold underline hover:text-gray-800",children:"Cancellation Policy"}),e.jsx("a",{href:"#",className:"md:text-lg font-semibold underline hover:text-gray-800",children:"Terms & Conditions"})]})]}),oe=(r,m,h,o,c)=>X({mutationFn:async l=>{const s={Room_Details:c.reduce((n,t,i)=>(n[`Room_${i+1}`]={Rateplan_Id:t.rateplanId||"",Ratetype_Id:t.RateTypeID||"",Roomtype_Id:t.RoomTypeID||"",baserate:t.price?t.price.toString():"0",extradultrate:t.extraAdultRate?t.extraAdultRate.toString():"0",extrachildrate:t.extraChildRate?t.extraChildRate.toString():"0",number_adults:t.guestQty?t.guestQty.toString():"1",number_children:t.childrenQty?t.childrenQty.toString():"0",ExtraChild_Age:t.childrenQty>0?t.childAge||"0":"",Title:l.title||"",First_Name:l.firstName||"",Last_Name:l.lastName||"",Gender:l.gender||"",SpecialRequest:l.specialRequest||""},n),{}),check_in_date:h,check_out_date:o,Booking_Payment_Mode:l.paymentMethod||"",Email_Address:l.email||"",MobileNo:l.phoneNumber||"",Address:l.address||"",Country:l.country||"",City:l.city||"",Zipcode:l.zipcode||""};return(await Z.post("/api/booking",{roomData:s,hotelDetail:{hotelCode:r,authKey:m}})).data},onSuccess:l=>{if(l&&l.ReservationNo)return u.success(`Booking successful! Reservation #${l.ReservationNo}`),l;throw u.error("Booking failed: "+(l.message||"Unknown error")),new Error(l.message||"Unknown error")},onError:l=>{var s,a;throw console.error("Booking error:",l),u.error("Error making booking: "+(((a=(s=l==null?void 0:l.response)==null?void 0:s.data)==null?void 0:a.message)||l.message)),l}}),ae=({hotelDetail:r,guestFormRef:m,checkIn:h,checkOut:o})=>{const{selectedRooms:c}=L(),[l,s]=f.useState(""),{mutate:a,isLoading:n}=oe(r==null?void 0:r.hotelCode,r==null?void 0:r.authKey,h,o,c),t=d=>{s(d)},i=async()=>{if(m.current&&!m.current.validateForm()){u.error("Please fill all required guest information");return}const d=m.current.getGuestDetails();if(!d.firstName||!d.lastName||!d.email){u.error("Please provide name and email information");return}d.paymentMethod=l;try{const x=await a(d);x!=null&&x.ReservationNo&&u.success(`Booking confirmed! Reservation #${x.ReservationNo}`)}catch(x){console.error("Booking failed:",x)}};return e.jsxs("div",{id:"payment-method",className:"flex flex-col bg-white mt-6",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 bg-teal-500 rounded-full mr-3",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Payment Method"})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[(r==null?void 0:r.payAtHotel)==="yes"&&e.jsxs("label",{htmlFor:"pay-at-hotel",className:"flex items-center gap-4 p-4 rounded-lg cursor-pointer hover:shadow-lg border-2 border-gray-200 hover:border-teal-200 hover:bg-gray-50",children:[e.jsx("input",{type:"radio",id:"pay-at-hotel",name:"payment-method",className:"w-5 h-5",onChange:()=>t("pay-at-hotel"),checked:l==="pay-at-hotel"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"Pay at Hotel"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Reserve now and pay directly at the hotel upon check-in."})]})]}),e.jsxs("label",{htmlFor:"upi-payment",className:"flex items-center gap-4 p-4 rounded-lg cursor-pointer hover:shadow-lg border-2 border-gray-200 hover:border-teal-200 hover:bg-gray-50",children:[e.jsx("input",{type:"radio",id:"upi-payment",name:"payment-method",className:"w-5 h-5",onChange:()=>t("upi"),checked:l==="upi"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:"UPI"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Pay securely using UPI (Google Pay, PhonePe, etc.)."})]})]})]}),l&&e.jsx("div",{className:"w-full flex justify-end",children:e.jsx("button",{className:"mt-6 w-[200px] bg-teal-500 hover:bg-teal-600 text-white font-semibold py-3 rounded",style:{backgroundColor:"#058FA2",color:"#ffffff"},onClick:i,disabled:n,children:n?"Processing...":"Continue to Pay"})})]})},G=r=>r?new Date(r).toLocaleDateString("en-GB",{weekday:"short",day:"numeric",month:"short",year:"numeric"}):"",W=({hotelDetail:r,checkIn:m,checkOut:h,days:o,showButton:c,isPaymentVisible:l})=>{const s=z(),{setEditAddPricing:a,selectedRooms:n,totalOtherCharges:t,finalPrice:i,baseFinalPrice:d,setNights:x}=L();console.log(n),f.useEffect(()=>{o&&(x(o),localStorage.setItem("days",o))},[o,x]);const g=()=>{a(!0),localStorage.setItem("editAddPricing",!0),s(`/hotels/${r==null?void 0:r.hotelCode}`)};return e.jsxs("div",{className:"p-4 bg-primary-white sticky top-4 border-2 rounded-lg w-full md:w-[24rem] mx-auto",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Reservation Summary"}),e.jsxs("div",{className:"flex flex-col gap-4 border-2 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Check-In"}),e.jsx("p",{className:"md:text-lg font-semibold text-teal-600",children:G(m)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["From ",(r==null?void 0:r.checkIn)||"10:00 AM"]})]}),e.jsx("hr",{className:"w-[2px] bg-gray-400 h-16"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Check-Out"}),e.jsx("p",{className:"md:text-lg font-semibold text-teal-600",children:G(h)}),e.jsxs("p",{className:"text-sm text-gray-500",children:["By ",(r==null?void 0:r.checkOut)||"2:00 PM"]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-sm text-gray-700 flex items-center",children:["Total Length Of Stay:",e.jsxs("span",{className:"ml-2 font-semibold text-gray-800",children:[o," Days"]})]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2",children:e.jsx("div",{onClick:g,className:"text-sm cursor-pointer text-orange-600 underline",children:"Change Your Selection"})})]})]}),e.jsxs("div",{className:"pt-4",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Your Price Summary"}),n&&n.length>0&&n.map((b,v)=>e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsxs("p",{children:[b.roomName," (",b.option==="roomOnly"?"Room Only":"Continental Plan",") X ",o," Night"]}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",b.price*o]})]},v))]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Other Charges"}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",t]})]}),e.jsxs("div",{className:"border-t mt-2 pt-2",children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-700",children:[e.jsx("p",{children:"Original Amount"}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",d]})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-700 mt-1",children:[e.jsx("p",{children:"Discount"}),e.jsxs("p",{className:"font-medium text-gray-800",children:["₹ ",d-i]})]}),e.jsxs("div",{className:"flex justify-between text-base font-semibold mt-1",children:[e.jsx("p",{children:"Payable Amount"}),e.jsxs("p",{className:"text-primary-green",children:["₹ ",i]})]})]}),e.jsx("a",{href:"#payment-method",className:"hidden lg:block",children:c&&e.jsx("button",{className:`mt-6 w-full bg-primary-dark-green text-primary-white font-semibold py-3 rounded transition-opacity duration-300 ${l?"opacity-0":"opacity-100"}`,children:"See Payment Options"})})]})};/*! js-cookie v3.0.5 | MIT */function F(r){for(var m=1;m<arguments.length;m++){var h=arguments[m];for(var o in h)r[o]=h[o]}return r}var ie={read:function(r){return r[0]==='"'&&(r=r.slice(1,-1)),r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(r){return encodeURIComponent(r).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function B(r,m){function h(c,l,s){if(!(typeof document>"u")){s=F({},m,s),typeof s.expires=="number"&&(s.expires=new Date(Date.now()+s.expires*864e5)),s.expires&&(s.expires=s.expires.toUTCString()),c=encodeURIComponent(c).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var n in s)s[n]&&(a+="; "+n,s[n]!==!0&&(a+="="+s[n].split(";")[0]));return document.cookie=c+"="+r.write(l,c)+a}}function o(c){if(!(typeof document>"u"||arguments.length&&!c)){for(var l=document.cookie?document.cookie.split("; "):[],s={},a=0;a<l.length;a++){var n=l[a].split("="),t=n.slice(1).join("=");try{var i=decodeURIComponent(n[0]);if(s[i]=r.read(t,i),c===i)break}catch{}}return c?s[c]:s}}return Object.create({set:h,get:o,remove:function(c,l){h(c,"",F({},l,{expires:-1}))},withAttributes:function(c){return B(this.converter,F({},this.attributes,c))},withConverter:function(c){return B(F({},this.converter,c),this.attributes)}},{attributes:{value:Object.freeze(m)},converter:{value:Object.freeze(r)}})}var $=B(ie,{path:"/"});const ce=({hotelDetail:r})=>{const[m,h]=f.useState(""),[o,c]=f.useState(null),[,l]=f.useState(null),[s,a]=f.useState(!1),n="#058FA2",{mutate:t,data:i}=D(),{mutateAsync:d}=ee(),{finalPrice:x,setFinalPrice:g,baseFinalPrice:b,phoneVerified:v,setPhoneVerified:j}=L(),[k,_]=f.useState(!1),[C,V]=f.useState(""),[E,p]=f.useState(""),[w,O]=f.useState(!1),{mutate:S}=Q(),{mutate:A}=H();f.useEffect(()=>{r&&r._id&&t(r._id)},[t,r]),f.useEffect(()=>{$.get("phoneVerified")==="true"&&j(!0)},[]);const T=()=>{if(!C.trim()){u.error("Please enter a valid phone number");return}S(`+91${C}`,{onSuccess:y=>{O(!0),u.success("OTP sent to your phone")},onError:y=>{u.error("Error sending OTP")}})},U=()=>{if(!E.trim()){u.error("Please enter the OTP");return}let y=C.trim();y.startsWith("+91")||(y="+91"+y),A({phone:y,code:E},{onSuccess:R=>{R&&R.status==="approved"?($.set("phoneVerified","true",{expires:7}),j(!0),_(!1),u.success("Phone number verified")):u.error("Invalid OTP")},onError:R=>{u.error("OTP verification failed")}})},q=async()=>{var y,R,M,I;if(m.trim())try{const N=await d({hotelId:r._id,rate:x,offerCode:m.trim()});l(N),N.discountedRate&&g(N.discountedRate),u.success("Discounted rate calculated successfully")}catch(N){u.error((R=(y=N==null?void 0:N.response)==null?void 0:y.data)!=null&&R.error?(I=(M=N==null?void 0:N.response)==null?void 0:M.data)==null?void 0:I.error:"Error calculating discounted rate")}},J=()=>{c(null),l(null),g(b)},K=async y=>{var R,M,I,N;c(y),a(!1);try{const P=await d({hotelId:r._id,rate:x,offerCode:y.offerCode});l(P),P.discountedRate&&g(P.discountedRate),a(!0)}catch(P){u.error((M=(R=P==null?void 0:P.response)==null?void 0:R.data)!=null&&M.error?(N=(I=P==null?void 0:P.response)==null?void 0:I.data)==null?void 0:N.error:"Error calculating discounted rate")}};return v?e.jsxs("div",{className:"flex flex-col bg-white w-full mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-8",children:[e.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-cyan-600 text-white mr-3",style:{backgroundColor:n},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg  ",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Exclusive Offers"})]}),!o&&e.jsx("div",{className:"relative mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4 md:gap-3",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("input",{type:"text",id:"promo",placeholder:"Enter Offer Code Here",className:"w-full h-14 shadow-md border border-gray-300 rounded-lg py-2 pl-12 pr-4 text-lg focus:outline-none focus:ring-2 focus:border-cyan-300 transition-all",style:{"--tw-ring-color":n},value:m,onChange:y=>h(y.target.value)}),e.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg  ",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"}),e.jsx("polyline",{points:"3.27 6.96 12 12.01 20.73 6.96"}),e.jsx("line",{x1:"12",y1:"22.08",x2:"12",y2:"12"})]})})]}),e.jsx("button",{onClick:q,className:"h-14 px-6 md:w-40 rounded-lg text-white font-bold transition-all hover:shadow-lg flex items-center justify-center",style:{backgroundColor:n},children:"Apply Code"})]})}),!o&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"w-1 h-6 rounded-full mr-3",style:{backgroundColor:n}}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Available Offer Codes"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i&&i.map(y=>e.jsxs("div",{onClick:()=>K(y),className:"p-4 rounded-lg border-2 cursor-pointer transition-all border-gray-200 hover:bg-cyan-50 transform hover:-translate-y-1 hover:shadow-md",style:{"--tw-hover-border-opacity":1,"--tw-hover-border-color":n},children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-bold text-lg text-gray-800",children:y.offerCode}),e.jsxs("span",{className:"text-sm font-semibold px-3 py-1 rounded-full text-white",style:{backgroundColor:n},children:[y.discountPercent," %"]})]}),e.jsx("div",{className:"mt-3 flex justify-end",children:e.jsxs("span",{className:"text-xs font-medium flex items-center",style:{color:n},children:["Click to apply",e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg  ",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"ml-1",children:[e.jsx("path",{d:"M5 12h14"}),e.jsx("path",{d:"M12 5l7 7-7 7"})]})]})})]},y.offerCode))})]}),o&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-1 h-6 rounded-full mr-3",style:{backgroundColor:n}}),e.jsx("h3",{className:"text-lg font-semibold text-gray-700",children:"Applied Offer"})]}),e.jsxs("button",{onClick:J,className:"flex items-center text-sm px-4 py-2 bg-red-50 text-red-600 rounded-full hover:bg-red-100 transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg  ",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-1",children:e.jsx("path",{d:"M18 6L6 18M6 6l12 12"})}),"Remove & Change"]})]}),e.jsxs("div",{className:"relative overflow-hidden p-6 bg-cyan-50 border-2 rounded-lg shadow-sm",style:{borderColor:n},children:[e.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 transform translate-x-8 -translate-y-8",children:e.jsx("div",{className:"absolute transform rotate-45 text-white font-bold py-1 right-0 top-0 w-32 text-center text-xs",style:{backgroundColor:n},children:"APPLIED"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-2xl text-gray-800",children:o.offerCode}),e.jsx("div",{className:"text-gray-600 mt-2",children:o.description})]}),e.jsx("div",{className:"mt-4 sm:mt-0",children:e.jsxs("span",{className:"text-lg font-semibold px-4 py-2 rounded-full text-white",style:{backgroundColor:n},children:[o.discountPercent," %"]})})]}),e.jsxs("div",{className:"mt-6 pt-4 border-t border-cyan-200 flex items-center",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg  ",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"mr-2",style:{color:n},children:[e.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),e.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),s&&e.jsx("p",{className:"font-medium",style:{color:n},children:"Offer successfully applied to your order!"})]})]})]})]}):e.jsxs("div",{className:"flex flex-col min-h-auto ",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 bg-primary-green rounded-full mr-3",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Exclusive Offers"})]}),e.jsxs("div",{className:"mb-6 p-4 bg-white rounded-lg shadow-sm border ",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("div",{className:"bg-cyan-100 p-2 rounded-full mr-3",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"#058FA2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg text-gray-800",children:"Verify Your Phone Number"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Unlock special discounts exclusive to verified users"})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-4 my-4",children:[e.jsxs("div",{className:"flex items-center flex-grow gap-2 bg-gray-50 p-2 rounded-lg",children:[e.jsx("div",{className:"h-10 w-10 bg-cyan-600 rounded-full flex items-center justify-center",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}),e.jsx("line",{x1:"7",y1:"7",x2:"7.01",y2:"7"})]})}),e.jsxs("div",{className:"ml-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Exclusive Offers"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Up to 25% off on bookings"})]})]}),e.jsxs("div",{className:"flex items-center flex-grow gap-2 bg-gray-50 p-2 rounded-lg",children:[e.jsx("div",{className:"h-10 w-10 bg-cyan-600 rounded-full flex items-center justify-center",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsxs("div",{className:"ml-2",children:[e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Secure Process"}),e.jsx("p",{className:"text-xs text-gray-500",children:"OTP verification for security"})]})]})]}),e.jsxs("button",{onClick:()=>_(!0),className:"w-full py-3 bg-primary-dark-green text-white font-semibold rounded-lg shadow-md hover:shadow-lg flex items-center justify-center gap-2",style:{backgroundColor:"#058FA2"},children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M15.05 5A5 5 0 0 1 19 8.95M15.05 1A9 9 0 0 1 23 8.94m-1 7.98v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.94z"})}),"Verify Phone Number"]})]}),k&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-96 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Phone Verification"}),e.jsx("button",{onClick:()=>_(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),w?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#058FA2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),e.jsx("path",{d:"M7 11V7a5 5 0 0110 0v4"})]})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Enter Verification Code"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["We've sent a 6-digit code to +91 ",C]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",value:E,onChange:y=>p(y.target.value),placeholder:"Enter 6-digit OTP",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-lg tracking-widest focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"6"})}),e.jsx("button",{onClick:U,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Verify & Continue"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Didn't receive the code?"," ",e.jsx("button",{onClick:T,className:"text-cyan-600 font-medium hover:underline",children:"Resend"})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",stroke:"#058FA2",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 01-2.18 2 19.79 19.79 0 01-8.63-3.07 19.5 19.5 0 01-6-6 19.79 19.79 0 01-3.07-8.67A2 2 0 014.11 2h3a2 2 0 012 1.72 12.84 12.84 0 00.7 2.81 2 2 0 01-.45 2.11L8.09 9.91a16 16 0 006 6l1.27-1.27a2 2 0 012.11-.45 12.84 12.84 0 002.81.7A2 2 0 0122 16.92z"})})}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Enter your phone number to receive a verification code"})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none",children:e.jsx("span",{className:"text-gray-500",children:"+91"})}),e.jsx("input",{type:"text",value:C,onChange:y=>V(y.target.value),placeholder:"Your phone number",className:"w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"10"})]}),e.jsx("button",{onClick:T,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Send Verification Code"}),e.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By continuing, you agree to our Terms of Service and Privacy Policy"})]})]})})]})},de=({data:r})=>{const m=r==null?void 0:r.addToYourStay,[h,o]=f.useState({}),{selectedOtherCharges:c,setSelectedOtherCharges:l}=L(),s=t=>{o(i=>({...i,[t]:!i[t]}))},a=(t,i)=>{i.stopPropagation(),l(d=>d.find(g=>g._id===t._id)?d.filter(g=>g._id!==t._id):[...d,t])},n=t=>c.some(i=>i._id===t);return e.jsxs("div",{className:"bg-white w-full mx-auto",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 bg-primary-green rounded-full mr-3",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Add To Your Stay"})]}),e.jsx("div",{className:"space-y-4",children:m.map(t=>{var i,d;return e.jsxs("div",{className:`transition-all duration-200 border-2 rounded-lg overflow-hidden ${n(t._id)?"border-primary-green bg-teal-50":"border-gray-200 hover:border-teal-200 hover:bg-gray-50"}`,style:{borderColor:n(t._id)?"#058FA2":"",backgroundColor:n(t._id)?"#e6f7f9":""},children:[e.jsx("div",{className:"flex w-full items-center justify-between p-4 cursor-pointer",onClick:()=>s(t._id),children:e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsx("div",{className:`w-6 h-6 rounded-md border flex items-center justify-center cursor-pointer transition-colors ${n(t._id)?"bg-primary-green border-primary-green":"border-gray-300"}`,style:{backgroundColor:n(t._id)?"#058FA2":"",borderColor:n(t._id)?"#058FA2":""},onClick:x=>a(t,x),children:n(t._id)&&e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",className:"text-white",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsx("div",{className:"flex gap-3 items-center flex-1",children:e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg",children:t.heading}),e.jsxs("div",{className:"flex items-center",children:[e.jsxs("span",{className:"text-teal-600 font-medium mr-3",style:{color:"#058FA2"},children:["₹ ",(i=t.rate)==null?void 0:i.amount," ",((d=t.rate)==null?void 0:d.period)||""]}),e.jsx("button",{className:`w-6 h-6 flex items-center justify-center rounded-full transition-colors ${h[t._id]?"bg-teal-100 text-teal-600":"bg-gray-100 text-gray-500"}`,style:{backgroundColor:h[t._id]?"#e6f7f9":"",color:h[t._id]?"#058FA2":""},children:h[t._id]?"−":"+"})]})]})})})]})}),h[t._id]&&e.jsxs("div",{className:"px-14 pb-4 pt-0 text-gray-600 border-t border-gray-100",children:[e.jsx("p",{className:"text-sm",children:t.description}),n(t._id)&&e.jsx("div",{className:"mt-3 text-xs bg-teal-100 text-primay-green py-2 px-3 rounded-md inline-block",style:{backgroundColor:"#e6f7f9",color:"#058FA2"},children:"✓ Added to your stay"})]})]},t._id)})})]})},Y=f.forwardRef((r,m)=>{const{phoneVerified:h,setPhoneVerified:o}=L(),[c,l]=f.useState(""),[s,a]=f.useState(""),[n,t]=f.useState(""),[i,d]=f.useState(""),[x,g]=f.useState(""),[b,v]=f.useState(!1),j=f.useRef(null),{mutate:k}=Q(),{mutate:_}=H(),C=()=>{if(!i.trim()){u.error("Please enter a valid phone number");return}k(`+91${i}`,{onSuccess:()=>{v(!0),u.success("OTP sent to your phone")},onError:()=>{u.error("Error sending OTP")}})},V=()=>{if(!x.trim()){u.error("Please enter the OTP");return}let p=i.trim();p.startsWith("+91")||(p="+91"+p),_({phone:p,code:x},{onSuccess:w=>{console.log("Verification Check Response:",w),w&&(w.status==="approved"||w.valid===!0)?(o(!0),v(!1),g(""),u.success("Phone number verified")):u.error("Invalid OTP")},onError:w=>{var O,S;console.log("OTP Verification Error:",w),(S=(O=w==null?void 0:w.response)==null?void 0:O.data)!=null&&S.message?u.error(`OTP verification failed: ${w.response.data.message}`):u.error("OTP verification failed. Please try again.")}})},E=()=>{var p,w,O,S,A;return c.trim()?s.trim()?n.trim()?i.trim()?h?!0:(u.error("Please verify your phone number"),(A=j.current)==null||A.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your mobile number"),(S=j.current)==null||S.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your email address"),(O=j.current)==null||O.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your last name"),(w=j.current)==null||w.scrollIntoView({behavior:"smooth"}),!1):(u.error("Please enter your first name"),(p=j.current)==null||p.scrollIntoView({behavior:"smooth"}),!1)};return f.useImperativeHandle(m,()=>({validateForm:E,getGuestDetails:()=>({firstName:c,lastName:s,email:n,phoneNumber:i})})),e.jsxs("div",{ref:j,className:"flex flex-col gap-6 bg-white",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-1 h-8 bg-primary-green rounded-full mr-3",style:{backgroundColor:"#058FA2"}}),e.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Enter Your Details"})]}),e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-10",children:[{id:"firstName",label:"First Name *",placeholder:"John",type:"text"},{id:"lastName",label:"Last Name *",placeholder:"Smith",type:"text"},{id:"email",label:"Email Address *",placeholder:"abc@example.com",type:"email"},{id:"mobile",label:"Mobile Number",placeholder:"1234567896",type:"tel"}].map(({id:p,label:w,placeholder:O,type:S})=>e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:p,className:"block text-lg font-medium text-gray-700",children:w}),e.jsxs("div",{className:"flex",children:[e.jsx("input",{type:S,id:p,placeholder:O,className:"w-full h-[50px] shadow-sm border border-gray-300 rounded-md py-2 px-4 focus:outline-none focus:ring-primary-green focus:border-primary-green",value:p==="mobile"?i:p==="firstName"?c:p==="lastName"?s:p==="email"?n:void 0,onChange:A=>{p==="mobile"?d(A.target.value):p==="firstName"?l(A.target.value):p==="lastName"?a(A.target.value):p==="email"&&t(A.target.value)}}),p==="mobile"&&!h&&e.jsx("button",{type:"button",onClick:C,className:"ml-2 px-4 py-2 bg-cyan-600 text-white rounded-md",children:"Verify"})]})]},p))}),b&&e.jsx("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50",children:e.jsxs("div",{className:"bg-white p-6 rounded-lg w-96 shadow-2xl",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Enter Verification Code"}),e.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsxs("div",{className:"mb-6 text-center",children:[e.jsx("div",{className:"inline-block p-3 rounded-full bg-cyan-100 mb-4"}),e.jsxs("p",{className:"text-gray-600 mb-4",children:["We've sent a 6-digit code to +91 ",i]})]}),e.jsx("div",{className:"mb-6",children:e.jsx("input",{type:"text",value:x,onChange:p=>g(p.target.value),placeholder:"Enter 6-digit OTP",className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-center text-lg tracking-widest focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all",maxLength:"6"})}),e.jsx("button",{onClick:V,className:"w-full py-3 bg-gradient-to-r from-cyan-600 to-cyan-700 text-white font-semibold rounded-lg shadow hover:shadow-lg transition-all",children:"Verify & Continue"}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("p",{className:"text-gray-600 text-sm",children:["Didn't receive the code?"," ",e.jsx("button",{onClick:C,className:"text-cyan-600 font-medium hover:underline",children:"Resend"})]})})]})}),h&&e.jsx("div",{className:"mt-6 text-green-600 font-semibold",children:"Phone number verified! Offer codes are now active."})]})});Y.displayName="GuestDetailsForm";const me=()=>{const{details:r,setDetails:m,selectedRooms:h,setSelectedRooms:o}=L();console.log(r);const c=(s,a)=>{o(n=>{var g,b,v,j,k;const t=[...n],i=((b=(g=r[s])==null?void 0:g.roomData)==null?void 0:b.discountRate)||0,d=((k=(j=(v=r[s])==null?void 0:v.continentalPlan)==null?void 0:j.rate)==null?void 0:k.amount)||0;let x=i;return a==="continental"&&(x+=d),t[s]={...t[s],option:a,price:x},t})},l=(s,a)=>{o(n=>{var g,b,v,j;const t=[...n],i=((b=(g=r[s])==null?void 0:g.roomData)==null?void 0:b.maxGuests)||1;let d=((v=t[s])==null?void 0:v.guestQty)??1,x=((j=t[s])==null?void 0:j.showMaxGuestAlert)??!1;return a==="increment"?d<i?(d+=1,x=!1):x=!0:a==="decrement"&&(d>0&&(d-=1),x=!1),t[s]={...t[s],guestQty:d,showMaxGuestAlert:x},console.log(t),d===0&&(t.splice(s,1),m(k=>k.filter((_,C)=>C!==s))),t})};return e.jsxs(e.Fragment,{children:[r==null?void 0:r.map((s,a)=>{var t,i,d,x,g,b;const n=h[a]||{roomName:((t=s==null?void 0:s.roomData)==null?void 0:t.RoomName)||"",option:"roomOnly",price:((i=s==null?void 0:s.roomData)==null?void 0:i.discountRate)||0,guestQty:1,showMaxGuestAlert:!1};return n.guestQty===0?null:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:h-[200px] w-full border p-4 rounded-md border-gray-300 bg-primary-white gap-4",children:[e.jsxs("div",{className:"w-full lg:w-1/3 relative",children:[e.jsx("img",{src:(d=s==null?void 0:s.aboutUs)==null?void 0:d.img,alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"}),e.jsx("p",{className:"text-[#FDC114] px-4 py-1 top-[116px] rounded-e-full font-semibold absolute bg-primary-white overflow-hidden animate-wipe",children:e.jsx("span",{className:"inline-block primary-whitespace-nowrap",children:"Best Choice"})})]}),e.jsxs("div",{className:"flex flex-col justify-center w-full gap-2",children:[e.jsx("h2",{className:"text-2xl font-bold text-[#288592]",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-lg text-black font-semibold",children:(x=s==null?void 0:s.roomData)==null?void 0:x.RoomName}),e.jsx("p",{className:"text-sm md:max-w-xs text-primary-gray font-normal",children:(s==null?void 0:s.name)+", "+((g=s==null?void 0:s.cityLocation)==null?void 0:g.name)}),e.jsxs("p",{className:"text-md font-semibold",children:["Price: ₹",n.price]})]}),e.jsxs("div",{className:"flex flex-col items-start w-full lg:w-[400px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] text-[#288592] font-medium border-2 p-2 gap-4 text-lg rounded-xl",children:[e.jsx("span",{className:"cursor-pointer text-yellow-500",onClick:()=>l(a,"decrement"),children:e.jsx(re,{})}),n.guestQty>1?`${n.guestQty} Guests`:"1 Guest",e.jsx("span",{className:"cursor-pointer text-yellow-500",onClick:()=>l(a,"increment"),children:e.jsx(se,{})})]}),n.showMaxGuestAlert&&e.jsxs("div",{className:"absolute top-[3rem] right-0 z-10 bg-white border border-gray-300 px-2 py-4 rounded-md shadow-md w-64",children:[e.jsxs("p",{className:"text-gray-800 text-sm font-medium",children:["Maximum of ",(b=s==null?void 0:s.roomData)==null?void 0:b.maxGuests," guests allowed."]}),e.jsx("div",{className:"flex items-center justify-end gap-2 mt-2",children:e.jsx("button",{onClick:()=>o(v=>{const j=[...v];return j[a].showMaxGuestAlert=!1,j}),className:"px-2 py-1 bg-gray-200 text-sm rounded-md",children:"Dismiss"})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h3",{className:"text-gray-500 text-xl font-bold",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2 mt-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${a}`,value:"roomOnly",checked:n.option==="roomOnly",onChange:()=>c(a,"roomOnly"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-500 font-semibold",children:"Room only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${a}`,value:"continental",checked:n.option==="continental",onChange:()=>c(a,"continental"),className:"w-4 h-4 text-[#288592] cursor-pointer border-2 border-[#288592] focus:ring-[#288592]"}),e.jsx("span",{className:"text-base text-gray-500 font-semibold",children:"Continental Plan (breakfast)"})]})]})]})]})]},a)}),r.length<=0&&e.jsx(e.Fragment,{children:" No data Available "})]})},xe=(r,m)=>{if(!r||!m)return 0;const h=new Date(r),o=new Date(m),c=Math.abs(o-h);return Math.ceil(c/(1e3*60*60*24))},pe=()=>{const{ContactUsDetail:r}=te(),{details:m,hotelData:h}=L(),o=m[0],c=z(),l=localStorage.getItem("hotelInfo"),s=JSON.parse(l),a=localStorage.getItem("checkInDate"),n=localStorage.getItem("checkOutDate"),t=xe(a,n),[i,d]=f.useState(!1),[x,g]=f.useState(!0),b=f.useRef();return f.useEffect(()=>{const v=document.querySelector("#payment-method");if(v){const j=new IntersectionObserver(([k])=>{d(k.isIntersecting)},{threshold:.1});return j.observe(v),()=>j.disconnect()}},[]),f.useEffect(()=>{i?setTimeout(()=>g(!1),300):g(!0)},[i]),f.useEffect(()=>{(!m||m.length===0||!o)&&c(`/hotels/${s==null?void 0:s.hotelCode}`)},[m,h,o,c,s]),!m||m.length===0||!o?null:e.jsxs("div",{className:"p-4 content md:flex gap-5",children:[e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsxs(ne,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsx(me,{}),e.jsx(Y,{ref:b}),o.addToYourStay.length>0&&e.jsx(de,{data:o}),e.jsx(ce,{hotelDetail:o}),e.jsx("div",{className:"lg:hidden",children:e.jsx(W,{hotelDetail:o,checkIn:a,checkOut:n,days:t,showButton:x,isPaymentVisible:i})}),e.jsx(ae,{hotelDetail:o,guestFormRef:b,checkIn:a,checkOut:n}),e.jsx(le,{ContactUsDetail:r})]}),e.jsx("div",{className:"hidden lg:block",children:e.jsx(W,{hotelDetail:o,checkIn:a,checkOut:n,days:t,showButton:x,isPaymentVisible:i})})]})};export{pe as default};
