var Re=Object.defineProperty,Ye=Object.defineProperties;var Oe=Object.getOwnPropertyDescriptors;var ue=Object.getOwnPropertySymbols;var Qe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable;var me=(s,a,i)=>a in s?Re(s,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[a]=i,l=(s,a)=>{for(var i in a||(a={}))Qe.call(a,i)&&me(s,i,a[i]);if(ue)for(var i of ue(a))Ve.call(a,i)&&me(s,i,a[i]);return s},c=(s,a)=>Ye(s,Oe(a));var z=(s,a,i)=>new Promise((N,v)=>{var T=d=>{try{r(i.next(d))}catch(j){v(j)}},g=d=>{try{r(i.throw(d))}catch(j){v(j)}},r=d=>d.done?N(d.value):Promise.resolve(d.value).then(T,g);r((i=i.apply(s,a)).next())});import{j as e,r as w,c as ze,g as k}from"./index-DySQldRg.js";import{useAddHotel as Ke,useEditHotel as _e,uploadImagesAPIV2 as _}from"./useHotelHook2-CBYxhzBT.js";import{M as B}from"./MultipleImageUpload-DjarJ6ph.js";import{u as Be}from"./useUpdatePagesHook-CB8stgLp.js";import{I as Ge}from"./ImageUpload-CTRjAuzU.js";import{u as We}from"./useLocationHook-B9XgoumX.js";import{F as ie}from"./FormControlLabel-CicM1-KC.js";import{S as Je}from"./Switch-DMPt7amd.js";import{A as Xe}from"./Autocomplete-B6yLcml0.js";import{c as Ze}from"./TextField-YyFXX6PG.js";const De=({formData:s,handleAboutUsChange:a,handleAboutUsFeatureChange:i})=>e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"About Us Description:"}),e.jsx("textarea",{name:"description",value:s.aboutUs.description,onChange:a,placeholder:"Enter about us description",className:"w-full md:h-[180px] border rounded-md p-3 focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"About Us Image:"}),e.jsx(Ge,{feature:s.aboutUs,handleFeatureChange:i,setImageUpload:()=>{},index:0})]})]}),es=({formData:s,setFormData:a,testimonialInput:i,setTestimonialInput:N,handleAddTestimonial:v,handleRemoveTestimonial:T})=>{const[g,r]=w.useState(null),[d,j]=w.useState({name:"",location:"",heading:"",description:""}),U=h=>{r(h),j(l({},s.testimonials[h]))},S=h=>{const{name:m,value:y}=h.target;j(F=>c(l({},F),{[m]:y}))},I=h=>{const m=[...s.testimonials];m[h]=d,a(y=>c(l({},y),{testimonials:m})),r(null)},x=()=>{r(null)};return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{children:s.testimonials.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:s.testimonials.map((h,m)=>e.jsx("div",{className:"border rounded-lg p-6 shadow-md hover:shadow-xl transition-shadow bg-white",children:g===m?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",name:"heading",value:d.heading,onChange:S,placeholder:"Edit Heading",className:"text-xl font-bold text-blue-600 mb-2 border rounded p-2 w-full"}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"font-medium",children:"Name: "}),e.jsx("input",{type:"text",name:"name",value:d.name,onChange:S,className:"border rounded p-2 w-full"})]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"font-medium",children:"Location: "}),e.jsx("input",{type:"text",name:"location",value:d.location,onChange:S,className:"border rounded p-2 w-full"})]}),e.jsx("textarea",{name:"description",value:d.description,onChange:S,placeholder:"Edit testimonial description",className:"border rounded p-2 w-full mb-2"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>I(m),className:"bg-green-500 hover:bg-green-600 text-white font-medium py-2 px-4 rounded",children:"Save"}),e.jsx("button",{type:"button",onClick:x,className:"bg-gray-500 hover:bg-gray-600 text-white font-medium py-2 px-4 rounded",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-xl font-bold text-blue-600 mb-2",children:h.heading}),e.jsxs("p",{className:"text-gray-800 font-medium",children:["Name: ",e.jsx("span",{className:"font-normal",children:h.name})]}),e.jsxs("p",{className:"text-gray-800 font-medium",children:["Location: ",e.jsx("span",{className:"font-normal",children:h.location})]}),e.jsx("p",{className:"text-gray-700 mt-2",children:h.description}),e.jsxs("div",{className:"flex gap-4 mt-4",children:[e.jsx("button",{type:"button",onClick:()=>U(m),className:"inline-block text-blue-500 hover:underline font-medium",children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>T(m),className:"inline-block text-red-500 hover:underline font-medium",children:"Remove"})]})]})},m))}):e.jsx("p",{className:"text-gray-600 text-center",children:"No testimonials added yet."})}),e.jsxs("div",{className:"border rounded-lg p-6 shadow-sm bg-gray-50",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Add Testimonial"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Name:"}),e.jsx("input",{type:"text",name:"name",value:i.name,onChange:h=>{const{value:m}=h.target;N(y=>c(l({},y),{name:m}))},placeholder:"Enter name",className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Location:"}),e.jsx("input",{type:"text",name:"location",value:i.location,onChange:h=>{const{value:m}=h.target;N(y=>c(l({},y),{location:m}))},placeholder:"Enter location",className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Heading:"}),e.jsx("input",{type:"text",name:"heading",value:i.heading,onChange:h=>{const{value:m}=h.target;N(y=>c(l({},y),{heading:m}))},placeholder:"Enter heading",className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Description:"}),e.jsx("textarea",{name:"description",value:i.description,onChange:h=>{const{value:m}=h.target;N(y=>c(l({},y),{description:m}))},placeholder:"Enter testimonial description",className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]})]}),e.jsx("button",{type:"button",onClick:v,className:"mt-6 w-full bg-green-500 hover:bg-green-600 text-white font-medium py-3 rounded-md transition-colors",children:"Add Testimonial"})]})]})},ss=({formData:s,isUploading:a,handleImagesUpload:i,handleRemoveImageUrl:N})=>e.jsx("div",{className:"space-y-5",children:e.jsx(B,{onUploadSuccess:i,isUploading:a,imagesUrls:s.images,onRemoveImageUrl:N})}),os=({formData:s,handleHotelAddressChange:a,handleTransportChange:i,transportLocations:N,pointsOfInterest:v,locationInputs:T,handleLocationInputChange:g,addLocationItem:r,removeLocationItem:d,handleCityLocationChange:j})=>{const{data:U,isLoading:S,isError:I}=We();return e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-yellow-700",children:"Please fill in the correct location information. Accuracy is important for guest experience."})})]})}),e.jsxs("div",{className:"flex gap-4 w-full",children:[e.jsxs("div",{className:"bg-white border  w-full rounded-lg p-6 shadow-md transition-shadow duration-300",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Hotel Address"}),e.jsx("input",{type:"text",name:"hotelAddress",value:s.location.hotelAddress,onChange:a,required:!0,placeholder:"Enter hotel address",className:"w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"bg-white border  w-full rounded-lg p-6 shadow-md transition-shadow duration-300",children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-2",children:"Select City"}),S?e.jsx("p",{children:"Loading cities..."}):I?e.jsx("p",{children:"Error loading cities"}):e.jsxs("select",{value:s.cityLocation||"",onChange:j,className:"w-full border rounded-lg p-3 focus:outline-none focus:ring-2 focus:ring-blue-200",children:[e.jsx("option",{value:"",children:"Select a city"}),U&&U.map(x=>e.jsx("option",{value:x._id,children:x.name},x._id))]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsx("h3",{className:"text-xl font-semibold mt-6",children:"Transportation Options"}),e.jsx("div",{className:"flex gap-6 w-full",children:N.map(x=>e.jsxs("div",{className:"bg-white border w-full rounded-lg p-6 shadow-md transition-shadow duration-300",children:[e.jsx("h3",{className:"text-xl font-semibold capitalize",children:x==="railwayStation"?"Railway Station":x}),e.jsx("input",{type:"text",placeholder:"Enter name",value:s.location[x]||"",onChange:h=>i(x,h.target.value),className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]},x))})]}),e.jsx("h3",{className:"text-xl font-semibold mt-6",children:"Points of Interest"}),v.map(x=>e.jsxs("div",{className:"bg-white border rounded-lg p-6 shadow-md transition-shadow duration-300",children:[e.jsx("h3",{className:"text-xl font-semibold capitalize",children:x}),s.location[x]&&s.location[x].length>0&&e.jsx("ul",{className:"mb-4 space-y-2",children:s.location[x].map((h,m)=>e.jsxs("li",{className:"flex justify-between items-center bg-gray-100 rounded-md p-3",children:[e.jsx("span",{className:"text-gray-800",children:h.name}),e.jsx("button",{type:"button",onClick:()=>d(x,m),className:"text-red-500 hover:underline font-medium",children:"Remove"})]},m))}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[e.jsx("input",{type:"text",placeholder:"Name",value:T[x].name,onChange:h=>g(x,"name",h.target.value),className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsx("button",{type:"button",onClick:()=>r(x),className:"bg-blue-500 text-white px-4 py-2 rounded-md",children:"Add"})]})]},x))]})},he=({initialTime:s,onChange:a,name:i})=>{const[N,v]=w.useState(!1),[T,g]=w.useState(s||""),[r,d]=w.useState(12),[j,U]=w.useState(0),[S,I]=w.useState("AM"),[x,h]=w.useState("hour");w.useEffect(()=>{s&&m(s)},[s]);const m=p=>{if(p)try{if(p.includes("AM")||p.includes("PM")){const[M,q]=p.split(" "),[H,K]=M.split(":");d(parseInt(H,10)),U(parseInt(K,10)),I(q);return}const[C,A]=p.split(":"),E=parseInt(C,10);d(E>12?E-12:E===0?12:E),U(parseInt(A,10)),I(E>=12?"PM":"AM")}catch(C){}},y=()=>`${r}:${j.toString().padStart(2,"0")} ${S}`,F=()=>{h(x==="hour"?"minute":"hour")},Y=p=>{d(p),h("minute")},O=p=>{U(p);const C=`${r}:${p.toString().padStart(2,"0")} ${S}`;g(C),a&&a({target:{name:i,value:C,type:"text"}})},$=p=>{I(p);const C=`${r}:${j.toString().padStart(2,"0")} ${p}`;g(C),a&&a({target:{name:i,value:C,type:"text"}})},L=()=>{const p=y();g(p),v(!1),a&&a({target:{name:i,value:p,type:"text"}})},Q=()=>x==="hour"?Array.from({length:12},(p,C)=>{const A=C+1,E=A/12*2*Math.PI-Math.PI/2,M=80,q=Math.cos(E)*M+100,H=Math.sin(E)*M+100;return e.jsx("div",{className:`absolute rounded-full h-8 w-8 flex items-center justify-center cursor-pointer ${r===A?"bg-blue-500 text-white":"hover:bg-blue-100"}`,style:{left:`${q}px`,top:`${H}px`,transform:"translate(-50%, -50%)"},onClick:()=>Y(A),children:A},A)}):Array.from({length:12},(p,C)=>{const A=C*5,E=A/60*2*Math.PI-Math.PI/2,M=80,q=Math.cos(E)*M+100,H=Math.sin(E)*M+100;return e.jsx("div",{className:`absolute rounded-full h-8 w-8 flex items-center justify-center cursor-pointer ${j===A?"bg-blue-500 text-white":"hover:bg-blue-100"}`,style:{left:`${q}px`,top:`${H}px`,transform:"translate(-50%, -50%)"},onClick:()=>O(A),children:A},A)}),V=()=>x==="hour"?{transform:`translate(0, 0) rotate(${r%12/12*2*Math.PI-Math.PI/2+Math.PI/2}rad)`,transformOrigin:"bottom center",height:"60px"}:{transform:`translate(0, 0) rotate(${j/60*2*Math.PI-Math.PI/2+Math.PI/2}rad)`,transformOrigin:"bottom center",height:"70px"};return e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"w-full border rounded-md p-3 cursor-pointer flex justify-between items-center bg-white",onClick:()=>v(!N),children:[e.jsx("span",{children:T||"Select Time"}),e.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),N&&e.jsxs("div",{className:"absolute z-20 mt-1 p-4 bg-white shadow-xl rounded-lg border",style:{width:"250px"},children:[e.jsxs("div",{className:"mb-4 text-center text-2xl font-bold cursor-pointer",onClick:F,children:[r,":",j.toString().padStart(2,"0"),e.jsx("span",{className:"ml-2",children:S})]}),e.jsxs("div",{className:"flex justify-center mb-4 space-x-4",children:[e.jsx("button",{className:`px-4 py-1 rounded ${S==="AM"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>$("AM"),children:"AM"}),e.jsx("button",{className:`px-4 py-1 rounded ${S==="PM"?"bg-blue-500 text-white":"bg-gray-200"}`,onClick:()=>$("PM"),children:"PM"})]}),e.jsxs("div",{className:"relative w-48 h-48 mx-auto mb-4",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-gray-200"}),e.jsx("div",{className:"absolute rounded-full bg-blue-500 h-3 w-3",style:{left:"100px",top:"100px",transform:"translate(-50%, -50%)"}}),e.jsx("div",{className:"absolute w-1 bg-blue-500 rounded-full",style:c(l({},V()),{left:"100px",bottom:"100px"})}),Q()]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{className:"px-4 py-2 bg-gray-200 rounded-md hover:bg-gray-300",onClick:()=>v(!1),children:"Cancel"}),e.jsx("button",{className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",onClick:L,children:"Apply"})]})]})]})},ns=({formData:s,handleDetailsChange:a,amenities:i,handleAmenitiesChange:N,setFormData:v})=>{console.log("DetailsTab formData:",s);const T=g=>{g.target,a(g)};return e.jsxs("div",{className:"space-y-5",children:[e.jsx(ie,{control:e.jsx(ie,{control:e.jsx(Je,{checked:s.payAtHotel==="yes",onChange:g=>a({target:{name:"payAtHotel",value:g.target.checked?"yes":"no",checked:g.target.checked,type:"checkbox"}}),color:"primary"}),label:"Pay at Hotel"})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Name:"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:a,required:!0,placeholder:"Enter hotel name",className:"w-full border rounded-md p-3 focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Rating:"}),e.jsx("input",{type:"number",name:"rating",value:s.rating,onChange:a,min:"0",max:"5",step:"0.1",placeholder:"Rating (0-5)",className:"w-full border rounded-md p-3 focus:ring focus:ring-blue-200"})]})]}),e.jsx("div",{className:"border-t pt-6",children:e.jsxs("div",{className:"group",children:[e.jsx("summary",{className:"text-xl font-semibold cursor-pointer list-none flex justify-between items-center",children:"SEO & Meta Data"}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Meta Title"}),e.jsx("input",{type:"text",name:"title",value:s.meta.title,onChange:a,placeholder:"Enter meta title",className:"w-full border rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-300"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Meta Description"}),e.jsx("input",{type:"text",name:"description",value:s.meta.description,onChange:a,placeholder:"Enter meta description",className:"w-full border rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-300"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Keywords"}),e.jsx("input",{type:"text",name:"keywords",value:s.meta.keywords.join(", "),onChange:a,placeholder:"e.g., hotel in Dehradun, best hotels, luxury stay",className:"w-full border rounded-md p-3 focus:outline-none focus:ring-2 focus:ring-blue-300"}),e.jsx("small",{className:"text-gray-500",children:"Use commas to separate keywords."})]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Continental Plan (Breakfast)"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"number",name:"amount",value:s.continentalPlan.rate.amount,onChange:g=>v(c(l({},s),{continentalPlan:c(l({},s.continentalPlan),{rate:c(l({},s.continentalPlan.rate),{amount:Number(g.target.value)})})})),placeholder:"Rate Amount",className:"w-full border rounded-md p-2"}),e.jsxs("select",{name:"period",value:s.continentalPlan.rate.period,onChange:g=>v(c(l({},s),{continentalPlan:c(l({},s.continentalPlan),{rate:c(l({},s.continentalPlan.rate),{period:g.target.value})})})),className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"per person",children:"Per Person"}),e.jsx("option",{value:"per breakfast",children:"Per Breakfast"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Description:"}),e.jsx("textarea",{name:"description",value:s.description,onChange:a,required:!0,placeholder:"Enter description",className:"w-full border rounded-md p-3 focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-center",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium ",children:"Price:"}),e.jsx("input",{type:"number",name:"price",value:s.price,onChange:a,min:"0",placeholder:"Price",className:"w-full border rounded-md p-3 focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Phone Number:"}),e.jsx("input",{type:"number",name:"phoneNumber",value:s.phoneNumber,onChange:a,placeholder:"Phone Number",className:"w-full border rounded-md p-3 focus:ring focus:ring-blue-200"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Amenities:"}),e.jsx(Xe,{multiple:!0,id:"amenities-select",options:i==null?void 0:i.map(g=>({label:g.label,value:g.value})),value:s.amenities,onChange:N,isOptionEqualToValue:(g,r)=>g.label===r.label,getOptionLabel:g=>g.label,renderInput:g=>e.jsx(Ze,c(l({},g),{label:"Select amenities",placeholder:"Select amenities"}))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Check In:"}),e.jsx(he,{initialTime:s.checkIn,onChange:T,name:"checkIn"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Check Out:"}),e.jsx(he,{initialTime:s.checkOut,onChange:T,name:"checkOut"})]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",name:"soldOut",checked:s.soldOut,onChange:a,className:"mr-2"}),e.jsx("label",{className:"text-gray-700 font-medium",children:"Sold Out"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Hotel Code:"}),e.jsx("input",{type:"text",name:"hotelCode",value:s.hotelCode,onChange:a,required:!0,placeholder:"Enter hotel code",className:"w-full border rounded-md p-3 focus:ring focus:ring-blue-200"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-gray-700 font-medium mb-1",children:"Auth Key:"}),e.jsx("input",{type:"text",name:"authKey",value:s.authKey,onChange:a,required:!0,placeholder:"Enter authentication key",className:"w-full border rounded-md p-3 focus:ring focus:ring-blue-200"})]})]})]})},ts=({formData:s,isUploading:a,newSectionHeading:i,setNewSectionHeading:N,handleCarouselImagesUpload:v,handleRemoveCarouselImage:T,handleAddImageSection:g,handleSectionHeadingChange:r,handleRemoveImageSection:d,handleSectionImagesUpload:j,handleRemoveSectionImageUrl:U})=>{var S,I,x;return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Carousel Images"}),e.jsx(B,{onUploadSuccess:h=>v(h),isUploading:a,imagesUrls:(S=s==null?void 0:s.imageSections)==null?void 0:S.carouselImages,onRemoveImageUrl:T})]}),e.jsxs("div",{className:"",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Image Sections"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 mb-6",children:[e.jsx("input",{type:"text",value:i,onChange:h=>N(h.target.value),placeholder:"Section Heading (e.g., Lobby, King Size Room)",className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsx("button",{type:"button",onClick:g,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-colors",children:"Add Section"})]}),e.jsx("h1",{className:"text-2xl font-semibold",children:"Heading"}),((x=(I=s==null?void 0:s.imageSections)==null?void 0:I.sections)==null?void 0:x.length)>0?s.imageSections.sections.map((h,m)=>e.jsxs("div",{className:"p-6 mb-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-4",children:[e.jsx("input",{type:"text",value:h.heading,onChange:y=>r(m,y.target.value),placeholder:"Section Heading",className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsx("button",{type:"button",onClick:()=>d(m),className:"mt-2 sm:mt-0 sm:ml-4 text-red-500 hover:underline",children:"Remove Section"})]}),e.jsx(B,{onUploadSuccess:y=>j(m,y),isUploading:a,imagesUrls:h.images,onRemoveImageUrl:y=>U(m,y)})]},m)):e.jsx("p",{className:"text-gray-600 italic",children:"No image sections added yet."})]})]})},ps=({initialData:s=null})=>{var J,X,Z,D,ee,se,oe,ne,te,le,re,ce,de,ae;console.log("Initial data: form",s);const a=!!s,i=ze(),{amenities:N}=Be();console.log(N);const v=o=>{var t;const n=(t=s==null?void 0:s.location)==null?void 0:t[o];return typeof n=="string"?n:Array.isArray(n)&&n.length>0&&n[0].name||""},g=(o=>o?Array.isArray(o.sections)&&Array.isArray(o.carouselImages)?o:o.images?{sections:[],carouselImages:o.images}:{sections:[],carouselImages:[]}:{sections:[],carouselImages:[]})(s==null?void 0:s.imageSections),[r,d]=w.useState({name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",location:{hotelAddress:((J=s==null?void 0:s.location)==null?void 0:J.hotelAddress)||"",metro:v("metro"),airport:v("airport"),railwayStation:v("railwayStation"),attractions:((X=s==null?void 0:s.location)==null?void 0:X.attractions)||[],restaurants:((Z=s==null?void 0:s.location)==null?void 0:Z.restaurants)||[],activities:((D=s==null?void 0:s.location)==null?void 0:D.activities)||[],nightlife:((ee=s==null?void 0:s.location)==null?void 0:ee.nightlife)||[]},meta:{title:((se=s==null?void 0:s.meta)==null?void 0:se.title)||"",description:((oe=s==null?void 0:s.meta)==null?void 0:oe.description)||"",keywords:((ne=s==null?void 0:s.meta)==null?void 0:ne.keywords)||[],ogTitle:((te=s==null?void 0:s.meta)==null?void 0:te.ogTitle)||"",ogDescription:((le=s==null?void 0:s.meta)==null?void 0:le.ogDescription)||"",ogImage:((re=s==null?void 0:s.meta)==null?void 0:re.ogImage)||"",canonicalUrl:((ce=s==null?void 0:s.meta)==null?void 0:ce.canonicalUrl)||""},amenities:(s==null?void 0:s.amenities)||[],rating:(s==null?void 0:s.rating)||0,price:(s==null?void 0:s.price)||0,discountedPrice:(s==null?void 0:s.discountedPrice)||0,soldOut:(s==null?void 0:s.soldOut)||!1,payAtHotel:(s==null?void 0:s.payAtHotel)||"no",hotelCode:(s==null?void 0:s.hotelCode)||"",authKey:(s==null?void 0:s.authKey)||"",images:(s==null?void 0:s.images)||[],testimonials:(s==null?void 0:s.testimonials)||[],checkIn:(s==null?void 0:s.checkIn)||"",checkOut:(s==null?void 0:s.checkOut)||"",aboutUs:{description:((de=s==null?void 0:s.aboutUs)==null?void 0:de.description)||"",image:((ae=s==null?void 0:s.aboutUs)==null?void 0:ae.img)||""},imageSections:g,cityLocation:(s==null?void 0:s.cityLocation)||"",faqs:(s==null?void 0:s.faqs)||[],addToYourStay:(s==null?void 0:s.addToYourStay)||[],continentalPlan:(s==null?void 0:s.continentalPlan)||{rate:{amount:0,period:"per person"}}}),[j,U]=w.useState({question:"",answer:""}),[S,I]=w.useState(null),[x,h]=w.useState({question:"",answer:""}),[m,y]=w.useState("details"),[F,Y]=w.useState({attractions:{name:""},restaurants:{name:""},activities:{name:""},nightlife:{name:""}}),[O,$]=w.useState({name:"",location:"",heading:"",description:""}),[L,Q]=w.useState(""),[V,p]=w.useState(!1),{mutate:C}=Ke(),{mutate:A}=_e(),E=o=>y(o),M=o=>{const{name:n,value:t,type:u,checked:b}=o.target,f=n==="payAtHotel"?b?"yes":"no":u==="checkbox"?b:t;["title","description","keywords","ogTitle","ogDescription","ogImage","canonicalUrl"].includes(n)?d(P=>c(l({},P),{meta:c(l({},P.meta),{[n]:n==="keywords"?t.split(",").map(R=>R.trim()):f})})):d(n==="amount"||n==="period"?P=>c(l({},P),{continentalPlan:c(l({},P.continentalPlan),{rate:c(l({},P.continentalPlan.rate),{[n]:n==="amount"?Number(t):t})})}):P=>c(l({},P),{[n]:f}))},q=o=>{const{name:n,value:t}=o.target;d(u=>c(l({},u),{aboutUs:c(l({},u.aboutUs),{[n]:t})}))},H=(o,n)=>{d(t=>c(l({},t),{aboutUs:c(l({},t.aboutUs),{[o]:n})}))},K=()=>{const o=l({},O);d(n=>c(l({},n),{testimonials:[...n.testimonials,o]})),$({name:"",location:"",heading:"",description:""})};console.log(r);const ge=o=>{const n=r.testimonials.filter((t,u)=>u!==o);d(t=>c(l({},t),{testimonials:n}))},G=(o,n)=>{U(t=>c(l({},t),{[o]:n}))},xe=()=>{if(!j.question.trim()||!j.answer.trim())return k.error("Please fill in both question and answer for the FAQ.");d(o=>c(l({},o),{faqs:[...o.faqs,{question:j.question.trim(),answer:j.answer.trim()}]})),U({question:"",answer:""})},pe=o=>{d(n=>{const t=[...n.faqs];return t.splice(o,1),c(l({},n),{faqs:t})})},be=o=>{I(o),h(l({},r.faqs[o]))},W=o=>{const{name:n,value:t}=o.target;h(u=>c(l({},u),{[n]:t}))},fe=o=>{const n=[...r.faqs];n[o]=x,d(t=>c(l({},t),{faqs:n})),I(null)},je=()=>{I(null)},ye=o=>z(void 0,null,function*(){var n,t;if(!o.length)return k.error("No images selected");p(!0);try{const u=yield _(o),b=Array.isArray(u)?u:[u];d(f=>c(l({},f),{images:[...f.images,...b[0].imageUrls]})),k.success("Images uploaded successfully!")}catch(u){k.error((t=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:t.message)}p(!1)}),Ne=o=>{d(n=>c(l({},n),{images:n.images.filter(t=>t!==o)}))},ve=(o,n,t)=>{Y(u=>c(l({},u),{[o]:c(l({},u[o]),{[n]:t})}))},we=o=>{const{name:n}=F[o];if(!n.trim())return k.error(`Please provide a name for ${o}`);d(t=>c(l({},t),{location:c(l({},t.location),{[o]:[...t.location[o]||[],{name:n.trim()}]})})),Y(t=>c(l({},t),{[o]:{name:""}}))},Se=(o,n)=>{d(t=>{const u=[...t.location[o]||[]];return u.splice(n,1),c(l({},t),{location:c(l({},t.location),{[o]:u})})})},Ce=o=>{const{value:n}=o.target;d(t=>c(l({},t),{location:c(l({},t.location),{hotelAddress:n})}))},ke=(o,n)=>{d(t=>c(l({},t),{location:c(l({},t.location),{[o]:n})}))},Ae=o=>z(void 0,null,function*(){var n,t;if(!o.length)return k.error("No images selected for carousel");p(!0);try{const u=yield _(o),b=Array.isArray(u)?u:[u];d(f=>c(l({},f),{imageSections:c(l({},f.imageSections),{carouselImages:[...f.imageSections.carouselImages,...b[0].imageUrls]})})),k.success("Carousel images uploaded successfully!")}catch(u){k.error((t=(n=u==null?void 0:u.response)==null?void 0:n.data)==null?void 0:t.message)}p(!1)}),Ie=o=>{d(n=>c(l({},n),{imageSections:c(l({},n.imageSections),{carouselImages:n.imageSections.carouselImages.filter(t=>t!==o)})}))},Pe=()=>{if(!L.trim())return k.error("Please provide a heading for the image section");d(o=>c(l({},o),{imageSections:c(l({},o.imageSections),{sections:[...o.imageSections.sections,{heading:L.trim(),images:[]}]})})),Q("")},Te=(o,n)=>{d(t=>{const u=[...t.imageSections.sections];return u[o].heading=n,c(l({},t),{imageSections:c(l({},t.imageSections),{sections:u})})})},Ue=(o,n)=>z(void 0,null,function*(){var t,u;if(!n.length)return k.error("No images selected for this section");p(!0);try{const b=yield _(n),f=Array.isArray(b)?b:[b];d(P=>{const R=[...P.imageSections.sections];return R[o].images=[...R[o].images,...f[0].imageUrls],c(l({},P),{imageSections:c(l({},P.imageSections),{sections:R})})}),k.success("Section images uploaded successfully!")}catch(b){k.error((u=(t=b==null?void 0:b.response)==null?void 0:t.data)==null?void 0:u.message)}p(!1)}),Ee=(o,n)=>{d(t=>{const u=[...t.imageSections.sections];return u[o].images=u[o].images.filter(b=>b!==n),c(l({},t),{imageSections:c(l({},t.imageSections),{sections:u})})})},Me=o=>{d(n=>{const t=[...n.imageSections.sections];return t.splice(o,1),c(l({},n),{imageSections:c(l({},n.imageSections),{sections:t})})})},qe=o=>{o.preventDefault();const n=c(l({},r),{location:{hotelAddress:r.location.hotelAddress,metro:r.location.metro?[{name:r.location.metro}]:[],airport:r.location.airport?[{name:r.location.airport}]:[],railwayStation:r.location.railwayStation?[{name:r.location.railwayStation}]:[],attractions:r.location.attractions,restaurants:r.location.restaurants,activities:r.location.activities,nightlife:r.location.nightlife},phoneNumber:r.phoneNumber,amenities:r.amenities,rating:Number(r.rating),price:Number(r.price),discountedPrice:Number(r.discountedPrice),aboutUs:{description:r.aboutUs.description,img:r.aboutUs.image},imageSections:r.imageSections,faqs:r.faqs,cityLocation:r.cityLocation,addToYourStay:r.addToYourStay,continentalPlan:r.continentalPlan});a?A({hotelCode:r.hotelCode,hotelData:n},{onSuccess:()=>{k.success("Hotel updated successfully!"),i("/admin/hotels")},onError:t=>k.error(`Error updating hotel: ${t.message}`)}):C(n,{onSuccess:()=>{k.success("Hotel added successfully!"),i("/admin/hotels")},onError:t=>k.error(`Error adding hotel: ${t.message}`)})},He=(o,n)=>{d(t=>c(l({},t),{amenities:n}))},Fe=o=>{d(n=>c(l({},n),{cityLocation:o.target.value}))},$e=["metro","airport","railwayStation"],Le=["attractions","restaurants","activities","nightlife"];return e.jsx("div",{className:"mx-auto py-16 px-8",children:e.jsxs("div",{className:"bg-white p-8 shadow-lg rounded-lg",children:[e.jsx("h1",{className:"text-3xl font-bold text-center mb-6",children:a?"Edit Hotel":"Add Hotel"}),e.jsx("div",{className:"flex justify-center mb-6 border-b",children:["details","aboutUs","location","headerImages","hotelImages","testimonials","faqs","addToYourStay"].map(o=>e.jsxs("button",{onClick:()=>E(o),className:"relative text-xl px-4 py-2 mx-2 font-medium focus:outline-none transition-colors duration-300",children:[e.jsx("span",{className:m===o?"text-blue-500":"text-gray-500 hover:text-blue-500",children:o==="hotelImages"?"Hotel Images":o.charAt(0).toUpperCase()+o.slice(1)}),e.jsx("span",{className:`absolute left-0 bottom-0 h-0.5 bg-blue-500 transition-all duration-300 ${m===o?"w-full":"w-0"}`})]},o))}),e.jsxs("form",{onSubmit:qe,children:[m==="details"&&e.jsx(ns,{formData:r,handleDetailsChange:M,amenities:N,handleAmenitiesChange:He,setFormData:d}),m==="location"&&e.jsx(os,{formData:r,handleHotelAddressChange:Ce,handleTransportChange:ke,transportLocations:$e,pointsOfInterest:Le,locationInputs:F,handleLocationInputChange:ve,addLocationItem:we,removeLocationItem:Se,handleCityLocationChange:Fe}),m==="headerImages"&&e.jsx(ss,{formData:r,isUploading:V,handleImagesUpload:ye,handleRemoveImageUrl:Ne}),m==="hotelImages"&&e.jsx(ts,{formData:r,isUploading:V,newSectionHeading:L,setNewSectionHeading:Q,handleCarouselImagesUpload:Ae,handleRemoveCarouselImage:Ie,handleAddImageSection:Pe,handleSectionHeadingChange:Te,handleRemoveImageSection:Me,handleSectionImagesUpload:Ue,handleRemoveSectionImageUrl:Ee}),m==="testimonials"&&e.jsx(es,{formData:r,setFormData:d,testimonialInput:O,setTestimonialInput:$,handleAddTestimonial:K,handleRemoveTestimonial:ge}),m==="aboutUs"&&e.jsx(De,{formData:r,handleAboutUsChange:q,handleAboutUsFeatureChange:H}),m==="faqs"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"FAQs"}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("input",{type:"text",value:j.question,onChange:o=>G("question",o.target.value),placeholder:"FAQ Question",className:"flex-1 border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsx("input",{type:"text",value:j.answer,onChange:o=>G("answer",o.target.value),placeholder:"FAQ Answer",className:"flex-1 border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsx("button",{type:"button",onClick:xe,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-colors",children:"Add FAQ"})]}),r.faqs.length>0?r.faqs.map((o,n)=>e.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center p-4 border rounded-md",children:S===n?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("input",{type:"text",name:"question",value:x.question,onChange:W,placeholder:"Edit question",className:"w-full border rounded-md p-2 mb-2 focus:outline-none focus:ring-2 focus:ring-blue-200"}),e.jsx("input",{type:"text",name:"answer",value:x.answer,onChange:W,placeholder:"Edit answer",className:"w-full border rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-200"})]}),e.jsxs("div",{className:"flex gap-2 mt-2 sm:mt-0",children:[e.jsx("button",{type:"button",onClick:()=>fe(n),className:"bg-green-500 hover:bg-green-600 text-white px-3 py-2 rounded-md transition-colors",children:"Save"}),e.jsx("button",{type:"button",onClick:je,className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-2 rounded-md transition-colors",children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold",children:o.question}),e.jsx("p",{className:"text-gray-600",children:o.answer})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"button",onClick:()=>be(n),className:"text-blue-500 hover:underline",children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>pe(n),className:"text-red-500 hover:underline",children:"Remove"})]})]})},n)):e.jsx("p",{className:"text-gray-600 italic",children:"No FAQs added yet."})]})]}),m==="addToYourStay"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Add To Your Stay"}),r.addToYourStay.length>0&&r.addToYourStay.map((o,n)=>{var t,u;return e.jsxs("div",{className:"border p-4 rounded-md space-y-2",children:[e.jsx("input",{type:"text",value:o.heading,onChange:b=>{const f=[...r.addToYourStay];f[n].heading=b.target.value,d(c(l({},r),{addToYourStay:f}))},placeholder:"Heading",className:"w-full border rounded-md p-2"}),e.jsx("textarea",{value:o.description,onChange:b=>{const f=[...r.addToYourStay];f[n].description=b.target.value,d(c(l({},r),{addToYourStay:f}))},placeholder:"Description",className:"w-full border rounded-md p-2"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("input",{type:"number",value:((t=o.rate)==null?void 0:t.amount)||0,onChange:b=>{const f=[...r.addToYourStay];f[n].rate=c(l({},f[n].rate),{amount:Number(b.target.value)}),d(c(l({},r),{addToYourStay:f}))},placeholder:"Rate Amount",className:"w-full border rounded-md p-2"}),e.jsxs("select",{value:((u=o.rate)==null?void 0:u.period)||"",onChange:b=>{const f=[...r.addToYourStay];f[n].rate=c(l({},f[n].rate),{period:b.target.value}),d(c(l({},r),{addToYourStay:f}))},className:"w-full border rounded-md p-2",children:[e.jsx("option",{value:"",children:"Default"}),e.jsx("option",{value:"per night",children:"Per Night"}),e.jsx("option",{value:"per day",children:"Per Day"})]})]}),e.jsx("button",{type:"button",onClick:()=>{const b=r.addToYourStay.filter((f,P)=>P!==n);d(c(l({},r),{addToYourStay:b}))},className:"text-red-500 hover:underline",children:"Remove Entry"})]},n)}),e.jsx("button",{type:"button",onClick:()=>{d(c(l({},r),{addToYourStay:[...r.addToYourStay,{heading:"",description:"",rate:{amount:0,period:"per night"}}]}))},className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-md transition-colors",children:"Add New Entry"})]}),e.jsx("div",{className:"mt-8",children:e.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 rounded-md transition-colors",children:a?"Update Hotel":"Add Hotel"})})]})]})})};export{ps as H};
