import{c as F,j as e,r as x,b as ce,i as ie,a as de,g as A,C as me}from"./index-CfYmzgbV.js";import{I as B}from"./Icons-BUNuGUNa.js";import{t as g,c as z,n as Q,s as O,f as h,a as xe,d as K}from"./format-C4BekRQj.js";const G=F(e.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"}),"ArrowBackIosNew"),J=F(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIos"),he=F(e.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt");function ue(o,a,r){const n=g(o,r==null?void 0:r.in);return isNaN(a)?z(o,NaN):(a&&n.setDate(n.getDate()+a),n)}function j(o,a,r){const n=g(o,r==null?void 0:r.in);if(isNaN(a))return z(o,NaN);if(!a)return n;const c=n.getDate(),m=z(o,n.getTime());m.setMonth(n.getMonth()+a+1,0);const C=m.getDate();return c>=C?m:(n.setFullYear(m.getFullYear(),m.getMonth(),c),n)}function R(o,a,r){const[n,c]=Q(r==null?void 0:r.in,o,a);return+O(n)==+O(c)}function fe(o,a){const r=g(o,a==null?void 0:a.in);return r.setDate(1),r.setHours(0,0,0,0),r}function q(o,a){return+g(o)>+g(a)}function D(o,a){return+g(o)<+g(a)}function M(o,a,r){const[n,c]=Q(r==null?void 0:r.in,o,a);return n.getFullYear()===c.getFullYear()&&n.getMonth()===c.getMonth()}const be=({setCheckInDate:o,setCheckOutDate:a,setOpenCalender:r,hotelCode:n})=>{const[c,m]=x.useState(new Date),C=j(c,1),{closeHotelModal:U}=ce(),[t,S]=x.useState(null),[l,N]=x.useState(null),[T,V]=x.useState(!1),[_,X]=x.useState(null),[v,y]=x.useState(!1),E=x.useRef(null),d=JSON.parse(localStorage.getItem("hotelInfo")),w=t&&l&&(d==null?void 0:d.hotelCode)&&(d==null?void 0:d.authKey),{data:Z,isLoading:H}=ie(w?d.hotelCode:null,w?d.authKey:null,w?h(t,"yyyy-MM-dd"):null,w?h(l,"yyyy-MM-dd"):null);x.useEffect(()=>{const s=localStorage.getItem("checkInDate"),f=localStorage.getItem("checkOutDate");s&&f&&(S(new Date(s)),N(new Date(f)))},[]);const ee=s=>{!t||t&&l?(S(s),N(null),y(!1)):D(s,t)?(S(s),y(!1)):K(s,t)>30?(N(s),y(!0)):(N(s),y(!1))},te=s=>{t&&!l&&X(s)},re=de(),ae=async()=>{if(V(!0),!t||!l)return;const s=h(t,"yyyy-MM-dd"),f=h(l,"yyyy-MM-dd");if(o(s),a(f),localStorage.setItem("checkInDate",s),localStorage.setItem("checkOutDate",f),n||d!=null&&d.hotelCode)try{await new Promise(p=>{const k=()=>{Z?p():H?setTimeout(k,100):p()};k()}),re(`/hotels/${n||(d==null?void 0:d.hotelCode)}`),U(),r(!1)}catch(p){console.error("Error handling confirmation:",p)}},se=["S","M","T","W","T","F","S"],L=(s,f,p)=>{const k=xe(fe(s)),le=Array.from({length:42},(i,b)=>ue(k,b));return e.jsxs("div",{className:"calendar-month w-full lg:w-[48%] flex flex-col gap-4 relative  p-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[f&&e.jsx("button",{onClick:()=>m(j(c,-1)),className:`text-2xl hidden  rounded-full md:flex items-center justify-center w-10 h-10 transition-all transform hover:scale-105
                ${M(c,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer shadow-md"}`,disabled:M(c,new Date),"aria-label":"Previous month",children:e.jsx(G,{style:{width:"16px",height:"16px"}})}),e.jsx("h2",{className:"font-bold text-xl text-center w-full md:text-2xl text-primary-green",children:h(s,"MMMM yyyy")}),p&&e.jsx("button",{onClick:()=>m(j(c,1)),className:"text-2xl text-white bg-primary-green hover:bg-primary-green/90 rounded-full hidden md:flex items-center justify-center w-10 h-10 shadow-md cursor-pointer transition-all transform hover:scale-105","aria-label":"Next month",children:e.jsx(J,{style:{width:"16px",height:"16px"}})})]}),e.jsxs("div",{className:"px-1 md:px-4",children:[e.jsx("div",{className:"calendar-header grid grid-cols-7 text-sm md:text-base text-center font-medium text-gray-500 pb-2 border-b border-gray-100",children:se.map((i,b)=>e.jsx("div",{className:"py-2",children:i},b))}),e.jsx("div",{className:"calendar-days grid grid-cols-7 gap-y-2 sm:gap-y-3 pt-2",children:le.map((i,b)=>{const u=h(i,"M")===h(s,"M"),I=u&&t&&R(i,t),P=u&&l&&R(i,l),W=_&&t&&!l&&u&&q(i,t)&&D(i,_),Y=u&&t&&l&&q(i,t)&&D(i,l),$=D(i,O(new Date)),oe=R(i,new Date);return e.jsx("div",{className:`day-cell flex items-center justify-center h-10 sm:h-12 relative
                    transition-all duration-200 
                    ${u?"current-month":"other-month opacity-0"} 
                    ${I?"range-start bg-primary-green rounded-l-full z-10":""} 
                    ${P?"range-end bg-primary-green rounded-r-full z-10":""} 
                    ${Y||W?"in-range bg-primary-green/20":""} 
                    ${$?"text-gray-300 cursor-not-allowed":u?"hover:bg-primary-green/10 cursor-pointer":""} 
                    ${oe&&!I?"today ring-2 ring-primary-green/30 ring-inset":""}
                    `,onClick:()=>u&&!$&&ee(i),onMouseEnter:()=>u&&!$&&te(i),children:u&&e.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-full
                      text-sm md:text-base font-medium
                      ${I||P?"bg-primary-green text-white transform scale-110 shadow-md z-20":Y||W?"text-primary-green":""}
                    `,children:h(i,"d")})},b)})})]})]})},ne=()=>{if(t&&l){const s=K(l,t);return s===1?"1 Night":`${s} Nights`}return""};return x.useEffect(()=>{v&&E.current&&A.fromTo(E.current,{opacity:0,y:-20,scale:.95},{opacity:1,y:0,scale:1,duration:.5,ease:"back.out(1.7)"})},[v]),x.useEffect(()=>{A.fromTo(".Calender",{x:300,opacity:0},{duration:.8,x:0,opacity:1,ease:"power3.out"}),A.fromTo(".footer",{y:50,opacity:0},{duration:.8,y:0,opacity:1,ease:"power3.out",delay:.3})},[]),e.jsxs("div",{className:"calendar-container flex flex-col justify-end relative",children:[e.jsxs("div",{className:"flex flex-col h-[75vh] overflow-y-auto md:rounded-t-xl md:h-auto Calender max-h-[85vh] bg-white lg:w-[95%] w-full md:p-6 lg:flex-row gap-6 shadow-lg",children:[v&&e.jsx("div",{ref:E,className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-30 \r
              bg-white rounded-xl shadow-xl p-5 md:p-6 max-w-[90%] w-[320px] md:w-[360px]`,children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-primary-green/10 rounded-full flex items-center justify-center mb-3",children:e.jsx(B,{name:"calendar",className:"w-6 h-6 md:w-7 md:h-7 text-primary-green"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-primary-dark-green mb-2",children:"Planning a long stay?"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base mb-4",children:"Currently, we don't support online bookings for more than 30 nights. However, you can tell us about your plans and we'll make it happen."}),e.jsx("button",{className:`bg-primary-dark-green hover:bg-primary-green text-white font-bold px-6 py-3 rounded-lg \r
                  transition-all duration-300 shadow-md w-full`,onClick:()=>window.location.href="/booking-form",children:"Get in touch"}),e.jsx("button",{className:"mt-3 text-gray-500 hover:text-gray-700 text-sm font-medium",onClick:()=>y(!1),children:"Continue with selection"})]})}),v&&e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm z-20",onClick:()=>y(!1)}),e.jsxs("div",{className:"flex flex-col w-full gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-4 md:hidden",children:[e.jsx("button",{onClick:()=>m(j(c,-1)),className:`rounded-full flex items-center justify-center w-8 h-8 
                ${M(c,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer"}`,disabled:M(c,new Date),children:e.jsx(G,{style:{width:"12px",height:"12px"}})}),e.jsx("h2",{className:"font-bold text-lg text-primary-green",children:"Select your stay dates"}),e.jsx("button",{onClick:()=>m(j(c,1)),className:"text-white bg-primary-green hover:bg-primary-green/90 rounded-full flex items-center justify-center w-8 h-8",children:e.jsx(J,{style:{width:"12px",height:"12px"}})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full gap-6",children:[L(c,!0,!1),L(C,!1,!0)]})]})]}),e.jsx("button",{onClick:()=>r(!1),className:"absolute right-4 top-4 text-gray-500 hover:text-gray-700 transition-colors bg-white/80 hover:bg-white rounded-full p-1 shadow-md z-20","aria-label":"Close calendar",children:e.jsx(me,{})}),e.jsx("div",{className:"footer border-t border-gray-200 bg-white w-full py-4 md:py-6 sticky bottom-0 shadow-lg ",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 items-center px-4 md:px-8",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full md:w-auto md:max-w-[60%] bg-gray-50 px-4 py-3 md:px-6 md:py-4 rounded-xl gap-3 shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(B,{name:"calendar",className:"w-5 h-5 md:w-6 md:h-6 text-primary-green mr-2"}),e.jsxs("div",{className:`flex flex-col ${T&&!t?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check in"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:t?h(t,"EEE, MMM d"):"Select date"})]})]}),e.jsx(he,{className:"text-primary-green mx-1 md:mx-2"}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:`flex flex-col ${T&&!l?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check out"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:l?h(l,"EEE, MMM d"):"Select date"})]})}),t&&l&&e.jsx("div",{className:"flex items-center justify-center text-xs md:text-sm font-medium text-primary-green bg-primary-green/10 rounded-full px-3 py-1 ml-2",children:ne()})]}),e.jsx("button",{onClick:ae,disabled:!t||!l||w&&H,className:`w-full md:w-auto font-bold text-white px-6 py-3 md:py-4 rounded-xl shadow-lg transition-all duration-300 
              ${!t||!l?"bg-gray-300 cursor-not-allowed":"bg-primary-dark-green hover:bg-primary-green transform hover:scale-105"}`,children:"Confirm Dates"})]})})]})};export{he as A,be as C};
