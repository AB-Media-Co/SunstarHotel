import{c as T,j as e,r as x,b as ie,q as de,a as me,i as z,o as Y,V as xe}from"./index-C7QLwDQ4.js";import{t as g,c as R,n as J,s as F,f as h,a as he,d as B}from"./format-C4BekRQj.js";const K=T(e.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),q=T(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),ue=T(e.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}));function fe(l,s,t){const n=g(l,t==null?void 0:t.in);return isNaN(s)?R(l,NaN):(s&&n.setDate(n.getDate()+s),n)}function j(l,s,t){const n=g(l,t==null?void 0:t.in);if(isNaN(s))return R(l,NaN);if(!s)return n;const o=n.getDate(),m=R(l,n.getTime());m.setMonth(n.getMonth()+s+1,0);const C=m.getDate();return o>=C?m:(n.setFullYear(m.getFullYear(),m.getMonth(),o),n)}function O(l,s,t){const[n,o]=J(t==null?void 0:t.in,l,s);return+F(n)==+F(o)}function ge(l,s){const t=g(l,s==null?void 0:s.in);return t.setDate(1),t.setHours(0,0,0,0),t}function G(l,s){return+g(l)>+g(s)}function k(l,s){return+g(l)<+g(s)}function M(l,s,t){const[n,o]=J(t==null?void 0:t.in,l,s);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}const be=({setCheckInDate:l,setCheckOutDate:s,setOpenCalender:t,hotelCode:n})=>{const[o,m]=x.useState(new Date),C=j(o,1),{closeHotelModal:V,setNights:Q}=ie(),[r,S]=x.useState(null),[c,N]=x.useState(null),[_,U]=x.useState(!1),[A,X]=x.useState(null),[y,p]=x.useState(!1),E=x.useRef(null),d=JSON.parse(localStorage.getItem("hotelInfo")),v=r&&c&&(d==null?void 0:d.hotelCode)&&(d==null?void 0:d.authKey),{data:Z,isLoading:ee}=de(v?d.hotelCode:null,v?d.authKey:null,v?h(r,"yyyy-MM-dd"):null,v?h(c,"yyyy-MM-dd"):null);x.useEffect(()=>{const a=localStorage.getItem("checkInDate"),f=localStorage.getItem("checkOutDate");a&&f&&(S(new Date(a)),N(new Date(f)))},[]);const te=a=>{!r||r&&c?(S(a),N(null),p(!1)):k(a,r)?(S(a),p(!1)):B(a,r)>30?(N(a),p(!0)):(N(a),p(!1))},re=a=>{r&&!c&&X(a)},ae=me(),se=async()=>{if(U(!0),!r||!c)return;const a=h(r,"yyyy-MM-dd"),f=h(c,"yyyy-MM-dd");if(l(a),s(f),localStorage.setItem("checkInDate",a),localStorage.setItem("checkOutDate",f),n||d!=null&&d.hotelCode)try{new Promise(w=>{const D=()=>{Z?w():ee?setTimeout(D,100):w()};D()}),ae(`/hotels/${n||(d==null?void 0:d.hotelCode)}`),V(),t(!1)}catch(w){console.error("Error handling confirmation:",w)}},ne=["S","M","T","W","T","F","S"],H=(a,f,w)=>{const D=he(ge(a)),oe=Array.from({length:42},(i,b)=>fe(D,b));return e.jsxs("div",{className:"calendar-month w-full lg:w-[48%] flex flex-col gap-4 relative  p-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[f&&e.jsx("button",{onClick:()=>m(j(o,-1)),className:`text-2xl hidden  rounded-full md:flex items-center justify-center w-10 h-10 transition-all transform hover:scale-105
                ${M(o,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer shadow-md"}`,disabled:M(o,new Date),"aria-label":"Previous month",children:e.jsx(K,{style:{width:"16px",height:"16px"}})}),e.jsx("h2",{className:"font-bold text-xl text-center w-full md:text-2xl text-primary-green",children:h(a,"MMMM yyyy")}),w&&e.jsx("button",{onClick:()=>m(j(o,1)),className:"text-2xl text-white bg-primary-green hover:bg-primary-green/90 rounded-full hidden md:flex items-center justify-center w-10 h-10 shadow-md cursor-pointer transition-all transform hover:scale-105","aria-label":"Next month",children:e.jsx(q,{style:{width:"16px",height:"16px"}})})]}),e.jsxs("div",{className:"px-1 md:px-4",children:[e.jsx("div",{className:"calendar-header grid grid-cols-7 text-sm md:text-base text-center font-medium text-gray-500 pb-2 border-b border-gray-100",children:ne.map((i,b)=>e.jsx("div",{className:"py-2",children:i},b))}),e.jsx("div",{className:"calendar-days grid grid-cols-7 gap-y-2 sm:gap-y-3 pt-2",children:oe.map((i,b)=>{const u=h(i,"M")===h(a,"M"),$=u&&r&&O(i,r),L=u&&c&&O(i,c),P=A&&r&&!c&&u&&G(i,r)&&k(i,A),W=u&&r&&c&&G(i,r)&&k(i,c),I=k(i,F(new Date)),ce=O(i,new Date);return e.jsx("div",{className:`day-cell flex items-center justify-center h-10 sm:h-12 relative
                    transition-all duration-200 
                    ${u?"current-month":"other-month opacity-0"} 
                    ${$?"range-start bg-primary-green rounded-l-full z-10":""} 
                    ${L?"range-end bg-primary-green rounded-r-full z-10":""} 
                    ${W||P?"in-range bg-primary-green/20":""} 
                    ${I?"text-gray-300 cursor-not-allowed":u?"hover:bg-primary-green/10 cursor-pointer":""} 
                    ${ce&&!$?"today ring-2 ring-primary-green/30 ring-inset":""}
                    `,onClick:()=>u&&!I&&te(i),onMouseEnter:()=>u&&!I&&re(i),children:u&&e.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-full
                      text-sm md:text-base font-medium
                      ${$||L?"bg-primary-green text-white transform scale-110 shadow-md z-20":W||P?"text-primary-green":""}
                    `,children:h(i,"d")})},b)})})]})]})},le=()=>{if(r&&c){const a=B(c,r);return Q(a),a===1?"1 Night":`${a} Nights`}return""};return x.useEffect(()=>{y&&E.current&&z.fromTo(E.current,{opacity:0,y:-20,scale:.95},{opacity:1,y:0,scale:1,duration:.5,ease:"back.out(1.7)"})},[y]),x.useEffect(()=>{z.fromTo(".Calender",{x:300,opacity:0},{duration:.8,x:0,opacity:1,ease:"power3.out"}),z.fromTo(".footer",{y:50,opacity:0},{duration:.8,y:0,opacity:1,ease:"power3.out",delay:.3})},[]),e.jsxs("div",{className:"calendar-container flex flex-col justify-end relative",children:[e.jsxs("div",{className:"flex flex-col h-[75vh] overflow-y-auto md:rounded-t-xl md:h-auto Calender max-h-[85vh] bg-white lg:w-[95%] w-full md:p-6 lg:flex-row gap-6 shadow-lg",children:[y&&e.jsx("div",{ref:E,className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-30 \r
              bg-white rounded-xl shadow-xl p-5 md:p-6 max-w-[90%] w-[320px] md:w-[360px]`,children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-primary-green/10 rounded-full flex items-center justify-center mb-3",children:e.jsx(Y,{name:"calendar",className:"w-6 h-6 md:w-7 md:h-7 text-primary-green"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-primary-dark-green mb-2",children:"Planning a long stay?"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base mb-4",children:"Currently, we don't support online bookings for more than 30 nights. However, you can tell us about your plans and we'll make it happen."}),e.jsx("button",{className:`bg-primary-dark-green hover:bg-primary-green text-white font-bold px-6 py-3 rounded-lg \r
                  transition-all duration-300 shadow-md w-full`,onClick:()=>window.location.href="/booking-form",children:"Get in touch"}),e.jsx("button",{className:"mt-3 text-gray-500 hover:text-gray-700 text-sm font-medium",onClick:()=>p(!1),children:"Continue with selection"})]})}),y&&e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm z-20",onClick:()=>p(!1)}),e.jsxs("div",{className:"flex flex-col w-full gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-4 md:hidden",children:[e.jsx("button",{onClick:()=>m(j(o,-1)),className:`rounded-full flex items-center justify-center w-8 h-8 
                ${M(o,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer"}`,disabled:M(o,new Date),children:e.jsx(K,{style:{width:"12px",height:"12px"}})}),e.jsx("h2",{className:"font-bold text-lg text-primary-green",children:"Select your stay dates"}),e.jsx("button",{onClick:()=>m(j(o,1)),className:"text-white bg-primary-green hover:bg-primary-green/90 rounded-full flex items-center justify-center w-8 h-8",children:e.jsx(q,{style:{width:"12px",height:"12px"}})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full gap-6",children:[H(o,!0,!1),H(C,!1,!0)]})]})]}),e.jsx("button",{onClick:()=>t(!1),className:"absolute right-4 top-4 text-gray-500 hover:text-gray-700 transition-colors bg-white/80 hover:bg-white rounded-full p-1 shadow-md z-20","aria-label":"Close calendar",children:e.jsx(xe,{})}),e.jsx("div",{className:"footer border-t border-gray-200 bg-white w-full py-4 md:py-6 sticky bottom-0 shadow-lg ",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between gap-4 items-center px-4 md:px-8",children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full md:w-auto md:max-w-[60%] bg-gray-50 px-4 py-3 md:px-6 md:py-4 rounded-xl gap-3 shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Y,{name:"calendar",className:"w-5 h-5 md:w-6 md:h-6 text-primary-green mr-2"}),e.jsxs("div",{className:`flex flex-col ${_&&!r?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check in"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:r?h(r,"EEE, MMM d"):"Select date"})]})]}),e.jsx(ue,{className:"text-primary-green mx-1 md:mx-2"}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:`flex flex-col ${_&&!c?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check out"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:c?h(c,"EEE, MMM d"):"Select date"})]})}),r&&c&&e.jsx("div",{className:"flex items-center justify-center text-xs md:text-sm font-medium text-primary-green bg-primary-green/10 rounded-full px-3 py-1 ml-2",children:le()})]}),e.jsx("button",{onClick:se,disabled:y,className:`w-full md:w-auto font-bold text-white px-6 py-3 md:py-4 rounded-xl shadow-lg transition-all duration-300 
              ${!r||!c||y?"bg-gray-300 cursor-not-allowed":"bg-primary-dark-green hover:bg-primary-green transform hover:scale-105"}`,children:"Confirm Dates"})]})})]})};export{ue as A,be as C};
