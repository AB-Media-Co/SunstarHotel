var I=Object.defineProperty,k=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var U=Object.prototype.hasOwnProperty,G=Object.prototype.propertyIsEnumerable;var N=(a,s,t)=>s in a?I(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,C=(a,s)=>{for(var t in s||(s={}))U.call(s,t)&&N(a,t,s[t]);if(y)for(var t of y(s))G.call(s,t)&&N(a,t,s[t]);return a},S=(a,s)=>k(a,R(s));import{j as e,a as M,r as E,l as V,m as $,d as q,L as B,n as A}from"./index-_uP16iPH.js";import{S as J}from"./Save-Dt6rRFSy.js";import{c as K}from"./createSvgIcon-rhATFnDX.js";import{E as O}from"./Edit-qnXTmVJ0.js";import"./clsx-B-dksMZM.js";const Q=K(e.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12z"})),D=()=>{const{adminProfile:a,profileLoading:s,profileError:t}=M(),[o,d]=E.useState(!1),[l,g]=E.useState({}),{mutate:P,isLoading:u}=V();if($(),q(),s)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsx(B,{fullScreen:!1,size:"md"})});if(t)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[e.jsx("h2",{className:"text-2xl font-semibold text-red-600 mb-2",children:"Error Loading Profile"}),e.jsx("p",{className:"text-gray-600",children:t.message||"Something went wrong. Please try again later."})]});if(!a)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[e.jsx("h2",{className:"text-2xl font-semibold text-gray-800 mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600",children:"Please check if the user exists or refresh the page."})]});const{username:m,email:h,phone:j,role:f,gender:p,age:b,allowedCities:v,allowedHotels:w,createdAt:H,updatedAt:F}=a.data;console.log(a);const L=()=>{d(!o),g({username:m,email:h,phone:j,gender:p,age:b,allowedCities:v.join(","),allowedHotels:w.join(",")})},r=x=>{g(S(C({},l),{[x.target.name]:x.target.value}))},z=()=>{const x={username:l==null?void 0:l.username,email:l==null?void 0:l.email,phone:l==null?void 0:l.phone,gender:l==null?void 0:l.gender,age:l==null?void 0:l.age,allowedCities:l.allowedCities?l.allowedCities.split(",").map(c=>c.trim()):[],allowedHotels:l.allowedHotels?l.allowedHotels.split(",").map(c=>c.trim()):[]};P(x,{onSuccess:()=>{A.success("Profile updated successfully"),d(!1)},onError:c=>{A.error(c.message||"Failed to update profile")}})};return e.jsx("div",{className:"flex items-center justify-center min-h-screen pt-16 bg-gray-50 px-4",children:e.jsxs("div",{className:"w-full max-w-2xl relative flex flex-col bg-white rounded-lg shadow-md border border-gray-200",children:[e.jsxs("div",{className:"bg-gray-100 px-8 py-6 text-center",children:[e.jsx("div",{className:"w-20 h-20 capitalize mx-auto rounded-full bg-gray-200 flex items-center justify-center text-4xl font-semibold text-gray-700",children:m[0].toUpperCase()}),e.jsx("h2",{className:"text-2xl font-semibold mt-4 text-gray-800",children:m}),e.jsx("p",{className:"text-sm font-medium text-gray-500 capitalize",children:f})]}),e.jsx("div",{className:"p-8 flex flex-col w-full gap-6 bg-gray-50",children:o?e.jsxs(e.Fragment,{children:[e.jsx(i,{label:"Name",name:"username",value:l.username,onChange:r}),e.jsx(i,{label:"Email",name:"email",value:l.email,onChange:r}),e.jsx(i,{label:"Phone",name:"phone",value:l.phone,onChange:r}),e.jsx(i,{label:"Gender",name:"gender",value:l.gender,onChange:r}),e.jsx(i,{label:"Age",name:"age",value:l.age,onChange:r,type:"number"}),e.jsx(i,{label:"Allowed Cities (comma-separated)",name:"allowedCities",value:l.allowedCities,onChange:r}),e.jsx(i,{label:"Allowed Hotels (comma-separated)",name:"allowedHotels",value:l.allowedHotels,onChange:r})]}):e.jsxs(e.Fragment,{children:[e.jsx(n,{label:"Name",value:m}),e.jsx(n,{label:"Email",value:h}),e.jsx(n,{label:"Phone",value:j}),e.jsx(n,{label:"Gender",value:p}),e.jsx(n,{label:"Age",value:b}),e.jsx(n,{label:"Role",value:f}),e.jsx(n,{label:"Allowed Cities",value:v.join(", ")||"None"}),e.jsx(n,{label:"Allowed Hotels",value:w.join(", ")||"None"}),e.jsx(n,{label:"Created At",value:new Date(H).toLocaleDateString()}),e.jsx(n,{label:"Updated At",value:new Date(F).toLocaleDateString()})]})}),e.jsx("div",{className:"flex absolute right-0 justify-end p-6 gap-4 bg-gray-100",children:o?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:z,disabled:u,className:`p-2 bg-green-500 text-white rounded-md hover:bg-green-600 flex items-center ${u?"opacity-50 cursor-not-allowed":""}`,children:e.jsx(J,{fontSize:"small"})}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 flex items-center",children:e.jsx(Q,{fontSize:"small"})})]}):e.jsx(e.Fragment,{children:e.jsx("button",{onClick:L,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center",children:e.jsx(O,{fontSize:"small"})})})})]})})},i=({label:a,name:s,value:t,onChange:o,type:d="text"})=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("label",{className:"text-sm font-medium text-gray-500 mb-1",children:a}),e.jsx("input",{type:d,name:s,value:t,onChange:o,className:"px-4 py-2 border rounded-md text-gray-800 focus:outline-none focus:ring-2 focus:ring-blue-400"})]}),n=({label:a,value:s})=>e.jsxs("div",{className:"flex justify-between w-full items-center border-b last:border-0 pb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:[a,":"]}),e.jsx("span",{className:"text-sm text-gray-800",children:s})]});export{D as default};
