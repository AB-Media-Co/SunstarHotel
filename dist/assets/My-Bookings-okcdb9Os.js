var E=(l,d,r)=>new Promise((h,i)=>{var c=a=>{try{g(r.next(a))}catch(u){i(u)}},x=a=>{try{g(r.throw(a))}catch(u){i(u)}},g=a=>a.done?h(a.value):Promise.resolve(a.value).then(c,x);g((r=r.apply(l,d)).next())});import{r as n,b as H,j as e}from"./index-Kj3knSog.js";import{useGetHotels as Y}from"./useHotelHook2-CoeoE2sM.js";import{a as q}from"./pushBookingHook-CGM-rM8G.js";import{e as W}from"./useUser-CSJYEhW5.js";import{C as y,R as X,a as F,b as T}from"./refresh-cw-oi5fPo_h.js";import{T as A}from"./trash-2-D2OKwWs1.js";import{C as _}from"./chevron-down-BK6WoyVq.js";import{S as J,F as Q}from"./search-DHCdScb4.js";import{c as V}from"./createLucideIcon-BJzqg999.js";import{C as L}from"./calendar-Bqpa6Fmn.js";import{B as Z}from"./building-DebJTX_Y.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=V("Bed",[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]]),se=({status:l,bookingStatus:d})=>d==="Confirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-green-100 to-emerald-100 text-green-800 border border-green-200",children:[e.jsx(F,{className:"w-3 h-3 mr-1.5"}),"Confirmed"]}):d==="Unconfirmed Reservation"?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-amber-100 to-yellow-100 text-amber-800 border border-amber-200",children:[e.jsx(y,{className:"w-3 h-3 mr-1.5"}),"Unconfirmed"]}):l==="Cancelled"?e.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-red-100 to-rose-100 text-red-800 border border-red-200",children:[e.jsx(T,{className:"w-3 h-3 mr-1.5"}),"Cancelled"]}):e.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gradient-to-r from-gray-100 to-slate-100 text-gray-800 border border-gray-200",children:d}),N=l=>new Date(l).toLocaleDateString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric"}),M=l=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR"}).format(l),re=({label:l,icon:d,secondary:r,danger:h,onClick:i})=>{let c="bg-[#5BBEBC] text-white hover:bg-[#4BA9A6]";return r&&(c="bg-gray-100 text-gray-700 hover:bg-gray-200"),h&&(c="bg-red-100 text-red-700 hover:bg-red-200"),e.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition ${c}`,children:[d,l]})};function ue(){var k;const[l,d]=n.useState(""),[r,h]=n.useState(null),[i,c]=n.useState(!1),[x,g]=n.useState(""),[a,u]=n.useState("all"),[I,p]=n.useState(!1),[m,v]=n.useState(null),[w,C]=n.useState(!1),{setIsNavColor:j}=H();n.useEffect(()=>(j(!0),()=>{j(!1)}),[j]),n.useEffect(()=>{window.scrollTo(0,0)},[]);const{data:o,isLoading:B,error:D}=Y(),G=W(),{data:t,isLoading:S,error:K,refetch:R}=q({hotelCode:r==null?void 0:r.hotelCode,email:l,apiKey:r==null?void 0:r.authKey});n.useEffect(()=>{const s=localStorage.getItem("userEmail")||"prakash@abmediaco.com";d(s),o!=null&&o.hotels&&o.hotels.length>0&&h(o.hotels[0])},[o]);const O=()=>{R()},P=s=>{console.log(s),h(s),c(!1)},U=s=>{v(s),p(!0)},z=()=>E(this,null,function*(){if(!m||!r){toast.error("No booking selected or hotel information missing");return}C(!0);try{yield G.mutateAsync({hotelCode:r.hotelCode,apiKey:r.authKey,reservationNo:m.ReservationNo}),yield R(),p(!1),v(null)}catch(s){console.error("Booking cancellation error:",s)}finally{C(!1)}}),b=((k=t==null?void 0:t.BookingList)==null?void 0:k.filter(s=>{const f=s.GuestName.toLowerCase().includes(x.toLowerCase())||s.ReservationNo.toLowerCase().includes(x.toLowerCase()),$=a==="all"||a==="confirmed"&&s.BookingStatus==="Confirmed Reservation"||a==="unconfirmed"&&s.BookingStatus==="Unconfirmed Reservation"||a==="cancelled"&&s.Status==="Cancelled";return f&&$}))||[];return B?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:e.jsx("div",{className:"content  mx-auto px-4 py-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-10 w-64 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl mb-4"}),e.jsx("div",{className:"h-6 w-96 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"grid gap-6",children:[1,2,3].map(s=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-8",children:e.jsxs("div",{className:"animate-pulse space-y-6",children:[e.jsx("div",{className:"h-8 w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-6 w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-4 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-4 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})},s))})]})})}):D?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50 flex items-center justify-center",children:e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-8 flex items-start shadow-2xl max-w-md",children:[e.jsx(y,{className:"h-6 w-6 mr-3 mt-1 text-red-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Connection Error"}),e.jsx("p",{className:"text-red-700",children:"Failed to load hotel information. Please check your connection and try again."})]})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-white to-cyan-50",children:[I&&e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:e.jsx("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 transform transition-all",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:e.jsx(A,{className:"h-8 w-8 text-red-600"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Cancel Booking"}),e.jsxs("p",{className:"text-gray-600 mb-6",children:["Are you sure you want to cancel the booking for ",e.jsx("span",{className:"font-semibold",children:m==null?void 0:m.GuestName}),"?",e.jsx("br",{}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Reservation #",m==null?void 0:m.ReservationNo]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-xl font-medium transition-colors",children:"Keep Booking"}),e.jsx("button",{onClick:z,className:"flex-1 px-4 py-2 text-white bg-red-600 hover:bg-red-700 rounded-xl font-medium transition-colors flex justify-center items-center",disabled:w,children:w?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4l3-3-3-3v4a8 8 0 01-8 8z"})]}),"Cancelling..."]}):"Cancel Booking"})]})]})})}),e.jsxs("div",{className:"content pt-24 mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-12",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"My Bookings"}),e.jsx("p",{className:"text-lg text-gray-500",children:"Manage and review your hotel reservations"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:O,className:"flex items-center gap-2 px-5 py-3 text-white bg-[#5BBEBC] hover:bg-[#4BA9A6] rounded-xl shadow-md transition",children:[e.jsx(X,{className:"w-5 h-5"})," Refresh"]})})]}),(o==null?void 0:o.hotels)&&o.hotels.length>0&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md mb-10 border border-gray-200",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"font-semibold text-xl text-gray-900 mb-2",children:"Select Hotel"}),e.jsx("p",{className:"text-gray-500",children:"Choose your hotel to load bookings"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("button",{className:"w-full bg-white border border-gray-300 py-4 px-6 rounded-lg text-left text-gray-900 font-medium flex justify-between items-center",onClick:()=>c(!i),children:[r?r.name:"Choose Hotel",e.jsx(_,{className:`w-5 h-5 transition-transform ${i?"rotate-180":""}`})]}),i&&e.jsx("div",{className:"absolute w-full mt-2 rounded-lg border border-gray-200 shadow-lg bg-white z-20",children:o.hotels.map(s=>{var f;return e.jsx("button",{onClick:()=>P(s),className:"w-full text-left px-6 py-4 hover:bg-[#F9FAFB]",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"text-sm text-gray-500",children:(f=s.location)==null?void 0:f.hotelAddress})]}),e.jsx("span",{className:"px-3 py-1 rounded-full text-sm bg-[#5BBEBC]/20 text-[#5BBEBC]",children:s.hotelCode})]})},s._id)})})]})]}),(t==null?void 0:t.BookingList)&&t.BookingList.length>0&&e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20 p-6 mb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(J,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",placeholder:"Search by guest name or reservation number...",value:x,onChange:s=>g(s.target.value),className:"w-full pl-12 pr-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5 text-gray-400"}),e.jsxs("select",{value:a,onChange:s=>u(s.target.value),className:"px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 bg-white min-w-[140px]",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"unconfirmed",children:"Unconfirmed"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]})]})})]}),(t==null?void 0:t.RoomList)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-[#5BBEBC] rounded-xl",children:e.jsx(ee,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Total Rooms"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.RoomList.TotalActiveRoomInHotel})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-[#FDC114] rounded-xl",children:e.jsx(F,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Occupied"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.RoomList.TotalOccupiedRooms})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 border border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-4 bg-red-500 rounded-xl",children:e.jsx(T,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 font-medium mb-1",children:"Blocked"}),e.jsx("p",{className:"text-3xl font-bold text-gray-900",children:t.RoomList.TotalBlockRooms})]})]})})]}),S&&e.jsx("div",{className:"grid gap-8",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-white/20",children:[e.jsx("div",{className:"p-8 border-b border-gray-100",children:e.jsxs("div",{className:"animate-pulse flex justify-between items-start",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-8 w-48 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"}),e.jsx("div",{className:"h-5 w-32 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsx("div",{className:"h-8 w-24 bg-gradient-to-r from-gray-200 to-gray-300 rounded-xl"})]})}),e.jsx("div",{className:"p-8",children:e.jsxs("div",{className:"animate-pulse grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-5 w-full bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-5 w-3/4 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"}),e.jsx("div",{className:"h-5 w-1/2 bg-gradient-to-r from-gray-200 to-gray-300 rounded-lg"})]})]})})]},s))}),K&&e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm border border-red-200 text-red-800 rounded-2xl p-8 flex items-start shadow-2xl",children:[e.jsx(y,{className:"h-6 w-6 mr-3 mt-1 text-red-500"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"Failed to Load Bookings"}),e.jsx("p",{className:"text-red-700",children:"Please check your connection and try again. If the problem persists, contact support."})]})]}),b.length>0?e.jsxs("div",{className:"space-y-8",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h2",{className:"text-3xl font-bold text-gray-900",children:["Your Reservations",e.jsx("span",{className:"ml-3 inline-flex items-center px-4 py-2 rounded-full text-lg font-semibold bg-gradient-to-r from-indigo-100 to-purple-100 text-indigo-800",children:b.length})]})}),e.jsx("div",{className:"grid gap-6",children:b.map(s=>e.jsxs("div",{className:"bg-white border border-gray-200 rounded-xl shadow-md p-6 hover:shadow-lg transition-all",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[s.GuestName.trim(),e.jsx(se,{status:s.Status,bookingStatus:s.BookingStatus})]}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Reservation #",s.ReservationNo]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xl font-bold text-[#5BBEBC]",children:M(s.TotalInclusiveTax)}),e.jsx("p",{className:"text-xs text-gray-500",children:"Total Amount"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4 text-sm text-gray-700",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Stay:"})," ",N(s.ArrivalDate)," - ",N(s.DepartureDate)," (",s.NoOfNights," nights)"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Room:"})," ",s.Room," #",s.RoomNo]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Guests:"})," ",s.Adult," Adult",s.Child>0?`, ${s.Child} Child`:""]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.Email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Mobile:"})," ",s.Mobile]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Payment:"})," ",s.TransactionStatus]}),s.DueAmount>0&&e.jsxs("p",{className:"font-semibold text-red-500",children:["Due: ",M(s.DueAmount)]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-xs text-gray-500 border-t pt-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 mb-3 md:mb-0",children:[e.jsxs("span",{children:["Booked on: ",N(s.ReservationDate)]}),e.jsxs("span",{children:["Source: ",s.Source]}),e.jsxs("span",{children:["Folio: ",s.FolioNo]})]}),e.jsx("div",{className:"flex gap-3",children:s.Status!=="Cancelled"&&s.BookingStatus!=="Cancelled"&&e.jsx(re,{label:"Cancel",icon:e.jsx(A,{className:"w-4 h-4"}),danger:!0,onClick:()=>U(s)})})]})]},s.ReservationNo))})]}):!S&&r&&e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl text-center py-16 px-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"p-6 bg-gradient-to-br from-gray-100 to-slate-100 rounded-full",children:e.jsx(L,{className:"w-12 h-12 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No bookings found"}),e.jsx("p",{className:"text-gray-600 text-lg max-w-md",children:x||a!=="all"?"No bookings match your current search or filter criteria.":`You don't have any bookings for ${r.name} yet. Start planning your next luxurious stay!`})]}),!x&&a==="all"&&e.jsxs("button",{className:"mt-4 inline-flex items-center justify-center px-8 py-4 bg-gradient-to-r from-indigo-600 to-purple-600 text-white rounded-xl font-semibold shadow-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 hover:scale-105",children:[e.jsx(L,{className:"w-5 h-5 mr-2"}),"Make a Booking"]})]})}),!r&&!B&&e.jsx("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl text-center py-16 px-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx("div",{className:"p-6 bg-gradient-to-br from-indigo-100 to-purple-100 rounded-full",children:e.jsx(Z,{className:"w-12 h-12 text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Select a hotel"}),e.jsx("p",{className:"text-gray-600 text-lg max-w-md",children:"Please select a hotel from the dropdown above to view your amazing bookings and reservations."})]})]})})]})]})}export{ue as default};
