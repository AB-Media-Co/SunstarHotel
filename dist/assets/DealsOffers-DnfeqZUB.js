var Ne=Object.defineProperty,Ge=Object.defineProperties;var Ue=Object.getOwnPropertyDescriptors;var te=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ye=Object.prototype.propertyIsEnumerable;var ge=(o,n,s)=>n in o?Ne(o,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[n]=s,j=(o,n)=>{for(var s in n||(n={}))ve.call(n,s)&&ge(o,s,n[s]);if(te)for(var s of te(n))ye.call(n,s)&&ge(o,s,n[s]);return o},k=(o,n)=>Ge(o,Ue(n));var X=(o,n)=>{var s={};for(var r in o)ve.call(o,r)&&n.indexOf(r)<0&&(s[r]=o[r]);if(o!=null&&te)for(var r of te(o))n.indexOf(r)<0&&ye.call(o,r)&&(s[r]=o[r]);return s};import{j as e,r as v}from"./index-AsfY2M-N.js";import{D as $e}from"./Delete-DRhZUNCJ.js";import{E as Ve}from"./Edit-oY1FT9jR.js";import{L as ee}from"./LocalOffer-CI0P459_.js";import{c as q,a as ae,g as le,s as _,u as fe,d as ie,m as je,b as U,r as Fe,f as Ce}from"./createSvgIcon-qo7wo3dq.js";import{H as ke}from"./Hotel-CIuEwt0_.js";import{P as qe,a as V,C as _e}from"./Checkbox-C0o7ptD6.js";import{E as Ye}from"./ExpandMore-B_9yT26D.js";import{useGetHotels as Ze}from"./useHotelHook2-DcvbjV10.js";import{u as Je,a as Ke,b as Qe,c as Xe}from"./useOffersAndDealsHook-D8GnNWqz.js";import{p as eo,T as g,q as oo,d as to,B as c,P as Se,c as h,F as O,r as E,a as ne,I as De,S as We}from"./TextField-C4GxksxH.js";import{G as x,C as no,a as so}from"./Grid-CZCjkVh6.js";import{D as Ae,A as we,S as me}from"./Stack-BXqVTrhS.js";import{c as ce}from"./clsx-B-dksMZM.js";import{h as be,F as ro,u as ao,a as He,b as lo,f as io}from"./useFormControl-BujTOs7L.js";import{F as d,I as Re}from"./FormControlLabel-D512x3T_.js";import{S as co}from"./SwitchBase-DddFTDGA.js";import{M as Pe}from"./MenuItem-DIbsenIH.js";import{C as Ie}from"./Chip-rRGLqGKZ.js";import{C as uo,D as xo,a as mo,b as po,c as ho}from"./DialogTitle-CRhuvo2N.js";import"./index-CLRDah4M.js";import"./useThemeProps-3LT6cBRi.js";import"./hoist-non-react-statics.cjs-Cxfv-rx9.js";const pe=q(e.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"})),Me=q(e.jsx("path",{d:"M4 6h18V4H4c-1.1 0-2 .9-2 2v11H0v3h14v-3H4zm19 2h-6c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h6c.55 0 1-.45 1-1V9c0-.55-.45-1-1-1m-1 9h-4v-7h4z"})),fo=q(e.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"})),ze=q(e.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}));function jo(o){return le("MuiFormGroup",o)}ae("MuiFormGroup",["root","row","error"]);const bo=o=>{const{classes:n,row:s,error:r}=o;return ie({root:["root",s&&"row",r&&"error"]},jo,n)},go=_("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:s}=o;return[n.root,s.row&&n.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),he=v.forwardRef(function(n,s){const r=fe({props:n,name:"MuiFormGroup"}),D=r,{className:u,row:S=!1}=D,w=X(D,["className","row"]),A=be(),H=eo({props:r,muiFormControl:A,states:["error"]}),R=k(j({},r),{row:S,error:H.error}),y=bo(R);return e.jsx(go,j({className:ce(y.root,u),ownerState:R,ref:s},w))});function vo(o){return le("MuiInputAdornment",o)}const Oe=ae("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var Te;const yo=(o,n)=>{const{ownerState:s}=o;return[n.root,n[`position${U(s.position)}`],s.disablePointerEvents===!0&&n.disablePointerEvents,n[s.variant]]},Co=o=>{const{classes:n,disablePointerEvents:s,hiddenLabel:r,position:u,size:S,variant:w}=o,A={root:["root",s&&"disablePointerEvents",u&&`position${U(u)}`,w,r&&"hiddenLabel",S&&`size${U(S)}`]};return ie(A,vo,n)},ko=_("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:yo})(je(({theme:o})=>({display:"flex",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(o.vars||o).palette.action.active,variants:[{props:{variant:"filled"},style:{[`&.${Oe.positionStart}&:not(.${Oe.hiddenLabel})`]:{marginTop:16}}},{props:{position:"start"},style:{marginRight:8}},{props:{position:"end"},style:{marginLeft:8}},{props:{disablePointerEvents:!0},style:{pointerEvents:"none"}}]}))),se=v.forwardRef(function(n,s){const r=fe({props:n,name:"MuiInputAdornment"}),a=r,{children:u,className:S,component:w="div",disablePointerEvents:A=!1,disableTypography:H=!1,position:R,variant:y}=a,D=X(a,["children","className","component","disablePointerEvents","disableTypography","position","variant"]),W=be()||{};let P=y;y&&W.variant,W&&!P&&(P=W.variant);const l=k(j({},r),{hiddenLabel:W.hiddenLabel,size:W.size,disablePointerEvents:A,position:R,variant:P}),I=Co(l);return e.jsx(ro.Provider,{value:null,children:e.jsx(ko,k(j({as:w,ownerState:l,className:ce(I.root,S),ref:s},D),{children:typeof u=="string"&&!H?e.jsx(g,{color:"textSecondary",children:u}):e.jsxs(v.Fragment,{children:[R==="start"?Te||(Te=e.jsx("span",{className:"notranslate","aria-hidden":!0,children:"â€‹"})):null,u]})}))})}),So=q(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})),Do=q(e.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"})),Wo=_("span",{shouldForwardProp:Fe})({position:"relative",display:"flex"}),Ao=_(So)({transform:"scale(1)"}),wo=_(Do)(je(({theme:o})=>({left:0,position:"absolute",transform:"scale(0)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeIn,duration:o.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:o.transitions.create("transform",{easing:o.transitions.easing.easeOut,duration:o.transitions.duration.shortest})}}]})));function Le(o){const{checked:n=!1,classes:s={},fontSize:r}=o,u=k(j({},o),{checked:n});return e.jsxs(Wo,{className:s.root,ownerState:u,children:[e.jsx(Ao,{fontSize:r,className:s.background,ownerState:u}),e.jsx(wo,{fontSize:r,className:s.dot,ownerState:u})]})}const Be=v.createContext(void 0);function Ho(){return v.useContext(Be)}function Ro(o){return le("MuiRadio",o)}const Ee=ae("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Po=o=>{const{classes:n,color:s,size:r}=o,u={root:["root",`color${U(s)}`,r!=="medium"&&`size${U(r)}`]};return j(j({},n),ie(u,Ro,n))},Io=_(co,{shouldForwardProp:o=>Fe(o)||o==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(o,n)=>{const{ownerState:s}=o;return[n.root,s.size!=="medium"&&n[`size${U(s.size)}`],n[`color${U(s.color)}`]]}})(je(({theme:o})=>({color:(o.vars||o).palette.text.secondary,[`&.${Ee.disabled}`]:{color:(o.vars||o).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.vars?`rgba(${o.vars.palette.action.activeChannel} / ${o.vars.palette.action.hoverOpacity})`:Ce(o.palette.action.active,o.palette.action.hoverOpacity)}}},...Object.entries(o.palette).filter(He()).map(([n])=>({props:{color:n,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:o.vars?`rgba(${o.vars.palette[n].mainChannel} / ${o.vars.palette.action.hoverOpacity})`:Ce(o.palette[n].main,o.palette.action.hoverOpacity)}}})),...Object.entries(o.palette).filter(He()).map(([n])=>({props:{color:n,disabled:!1},style:{[`&.${Ee.checked}`]:{color:(o.vars||o).palette[n].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Mo(o,n){return typeof n=="object"&&n!==null?o===n:String(o)===String(n)}const zo=e.jsx(Le,{checked:!0}),Oo=e.jsx(Le,{}),b=v.forwardRef(function(n,s){var oe,Q,$;const r=fe({props:n,name:"MuiRadio"}),K=r,{checked:u,checkedIcon:S=zo,color:w="primary",icon:A=Oo,name:H,onChange:R,size:y="medium",className:D,disabled:W,disableRipple:P=!1,slots:l={},slotProps:I={},inputProps:a}=K,M=X(K,["checked","checkedIcon","color","icon","name","onChange","size","className","disabled","disableRipple","slots","slotProps","inputProps"]),L=be();let m=W;L&&typeof m=="undefined"&&(m=L.disabled),m!=null||(m=!1);const Y=k(j({},r),{disabled:m,disableRipple:P,color:w,size:y}),f=Po(Y),B=Ho();let Z=u;const de=oo(R,B&&B.onChange);let p=H;B&&(typeof Z=="undefined"&&(Z=Mo(B.value,r.value)),typeof p=="undefined"&&(p=B.name));const J=(oe=I.input)!=null?oe:a,[ue,xe]=ao("root",{ref:s,elementType:Io,className:ce(f.root,D),shouldForwardComponentProp:!0,externalForwardedProps:j({slots:l,slotProps:I},M),getSlotProps:N=>k(j({},N),{onChange:(t,...i)=>{var z;(z=N.onChange)==null||z.call(N,t,...i),de(t,...i)}}),ownerState:Y,additionalProps:{type:"radio",icon:v.cloneElement(A,{fontSize:(Q=A.props.fontSize)!=null?Q:y}),checkedIcon:v.cloneElement(S,{fontSize:($=S.props.fontSize)!=null?$:y}),disabled:m,name:p,checked:Z,slots:l,slotProps:{input:typeof J=="function"?J(Y):J}}});return e.jsx(ue,k(j({},xe),{classes:f}))});function To(o){return le("MuiRadioGroup",o)}ae("MuiRadioGroup",["root","row","error"]);const Eo=o=>{const{classes:n,row:s,error:r}=o;return ie({root:["root",s&&"row",r&&"error"]},To,n)},F=v.forwardRef(function(n,s){const L=n,{actions:r,children:u,className:S,defaultValue:w,name:A,onChange:H,value:R}=L,y=X(L,["actions","children","className","defaultValue","name","onChange","value"]),D=v.useRef(null),W=Eo(n),[P,l]=lo({controlled:R,default:w,name:"RadioGroup"});v.useImperativeHandle(r,()=>({focus:()=>{let m=D.current.querySelector("input:not(:disabled):checked");m||(m=D.current.querySelector("input:not(:disabled)")),m&&m.focus()}}),[]);const I=io(s,D),a=to(A),M=v.useMemo(()=>({name:a,onChange(m){l(m.target.value),H&&H(m,m.target.value)},value:P}),[a,H,l,P]);return e.jsx(Be.Provider,{value:M,children:e.jsx(he,k(j({role:"radiogroup",ref:I,className:ce(W.root,S)},y),{children:u}))})}),re=["Mo","Tu","We","Th","Fr","Sa","Su"],it=()=>{var N;const{data:o,isLoading:n,error:s}=Ze(),r=o==null?void 0:o.hotels,{data:u,isLoading:S,error:w}=Je(),A=Ke(),H=Qe(),R=Xe(),[y,D]=v.useState(""),[W,P]=v.useState(!1),[l,I]=v.useState({name:"",description:"",discountPercent:0,offerCode:"",applyToAllHotels:!1,hotels:[],startDate:"",endDate:"",visibility:"everyone",daysOfWeek:[...re],platform:"mobileAndWeb",dealType:"standard",bookingRestrictionUnit:"none",minAdvance:"",maxAdvance:"",limitPromotionToHours:!1,startHour:"",endHour:""}),[a,M]=v.useState(null),[L,m]=v.useState(!1),Y=t=>{D(t.target.value)},f=t=>{const{name:i,value:z,type:T,checked:C}=t.target;I(G=>k(j({},G),{[i]:T==="checkbox"?C:z}))},B=t=>{const{value:i,checked:z}=t.target;I(T=>{let C=[...T.daysOfWeek];return z?C.includes(i)||C.push(i):C=C.filter(G=>G!==i),k(j({},T),{daysOfWeek:C})})},Z=t=>{t.preventDefault();let i=j({},l);!l.applyToAllHotels&&y&&(i.hotels=[y]),R.mutate(i),I({name:"",description:"",discountPercent:0,offerCode:"",applyToAllHotels:!1,hotels:[],startDate:"",endDate:"",visibility:"everyone",daysOfWeek:[...re],platform:"mobileAndWeb",dealType:"standard",bookingRestrictionUnit:"none",minAdvance:"",maxAdvance:"",limitPromotionToHours:!1,startHour:"",endHour:""}),D(""),P(!1)},de=t=>{M(t),m(!0)},p=t=>{const{name:i,value:z,type:T,checked:C}=t.target;M(G=>k(j({},G),{[i]:T==="checkbox"?C:z}))},J=t=>{const{value:i,checked:z}=t.target;M(T=>{let C=[...T.daysOfWeek||[]];return z?C.includes(i)||C.push(i):C=C.filter(G=>G!==i),k(j({},T),{daysOfWeek:C})})},ue=t=>{M(i=>k(j({},i),{hotels:[t.target.value]}))},xe=t=>{t.preventDefault(),H.mutate({id:a._id,updatedData:a}),M(null),m(!1)},K=()=>{M(null),m(!1)},oe=t=>{A.mutate(t)},Q=Array.isArray(u)?u:[],$=y?Q.filter(t=>(t==null?void 0:t.applyToAllHotels)||(t==null?void 0:t.hotels)&&(t==null?void 0:t.hotels.some(i=>(i==null?void 0:i._id)===y))):Q;return e.jsxs(c,{sx:{p:4,mt:8,minHeight:"100vh",background:""},children:[e.jsxs(c,{sx:{maxWidth:1400,mx:"auto"},children:[e.jsxs(c,{sx:{textAlign:"center",mb:6},children:[e.jsx(g,{variant:"h3",sx:{fontWeight:800,color:"Black",mb:1},children:"Deals & Offers Management"}),e.jsx(g,{variant:"h6",sx:{color:"rgba(255,255,255,0.9)",fontWeight:300},children:"Create and manage promotional deals for your hotels"})]}),e.jsxs(x,{container:!0,spacing:4,children:[e.jsx(x,{item:!0,xs:12,lg:5,children:e.jsxs(Se,{elevation:8,sx:{p:4,borderRadius:3,background:"white",position:"sticky",top:20},children:[e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:3},children:[e.jsx(ee,{sx:{fontSize:32,color:"#667eea",mr:2}}),e.jsx(g,{variant:"h5",sx:{fontWeight:700,color:"#333"},children:"Create New Deal"})]}),e.jsx(Ae,{sx:{mb:3}}),e.jsxs("form",{onSubmit:Z,children:[e.jsx(h,{label:"Deal Name",name:"name",value:l.name,onChange:f,fullWidth:!0,required:!0,margin:"normal",variant:"outlined",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(ee,{sx:{color:"#667eea"}})})}}),e.jsx(h,{label:"Description",name:"description",value:l.description,onChange:f,fullWidth:!0,required:!0,margin:"normal",multiline:!0,rows:3,variant:"outlined"}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Discount %",name:"discountPercent",type:"number",value:l.discountPercent,onChange:f,fullWidth:!0,required:!0,margin:"normal",variant:"outlined",InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(qe,{sx:{color:"#667eea"}})})}})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Offer Code",name:"offerCode",value:l.offerCode,onChange:f,fullWidth:!0,margin:"normal",variant:"outlined"})})]}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Start Date",name:"startDate",type:"date",value:l.startDate,onChange:f,fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(pe,{sx:{color:"#667eea"}})})}})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"End Date",name:"endDate",type:"date",value:l.endDate,onChange:f,fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(se,{position:"start",children:e.jsx(pe,{sx:{color:"#667eea"}})})}})})]}),e.jsx(c,{sx:{mt:3,p:2,bgcolor:"#f8f9fa",borderRadius:2},children:e.jsxs(O,{component:"fieldset",children:[e.jsxs(E,{component:"legend",sx:{fontWeight:600,color:"#333"},children:[e.jsx(ze,{sx:{fontSize:18,mr:1,verticalAlign:"middle"}}),"Visibility"]}),e.jsxs(F,{name:"visibility",value:l.visibility,onChange:f,row:!0,sx:{mt:1},children:[e.jsx(d,{value:"everyone",control:e.jsx(b,{}),label:"Everyone"}),e.jsx(d,{value:"secret",control:e.jsx(b,{}),label:"Members Only"})]})]})}),e.jsxs(c,{sx:{mt:3,p:2,bgcolor:"#f8f9fa",borderRadius:2},children:[e.jsx(g,{variant:"body1",sx:{fontWeight:600,mb:2,color:"#333"},children:"Days of Week"}),e.jsx(he,{row:!0,children:re.map(t=>e.jsx(d,{control:e.jsx(V,{checked:l.daysOfWeek.includes(t),onChange:B,value:t,sx:{"&.Mui-checked":{color:"#667eea"}}}),label:t},t))})]}),e.jsx(c,{sx:{mt:3,p:2,bgcolor:"#f8f9fa",borderRadius:2},children:e.jsxs(O,{component:"fieldset",children:[e.jsxs(E,{component:"legend",sx:{fontWeight:600,color:"#333"},children:[e.jsx(Me,{sx:{fontSize:18,mr:1,verticalAlign:"middle"}}),"Platform"]}),e.jsxs(F,{name:"platform",value:l.platform,onChange:f,row:!0,sx:{mt:1},children:[e.jsx(d,{value:"mobileAndWeb",control:e.jsx(b,{}),label:"Mobile & Web"}),e.jsx(d,{value:"mobileOnly",control:e.jsx(b,{}),label:"Mobile Only"})]})]})}),e.jsxs(c,{sx:{mt:3},children:[e.jsx(ne,{fullWidth:!0,variant:"outlined",onClick:()=>P(!W),endIcon:W?e.jsx(fo,{}):e.jsx(Ye,{}),sx:{borderColor:"#667eea",color:"#667eea","&:hover":{borderColor:"#764ba2",bgcolor:"rgba(102, 126, 234, 0.04)"}},children:"Advanced Booking Settings"}),e.jsx(_e,{in:W,children:e.jsxs(c,{sx:{mt:2,p:2,border:"1px solid #e0e0e0",borderRadius:2},children:[e.jsxs(O,{component:"fieldset",sx:{mb:2},children:[e.jsx(E,{component:"legend",sx:{fontWeight:600},children:"Booking Window"}),e.jsxs(F,{row:!0,name:"dealType",value:l.dealType,onChange:f,children:[e.jsx(d,{value:"lastMinute",control:e.jsx(b,{}),label:"Last Minute"}),e.jsx(d,{value:"earlyBooker",control:e.jsx(b,{}),label:"Early Booker"}),e.jsx(d,{value:"standard",control:e.jsx(b,{}),label:"No Restriction"})]})]}),l.dealType==="lastMinute"&&e.jsxs(e.Fragment,{children:[e.jsxs(O,{component:"fieldset",sx:{mb:2},children:[e.jsx(E,{component:"legend",children:"Unit"}),e.jsxs(F,{row:!0,name:"bookingRestrictionUnit",value:l.bookingRestrictionUnit,onChange:f,children:[e.jsx(d,{value:"days",control:e.jsx(b,{}),label:"Days"}),e.jsx(d,{value:"hours",control:e.jsx(b,{}),label:"Hours"})]})]}),e.jsx(h,{label:"Maximum Advance",name:"maxAdvance",type:"number",value:l.maxAdvance,onChange:f,fullWidth:!0,margin:"normal",size:"small"})]}),l.dealType==="earlyBooker"&&e.jsx(h,{label:"Minimum Advance (days)",name:"minAdvance",type:"number",value:l.minAdvance,onChange:f,fullWidth:!0,margin:"normal",size:"small"}),e.jsx(d,{control:e.jsx(V,{name:"limitPromotionToHours",checked:l.limitPromotionToHours,onChange:f}),label:"Limit to specific hours",sx:{mt:2}}),l.limitPromotionToHours&&e.jsxs(x,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Start Hour",name:"startHour",type:"number",value:l.startHour,onChange:f,fullWidth:!0,size:"small"})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"End Hour",name:"endHour",type:"number",value:l.endHour,onChange:f,fullWidth:!0,size:"small"})})]})]})})]}),e.jsxs(c,{sx:{mt:3,p:2,bgcolor:"#f8f9fa",borderRadius:2},children:[e.jsx(d,{control:e.jsx(V,{name:"applyToAllHotels",checked:l.applyToAllHotels,onChange:f,sx:{"&.Mui-checked":{color:"#667eea"}}}),label:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ke,{sx:{mr:1,color:"#667eea"}}),e.jsx(g,{sx:{fontWeight:600},children:"Apply to All Hotels"})]})}),!l.applyToAllHotels&&r&&r.length>0&&e.jsxs(O,{fullWidth:!0,variant:"outlined",sx:{mt:2},children:[e.jsx(De,{children:"Select Hotel"}),e.jsx(We,{value:y,label:"Select Hotel",onChange:Y,children:r.map(t=>e.jsx(Pe,{value:t._id,children:t.name},t._id))})]})]}),e.jsx(ne,{variant:"contained",type:"submit",fullWidth:!0,size:"large",sx:{mt:4,py:1.5,background:"linear-gradient(45deg, #667eea 30%, #764ba2 90%)",fontWeight:600,fontSize:"1.1rem",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.4)","&:hover":{boxShadow:"0 6px 16px rgba(102, 126, 234, 0.6)"}},children:"Create Deal"})]})]})}),e.jsx(x,{item:!0,xs:12,lg:7,children:e.jsxs(Se,{elevation:8,sx:{p:4,borderRadius:3,background:"white",minHeight:600},children:[e.jsx(c,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{sx:{fontSize:32,color:"#667eea",mr:2}}),e.jsxs(g,{variant:"h5",sx:{fontWeight:700,color:"#333"},children:["Active Deals (",$.length,")"]})]})}),e.jsx(Ae,{sx:{mb:3}}),S&&e.jsx(we,{severity:"info",sx:{mb:2},children:"Loading deals..."}),w&&e.jsx(we,{severity:"error",sx:{mb:2},children:"Error fetching deals"}),$.length>0?e.jsx(me,{spacing:3,children:$.map(t=>e.jsxs(no,{elevation:3,sx:{borderRadius:2,transition:"all 0.3s ease",border:"1px solid #e0e0e0","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 24px rgba(0,0,0,0.12)",borderColor:"#667eea"}},children:[e.jsxs(so,{children:[e.jsxs(c,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(c,{sx:{flex:1},children:[e.jsx(g,{variant:"h6",sx:{fontWeight:700,color:"#333",mb:1},children:t.name}),e.jsx(g,{variant:"body2",color:"text.secondary",sx:{mb:2},children:t.description})]}),e.jsx(Ie,{label:`${t.discountPercent}% OFF`,color:"primary",sx:{fontWeight:700,fontSize:"0.9rem",background:"linear-gradient(45deg, #667eea 30%, #764ba2 90%)"}})]}),e.jsxs(me,{spacing:1,children:[t.offerCode&&e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ee,{sx:{fontSize:16,mr:1,color:"#667eea"}}),e.jsxs(g,{variant:"body2",children:[e.jsx("strong",{children:"Code:"})," ",t.offerCode]})]}),t.startDate&&t.endDate&&e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(pe,{sx:{fontSize:16,mr:1,color:"#667eea"}}),e.jsxs(g,{variant:"body2",children:[new Date(t.startDate).toLocaleDateString()," - ",new Date(t.endDate).toLocaleDateString()]})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ze,{sx:{fontSize:16,mr:1,color:"#667eea"}}),e.jsx(g,{variant:"body2",children:t.visibility==="secret"?"Members Only":"Public"})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(Me,{sx:{fontSize:16,mr:1,color:"#667eea"}}),e.jsx(g,{variant:"body2",children:t.platform==="mobileOnly"?"Mobile Only":"Mobile & Web"})]}),e.jsxs(c,{sx:{display:"flex",alignItems:"center"},children:[e.jsx(ke,{sx:{fontSize:16,mr:1,color:"#667eea"}}),e.jsx(g,{variant:"body2",children:t.applyToAllHotels?"All Hotels":t.hotels.map(i=>i.name).join(", ")})]}),t.daysOfWeek&&t.daysOfWeek.length>0&&e.jsx(c,{sx:{mt:1},children:e.jsx(me,{direction:"row",spacing:.5,flexWrap:"wrap",children:t.daysOfWeek.map(i=>e.jsx(Ie,{label:i,size:"small",variant:"outlined",sx:{borderColor:"#667eea",color:"#667eea"}},i))})})]})]}),e.jsxs(uo,{sx:{justifyContent:"flex-end",px:2,pb:2},children:[e.jsx(Re,{color:"primary",onClick:()=>de(t),sx:{"&:hover":{bgcolor:"rgba(102, 126, 234, 0.1)"}},children:e.jsx(Ve,{})}),e.jsx(Re,{color:"error",onClick:()=>oe(t._id),sx:{"&:hover":{bgcolor:"rgba(244, 67, 54, 0.1)"}},children:e.jsx($e,{})})]})]},t._id))}):e.jsxs(c,{sx:{textAlign:"center",py:8},children:[e.jsx(ee,{sx:{fontSize:80,color:"#e0e0e0",mb:2}}),e.jsx(g,{variant:"h6",color:"text.secondary",children:"No deals available"}),e.jsx(g,{variant:"body2",color:"text.secondary",children:"Create your first deal to get started"})]})]})})]})]}),a&&e.jsxs(xo,{open:L,onClose:K,fullWidth:!0,maxWidth:"md",children:[e.jsx(mo,{sx:{background:"linear-gradient(45deg, #667eea 30%, #764ba2 90%)",color:"white",fontWeight:700},children:"Edit Deal"}),e.jsx(po,{sx:{mt:2},children:e.jsxs(c,{component:"form",sx:{mt:2},children:[e.jsx(h,{label:"Deal Name",name:"name",value:a.name,onChange:p,fullWidth:!0,required:!0,margin:"normal",variant:"outlined"}),e.jsx(h,{label:"Description",name:"description",value:a.description,onChange:p,fullWidth:!0,required:!0,margin:"normal",multiline:!0,rows:3,variant:"outlined"}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Discount Percent",name:"discountPercent",type:"number",value:a.discountPercent,onChange:p,fullWidth:!0,required:!0,margin:"normal",variant:"outlined"})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Offer Code",name:"offerCode",value:a.offerCode,onChange:p,fullWidth:!0,margin:"normal",variant:"outlined"})})]}),e.jsxs(x,{container:!0,spacing:2,children:[e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Start Date (Optional)",name:"startDate",type:"date",value:a.startDate?a.startDate.substring(0,10):"",onChange:p,fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0}})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"End Date (Optional)",name:"endDate",type:"date",value:a.endDate?a.endDate.substring(0,10):"",onChange:p,fullWidth:!0,margin:"normal",variant:"outlined",InputLabelProps:{shrink:!0}})})]}),e.jsxs(O,{component:"fieldset",sx:{mt:2},children:[e.jsx(E,{component:"legend",children:"Who will be able to see this promotion?"}),e.jsxs(F,{name:"visibility",value:a.visibility,onChange:p,row:!0,children:[e.jsx(d,{value:"everyone",control:e.jsx(b,{}),label:"Everyone"}),e.jsx(d,{value:"secret",control:e.jsx(b,{}),label:"Secret (Members Only)"})]})]}),e.jsxs(c,{sx:{mt:2},children:[e.jsx(g,{variant:"body1",sx:{mb:1},children:"Which day(s) of the week would you like to include?"}),e.jsx(he,{row:!0,children:re.map(t=>{var i;return e.jsx(d,{control:e.jsx(V,{checked:(i=a.daysOfWeek)==null?void 0:i.includes(t),onChange:J,value:t}),label:t},t)})})]}),e.jsxs(O,{component:"fieldset",sx:{mt:2},children:[e.jsx(E,{component:"legend",children:"Platform (Mobile Rate)"}),e.jsxs(F,{name:"platform",value:a.platform,onChange:p,row:!0,children:[e.jsx(d,{value:"mobileAndWeb",control:e.jsx(b,{}),label:"Mobile & Web"}),e.jsx(d,{value:"mobileOnly",control:e.jsx(b,{}),label:"Mobile Only"})]})]}),e.jsxs(c,{sx:{mt:3,p:2,border:"1px solid #ccc",borderRadius:2},children:[e.jsx(g,{variant:"h6",sx:{mb:1},children:"Bookable period"}),e.jsxs(O,{component:"fieldset",sx:{mb:2},children:[e.jsx(E,{component:"legend",sx:{fontWeight:"bold"},children:"How far in advance do customers need to book this promotion?"}),e.jsxs(F,{row:!0,name:"dealType",value:a.dealType||"standard",onChange:p,children:[e.jsx(d,{value:"lastMinute",control:e.jsx(b,{}),label:"Last Minute (days/hours or fewer)"}),e.jsx(d,{value:"earlyBooker",control:e.jsx(b,{}),label:"Early Booker (days or more)"}),e.jsx(d,{value:"standard",control:e.jsx(b,{}),label:"No Restriction"})]})]}),a.dealType==="lastMinute"&&e.jsxs(e.Fragment,{children:[e.jsxs(O,{component:"fieldset",sx:{mb:2},children:[e.jsx(E,{component:"legend",children:"Select Days or Hours"}),e.jsxs(F,{row:!0,name:"bookingRestrictionUnit",value:a.bookingRestrictionUnit||"none",onChange:p,children:[e.jsx(d,{value:"days",control:e.jsx(b,{}),label:"Days or fewer"}),e.jsx(d,{value:"hours",control:e.jsx(b,{}),label:"Hours or fewer"}),e.jsx(d,{value:"none",control:e.jsx(b,{}),label:"None"})]})]}),e.jsx(h,{label:"Maximum Advance",name:"maxAdvance",type:"number",value:a.maxAdvance||"",onChange:p,fullWidth:!0,margin:"normal",variant:"outlined"})]}),a.dealType==="earlyBooker"&&e.jsx(h,{label:"Minimum Advance",name:"minAdvance",type:"number",value:a.minAdvance||"",onChange:p,fullWidth:!0,margin:"normal",variant:"outlined"}),e.jsxs(c,{sx:{mt:2},children:[e.jsx(E,{component:"legend",sx:{fontWeight:"bold",display:"block"},children:"Do you want to limit this promotion to certain hours?"}),e.jsx(d,{control:e.jsx(V,{name:"limitPromotionToHours",checked:a.limitPromotionToHours||!1,onChange:p}),label:a.limitPromotionToHours?"Yes":"No"})]}),a.limitPromotionToHours&&e.jsxs(x,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"Start Hour (0-23)",name:"startHour",type:"number",value:a.startHour||"",onChange:p,fullWidth:!0,variant:"outlined"})}),e.jsx(x,{item:!0,xs:6,children:e.jsx(h,{label:"End Hour (0-23)",name:"endHour",type:"number",value:a.endHour||"",onChange:p,fullWidth:!0,variant:"outlined"})})]})]}),e.jsx(d,{control:e.jsx(V,{name:"applyToAllHotels",checked:a.applyToAllHotels||!1,onChange:p}),label:"Apply to All Hotels",sx:{mt:2}}),!a.applyToAllHotels&&r&&r.length>0&&e.jsxs(O,{fullWidth:!0,variant:"outlined",sx:{mt:2},children:[e.jsx(De,{id:"edit-hotel-select-label",children:"Select Hotel"}),e.jsx(We,{labelId:"edit-hotel-select-label",id:"edit-hotel-select",value:((N=a.hotels)==null?void 0:N[0])||"",label:"Select Hotel",onChange:ue,children:r.map(t=>e.jsx(Pe,{value:t._id,children:t.name},t._id))})]})]})}),e.jsxs(ho,{sx:{p:3},children:[e.jsx(ne,{onClick:K,color:"secondary",variant:"outlined",children:"Cancel"}),e.jsx(ne,{onClick:xe,variant:"contained",sx:{background:"linear-gradient(45deg, #667eea 30%, #764ba2 90%)",fontWeight:600,px:3},children:"Save Changes"})]})]})]})};export{it as default};
