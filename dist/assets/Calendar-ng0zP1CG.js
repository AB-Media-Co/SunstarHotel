import{r as x,b as oe,v as ie,a as ce,k as O,j as e,q as W,N as de}from"./index-DR6mlSVL.js";import{t as g,c as z,n as G,s as A,f as u,a as me,d as Y}from"./format-C4BekRQj.js";import{a as B,A as xe}from"./ArrowRightAlt-CELI39YS.js";import{A as K}from"./ArrowForwardIos-IfBKWtOk.js";function ue(l,a,t){const n=g(l,t==null?void 0:t.in);return isNaN(a)?z(l,NaN):(a&&n.setDate(n.getDate()+a),n)}function N(l,a,t){const n=g(l,t==null?void 0:t.in);if(isNaN(a))return z(l,NaN);if(!a)return n;const o=n.getDate(),m=z(l,n.getTime());m.setMonth(n.getMonth()+a+1,0);const S=m.getDate();return o>=S?m:(n.setFullYear(m.getFullYear(),m.getMonth(),o),n)}function R(l,a,t){const[n,o]=G(t==null?void 0:t.in,l,a);return+A(n)==+A(o)}function fe(l,a){const t=g(l,a==null?void 0:a.in);return t.setDate(1),t.setHours(0,0,0,0),t}function q(l,a){return+g(l)>+g(a)}function C(l,a){return+g(l)<+g(a)}function M(l,a,t){const[n,o]=G(t==null?void 0:t.in,l,a);return n.getFullYear()===o.getFullYear()&&n.getMonth()===o.getMonth()}const je=({setCheckInDate:l,setCheckOutDate:a,setOpenCalender:t,hotelCode:n})=>{const[o,m]=x.useState(new Date),S=N(o,1),{closeHotelModal:J,setNights:he}=oe(),[r,v]=x.useState(null),[i,b]=x.useState(null),[F,Q]=x.useState(!1),[T,U]=x.useState(null),[y,p]=x.useState(!1),E=x.useRef(null),d=JSON.parse(localStorage.getItem("hotelInfo")),D=r&&i&&(d==null?void 0:d.hotelCode)&&(d==null?void 0:d.authKey),{data:V,isLoading:X}=ie(D?d.hotelCode:null,D?d.authKey:null,D?u(r,"yyyy-MM-dd"):null,D?u(i,"yyyy-MM-dd"):null);x.useEffect(()=>{const s=localStorage.getItem("checkInDate"),h=localStorage.getItem("checkOutDate");s&&h&&(v(new Date(s)),b(new Date(h)))},[]);const Z=s=>{!r||r&&i?(v(s),b(null),p(!1)):C(s,r)?(v(s),p(!1)):Y(s,r)>30?(b(s),p(!0)):(b(s),p(!1))},ee=s=>{r&&!i&&U(s)},te=ce(),re=async()=>{if(Q(!0),!r||!i)return;const s=u(r,"yyyy-MM-dd"),h=u(i,"yyyy-MM-dd");if(l(s),a(h),localStorage.setItem("checkInDate",s),localStorage.setItem("checkOutDate",h),n||d!=null&&d.hotelCode)try{new Promise(w=>{const k=()=>{V?w():X?setTimeout(k,100):w()};k()}),te(`/hotels/${n||(d==null?void 0:d.hotelCode)}`),J(),t(!1)}catch(w){console.error("Error handling confirmation:",w)}},ae=["S","M","T","W","T","F","S"],_=(s,h,w)=>{const k=me(fe(s)),ne=Array.from({length:42},(c,j)=>ue(k,j));return e.jsxs("div",{className:"calendar-month w-full lg:w-[48%] flex flex-col gap-4 relative  p-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[h&&e.jsx("button",{onClick:()=>m(N(o,-1)),className:`text-2xl hidden  rounded-full md:flex items-center justify-center w-10 h-10 transition-all transform hover:scale-105
                ${M(o,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer shadow-md"}`,disabled:M(o,new Date),"aria-label":"Previous month",children:e.jsx(B,{style:{width:"16px",height:"16px"}})}),e.jsx("h2",{className:"font-bold text-xl text-center w-full md:text-2xl text-primary-green",children:u(s,"MMMM yyyy")}),w&&e.jsx("button",{onClick:()=>m(N(o,1)),className:"text-2xl text-white bg-primary-green hover:bg-primary-green/90 rounded-full hidden md:flex items-center justify-center w-10 h-10 shadow-md cursor-pointer transition-all transform hover:scale-105","aria-label":"Next month",children:e.jsx(K,{style:{width:"16px",height:"16px"}})})]}),e.jsxs("div",{className:"px-1 md:px-4",children:[e.jsx("div",{className:"calendar-header grid grid-cols-7 text-sm md:text-base text-center font-medium text-gray-500 pb-2 border-b border-gray-100",children:ae.map((c,j)=>e.jsx("div",{className:"py-2",children:c},j))}),e.jsx("div",{className:"calendar-days grid grid-cols-7 gap-y-2 sm:gap-y-3 pt-2",children:ne.map((c,j)=>{const f=u(c,"M")===u(s,"M"),I=f&&r&&R(c,r),P=f&&i&&R(c,i),H=T&&r&&!i&&f&&q(c,r)&&C(c,T),L=f&&r&&i&&q(c,r)&&C(c,i),$=C(c,A(new Date)),le=R(c,new Date);return e.jsx("div",{className:`day-cell flex items-center justify-center h-10 sm:h-12 relative
                    transition-all duration-200 
                    ${f?"current-month":"other-month opacity-0"} 
                    ${I?"range-start bg-primary-green rounded-l-full z-10":""} 
                    ${P?"range-end bg-primary-green rounded-r-full z-10":""} 
                    ${L||H?"in-range bg-primary-green/20":""} 
                    ${$?"text-gray-300 cursor-not-allowed":f?"hover:bg-primary-green/10 cursor-pointer":""} 
                    ${le&&!I?"today ring-2 ring-primary-green/30 ring-inset":""}
                    `,onClick:()=>f&&!$&&Z(c),onMouseEnter:()=>f&&!$&&ee(c),children:f&&e.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-full
                      text-sm md:text-base font-medium
                      ${I||P?"bg-primary-green text-white transform scale-110 shadow-md z-20":L||H?"text-primary-green":""}
                    `,children:u(c,"d")})},j)})})]})]})},se=()=>{if(r&&i){const s=Y(i,r);return s===1?"1 Night":`${s} Nights`}return""};return x.useEffect(()=>{y&&E.current&&O.fromTo(E.current,{opacity:0,y:-20,scale:.95},{opacity:1,y:0,scale:1,duration:.5,ease:"back.out(1.7)"})},[y]),x.useEffect(()=>{O.fromTo(".Calender",{x:300,opacity:0},{duration:.8,x:0,opacity:1,ease:"power3.out"}),O.fromTo(".footer",{y:50,opacity:0},{duration:.8,y:0,opacity:1,ease:"power3.out",delay:.3})},[]),e.jsxs("div",{className:"calendar-container flex flex-col justify-start md:justify-end relative",children:[e.jsxs("div",{className:"flex flex-col  overflow-y-auto md:rounded-t-xl md:h-auto Calender max-h-[85vh] bg-white lg:w-[95%] w-full md:p-6 lg:flex-row gap-6 shadow-lg",children:[y&&e.jsx("div",{ref:E,className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 \r
              bg-white rounded-xl shadow-xl p-5 md:p-6 max-w-[90%] w-[320px] md:w-[360px]`,children:e.jsxs("div",{className:"flex flex-col items-center text-start",children:[e.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-primary-green/10 rounded-full flex items-center justify-center mb-3",children:e.jsx(W,{name:"calendar",className:"w-6 h-6 md:w-7 md:h-7 text-primary-green"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-primary-dark-green mb-2",children:"Planning a long stay?"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base mb-4",children:"Currently, we don't support online bookings for more than 30 nights. However, you can tell us about your plans and we'll make it happen."}),e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("div",{className:`text-primary-yellow  w-full cursor-pointer  font-bold  \r
                  transition-all duration-300  `,onClick:()=>window.location.href="/booking-form",children:"Get in touch"}),e.jsx("div",{className:" text-gray-500 hover:text-gray-700 w-full cursor-pointer  text-sm font-medium",onClick:()=>{localStorage.removeItem("checkInDate"),localStorage.removeItem("checkOutDate"),v(null),b(null),p(!1)},children:"Continue selection"})]})]})}),y&&e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm z-40",onClick:()=>p(!1)}),e.jsxs("div",{className:"flex flex-col w-full gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-4 md:hidden",children:[e.jsx("button",{onClick:()=>m(N(o,-1)),className:`rounded-full flex items-center justify-center w-8 h-8 
                ${M(o,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer"}`,disabled:M(o,new Date),children:e.jsx(B,{style:{width:"12px",height:"12px"}})}),e.jsx("h2",{className:"font-bold text-lg text-primary-green",children:"Select your stay dates"}),e.jsx("button",{onClick:()=>m(N(o,1)),className:"text-white bg-primary-green hover:bg-primary-green/90 rounded-full flex items-center justify-center w-8 h-8",children:e.jsx(K,{style:{width:"12px",height:"12px"}})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full gap-6",children:[_(o,!0,!1),_(S,!1,!0)]})]})]}),e.jsx("button",{onClick:()=>t(!1),className:"absolute right-4 top-4 text-gray-500 hover:text-gray-700 transition-colors bg-white/80 hover:bg-white rounded-full p-1 shadow-md z-20","aria-label":"Close calendar",children:e.jsx(de,{})}),e.jsxs("div",{className:`footer bg-white w-full py-4 md:py-6 shadow-lg\r
  fixed md:sticky bottom-0 left-0 z-40 \r
  px-4 md:px-8\r
  flex flex-col md:flex-row justify-between gap-4 items-center `,children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full md:w-auto md:max-w-[60%] bg-gray-50 px-4 py-3 md:px-6 md:py-4 rounded-xl gap-3 shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{name:"calendar",className:"w-5 h-5 md:w-6 md:h-6 text-primary-green mr-2"}),e.jsxs("div",{className:`flex flex-col ${F&&!r?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check in"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:r?u(r,"EEE, MMM d"):"Select date"})]})]}),e.jsx(xe,{className:"text-primary-green mx-1 md:mx-2"}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:`flex flex-col ${F&&!i?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check out"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:i?u(i,"EEE, MMM d"):"Select date"})]})}),r&&i&&e.jsx("div",{className:"flex items-center justify-center text-xs md:text-sm font-medium text-primary-green bg-primary-green/10 rounded-full px-3 py-1 ml-2",children:se()})]}),e.jsx("button",{onClick:re,disabled:y,className:`w-full md:w-auto font-bold text-white px-6 py-3 md:py-4 rounded-xl shadow-lg transition-all duration-300 
              ${!r||!i||y?"bg-gray-300 cursor-not-allowed":"bg-primary-dark-green hover:bg-primary-green transform hover:scale-105"}`,children:"Confirm Dates"})]})]})};export{je as C};
