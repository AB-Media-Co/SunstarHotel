var y=(m,s,r)=>new Promise((p,t)=>{var l=e=>{try{o(r.next(e))}catch(n){t(n)}},c=e=>{try{o(r.throw(e))}catch(n){t(n)}},o=e=>e.done?p(e.value):Promise.resolve(e.value).then(l,c);o((r=r.apply(m,s)).next())});import{j as a,r as d}from"./index-Dkp8bbAB.js";import{uploadSingleImagesAPIV2 as v}from"./useHotelHook2-CSOfL0T2.js";import{c as U,s as b}from"./createSvgIcon-BetL97M7.js";import{B as j,c as E,a as S,C as B,T as u}from"./TextField-CQ7XyYnV.js";const T=U(a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),C=b("input")({display:"none"}),w=({feature:m,handleFeatureChange:s,setImageUpload:r,index:p})=>{const[t,l]=d.useState(!1),[c,o]=d.useState(null),[e,n]=d.useState(null),x=`contained-button-file-${p}`,h=g=>y(void 0,null,function*(){const f=g.target.files[0];if(f){n(null),o(null),l(!0);try{const i=yield v([f]),I=i==null?void 0:i.imageUrls[0];s("image",I),l(!1)}catch(i){console.error("Error uploading image:",i),o("Failed to upload image. Please try again."),l(!1),s("image","")}}});return d.useEffect(()=>{r(t)},[t,r]),a.jsxs(j,{children:[a.jsx(E,{label:"Image URL",variant:"outlined",fullWidth:!0,value:m.image||"",onChange:g=>s("image",g.target.value),style:{marginBottom:10},disabled:t}),a.jsxs("label",{htmlFor:x,children:[a.jsx(C,{accept:"image/*",id:x,type:"file",onChange:h,disabled:t}),a.jsx(S,{variant:"contained",component:"span",startIcon:a.jsx(T,{}),disabled:t,style:{marginBottom:10},children:"Upload Image"})]}),t&&a.jsxs(j,{display:"flex",alignItems:"center",mt:1,children:[a.jsx(B,{size:20,sx:{mr:1}}),a.jsx(u,{variant:"body2",color:"textSecondary",children:"Uploading..."})]}),c&&a.jsx(u,{variant:"body2",color:"error",mt:1,children:c}),e&&a.jsx(u,{variant:"body2",color:"error",mt:1,children:e})]})};export{w as I};
