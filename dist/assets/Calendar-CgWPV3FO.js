import{r as o,d as re,z as ae,v as i,b as le,n as D,j as e,t as P,V as ne,a5 as oe,a6 as ie,w as T}from"./index-DUivyv45.js";import{a as g,i as j,s as ce,b as de,c as M,d as H,e as v}from"./isSameMonth-Bn5SHICz.js";import{a as W,A as me}from"./ArrowRightAlt-Dg1vhVB2.js";import{A as F}from"./ArrowForwardIos-D_yK4q6k.js";const pe=({setCheckInDate:L,setCheckOutDate:B,setOpenCalender:S,hotelCode:E})=>{const[n,y]=o.useState(new Date),K=g(n,1),{closeHotelModal:G,setNights:xe}=re(),[t,p]=o.useState(null),[r,u]=o.useState(null),[$,J]=o.useState(!1),[I,V]=o.useState(null),[m,x]=o.useState(!1),N=o.useRef(null),l=JSON.parse(localStorage.getItem("hotelInfo")),w=t&&r&&(l==null?void 0:l.hotelCode)&&(l==null?void 0:l.authKey),{data:_,isLoading:q}=ae(w?l.hotelCode:null,w?l.authKey:null,w?i(t,"yyyy-MM-dd"):null,w?i(r,"yyyy-MM-dd"):null);o.useEffect(()=>{const s=localStorage.getItem("checkInDate"),d=localStorage.getItem("checkOutDate");s&&d&&(p(new Date(s)),u(new Date(d)))},[]);const Q=s=>{!t||t&&r?(p(s),u(null),x(!1)):v(s,t)?(p(s),x(!1)):T(s,t)>30?(u(s),x(!0)):(u(s),x(!1))},U=s=>{t&&!r&&V(s)},X=le(),Y=async()=>{if(J(!0),!t||!r)return;const s=i(t,"yyyy-MM-dd"),d=i(r,"yyyy-MM-dd");if(L(s),B(d),localStorage.setItem("checkInDate",s),localStorage.setItem("checkOutDate",d),E||l!=null&&l.hotelCode)try{new Promise(h=>{const b=()=>{_?h():q?setTimeout(b,100):h()};b()}),X(`/hotels/${E||(l==null?void 0:l.hotelCode)}`),G(),S(!1)}catch(h){console.error("Error handling confirmation:",h)}},Z=["S","M","T","W","T","F","S"],O=(s,d,h)=>{const b=oe(ce(s)),te=Array.from({length:42},(a,f)=>de(b,f));return e.jsxs("div",{className:"calendar-month w-full lg:w-[48%] flex flex-col gap-4 relative  p-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[d&&e.jsx("button",{onClick:()=>y(g(n,-1)),className:`text-2xl hidden  rounded-full md:flex items-center justify-center w-10 h-10 transition-all transform hover:scale-105
                ${j(n,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer shadow-md"}`,disabled:j(n,new Date),"aria-label":"Previous month",children:e.jsx(W,{style:{width:"16px",height:"16px"}})}),e.jsx("h2",{className:"font-bold text-xl text-center w-full md:text-2xl text-primary-green",children:i(s,"MMMM yyyy")}),h&&e.jsx("button",{onClick:()=>y(g(n,1)),className:"text-2xl text-white bg-primary-green hover:bg-primary-green/90 rounded-full hidden md:flex items-center justify-center w-10 h-10 shadow-md cursor-pointer transition-all transform hover:scale-105","aria-label":"Next month",children:e.jsx(F,{style:{width:"16px",height:"16px"}})})]}),e.jsxs("div",{className:"px-1 md:px-4",children:[e.jsx("div",{className:"calendar-header grid grid-cols-7 text-sm md:text-base text-center font-medium text-gray-500 pb-2 border-b border-gray-100",children:Z.map((a,f)=>e.jsx("div",{className:"py-2",children:a},f))}),e.jsx("div",{className:"calendar-days grid grid-cols-7 gap-y-2 sm:gap-y-3 pt-2",children:te.map((a,f)=>{const c=i(a,"M")===i(s,"M"),k=c&&t&&M(a,t),R=c&&r&&M(a,r),z=I&&t&&!r&&c&&H(a,t)&&v(a,I),A=c&&t&&r&&H(a,t)&&v(a,r),C=v(a,ie(new Date)),se=M(a,new Date);return e.jsx("div",{className:`day-cell flex items-center justify-center h-10 sm:h-12 relative
                    transition-all duration-200 
                    ${c?"current-month":"other-month opacity-0"} 
                    ${k?"range-start bg-primary-green rounded-l-full z-10":""} 
                    ${R?"range-end bg-primary-green rounded-r-full z-10":""} 
                    ${A||z?"in-range bg-primary-green/20":""} 
                    ${C?"text-gray-300 cursor-not-allowed":c?"hover:bg-primary-green/10 cursor-pointer":""} 
                    ${se&&!k?"today ring-2 ring-primary-green/30 ring-inset":""}
                    `,onClick:()=>c&&!C&&Q(a),onMouseEnter:()=>c&&!C&&U(a),children:c&&e.jsx("div",{className:`
                      flex items-center justify-center w-8 h-8 sm:w-10 sm:h-10 rounded-full
                      text-sm md:text-base font-medium
                      ${k||R?"bg-primary-green text-white transform scale-110 shadow-md z-20":A||z?"text-primary-green":""}
                    `,children:i(a,"d")})},f)})})]})]})},ee=()=>{if(t&&r){const s=T(r,t);return s===1?"1 Night":`${s} Nights`}return""};return o.useEffect(()=>{m&&N.current&&D.fromTo(N.current,{opacity:0,y:-20,scale:.95},{opacity:1,y:0,scale:1,duration:.5,ease:"back.out(1.7)"})},[m]),o.useEffect(()=>{D.fromTo(".Calender",{x:300,opacity:0},{duration:.8,x:0,opacity:1,ease:"power3.out"}),D.fromTo(".footer",{y:50,opacity:0},{duration:.8,y:0,opacity:1,ease:"power3.out",delay:.3})},[]),e.jsxs("div",{className:"calendar-container flex flex-col justify-start md:justify-end relative",children:[e.jsxs("div",{className:"flex flex-col  overflow-y-auto md:rounded-t-xl md:h-auto Calender max-h-[85vh] bg-white lg:w-[95%] w-full md:p-6 lg:flex-row gap-6 shadow-lg",children:[m&&e.jsx("div",{ref:N,className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 \r
              bg-white rounded-xl shadow-xl p-5 md:p-6 max-w-[90%] w-[320px] md:w-[360px]`,children:e.jsxs("div",{className:"flex flex-col items-center text-start",children:[e.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 bg-primary-green/10 rounded-full flex items-center justify-center mb-3",children:e.jsx(P,{name:"calendar",className:"w-6 h-6 md:w-7 md:h-7 text-primary-green"})}),e.jsx("h3",{className:"text-lg md:text-xl font-bold text-primary-dark-green mb-2",children:"Planning a long stay?"}),e.jsx("p",{className:"text-gray-600 text-sm md:text-base mb-4",children:"Currently, we don't support online bookings for more than 30 nights. However, you can tell us about your plans and we'll make it happen."}),e.jsxs("div",{className:"flex justify-between w-full items-center",children:[e.jsx("div",{className:`text-primary-yellow  w-full cursor-pointer  font-bold  \r
                  transition-all duration-300  `,onClick:()=>window.location.href="/booking-form",children:"Get in touch"}),e.jsx("div",{className:" text-gray-500 hover:text-gray-700 w-full cursor-pointer  text-sm font-medium",onClick:()=>{localStorage.removeItem("checkInDate"),localStorage.removeItem("checkOutDate"),p(null),u(null),x(!1)},children:"Continue selection"})]})]})}),m&&e.jsx("div",{className:"absolute inset-0 bg-black/40 backdrop-blur-sm z-40",onClick:()=>x(!1)}),e.jsxs("div",{className:"flex flex-col w-full gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 pt-4 md:hidden",children:[e.jsx("button",{onClick:()=>y(g(n,-1)),className:`rounded-full flex items-center justify-center w-8 h-8 
                ${j(n,new Date)?"bg-gray-100 text-gray-300 cursor-not-allowed":"text-white bg-primary-green hover:bg-primary-green/90 cursor-pointer"}`,disabled:j(n,new Date),children:e.jsx(W,{style:{width:"12px",height:"12px"}})}),e.jsx("h2",{className:"font-bold text-lg text-primary-green",children:"Select your stay dates"}),e.jsx("button",{onClick:()=>y(g(n,1)),className:"text-white bg-primary-green hover:bg-primary-green/90 rounded-full flex items-center justify-center w-8 h-8",children:e.jsx(F,{style:{width:"12px",height:"12px"}})})]}),e.jsxs("div",{className:"flex flex-col md:flex-row w-full gap-6",children:[O(n,!0,!1),O(K,!1,!0)]})]})]}),e.jsx("button",{onClick:()=>S(!1),className:"absolute right-4 top-4 text-gray-500 hover:text-gray-700 transition-colors bg-white/80 hover:bg-white rounded-full p-1 shadow-md z-20","aria-label":"Close calendar",children:e.jsx(ne,{})}),e.jsxs("div",{className:`footer bg-white w-full py-4 md:py-6 shadow-lg\r
  fixed md:sticky bottom-0 left-0 z-40 \r
  px-4 md:px-8\r
  flex flex-col md:flex-row justify-between gap-4 items-center `,children:[e.jsxs("div",{className:"flex flex-row items-center justify-between w-full md:w-auto md:max-w-[60%] bg-gray-50 px-4 py-3 md:px-6 md:py-4 rounded-xl gap-3 shadow-md",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(P,{name:"calendar",className:"w-5 h-5 md:w-6 md:h-6 text-primary-green mr-2"}),e.jsxs("div",{className:`flex flex-col ${$&&!t?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check in"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:t?i(t,"EEE, MMM d"):"Select date"})]})]}),e.jsx(me,{className:"text-primary-green mx-1 md:mx-2"}),e.jsx("div",{className:"flex items-center",children:e.jsxs("div",{className:`flex flex-col ${$&&!r?"text-red-500":"text-gray-700"}`,children:[e.jsx("span",{className:"text-xs text-gray-500 font-medium",children:"Check out"}),e.jsx("span",{className:"font-semibold text-[10px] md:text-base",children:r?i(r,"EEE, MMM d"):"Select date"})]})}),t&&r&&e.jsx("div",{className:"flex items-center justify-center text-xs md:text-sm font-medium text-primary-green bg-primary-green/10 rounded-full px-3 py-1 ml-2",children:ee()})]}),e.jsx("button",{onClick:Y,disabled:m,className:`w-full md:w-auto font-bold text-white px-6 py-3 md:py-4 rounded-xl shadow-lg transition-all duration-300 
              ${!t||!r||m?"bg-gray-300 cursor-not-allowed":"bg-primary-dark-green hover:bg-primary-green transform hover:scale-105"}`,children:"Confirm Dates"})]})]})};export{pe as C};
