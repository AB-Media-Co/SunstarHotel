var u=(e,s,n)=>new Promise((t,i)=>{var c=a=>{try{o(n.next(a))}catch(m){i(m)}},p=a=>{try{o(n.throw(a))}catch(m){i(m)}},o=a=>a.done?t(a.value):Promise.resolve(a.value).then(c,p);o((n=n.apply(e,s)).next())});import{x as l,f,e as d,g as r,w as g}from"./index-DySQldRg.js";const F=e=>f({queryKey:["user-info",e],queryFn:()=>u(void 0,null,function*(){var s,n;if(!e||e.trim()==="")return{id:null,isVerified:!1,email:null,phone:null,firstName:null,lastName:null,role:null,loyalAgent:null,bookingDetails:[]};try{return(yield d.get(`/api/user/get-user?email=${e}`)).data}catch(t){throw r.error("Failed to fetch user info: "+(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.message)||t.message)),t}}),enabled:!!e&&e.trim()!=="",staleTime:1e4,refetchOnWindowFocus:!1}),w=()=>l({mutationFn:e=>u(void 0,null,function*(){return(yield d.post("/api/user/send-otp",e)).data}),onSuccess:()=>{r.success("OTP sent successfully")},onError:e=>{var s,n;r.error(((n=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:n.message)||e.message)}}),E=e=>f({queryKey:["check-email-verification",e],queryFn:()=>u(void 0,null,function*(){var s,n;if(!e||e.trim()==="")return{verified:!1};try{return(yield d.get(`/api/user/check-verification?email=${e}`)).data}catch(t){throw r.error("Verification check failed: "+(((n=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:n.message)||t.message)),t}}),enabled:!!e,staleTime:3e4,refetchOnWindowFocus:!1}),k=()=>l({mutationFn:e=>u(void 0,null,function*(){return(yield d.post("/api/user/verify-otp",e)).data}),onSuccess:()=>{r.success("OTP verified successfully")},onError:e=>{var s,n;r.error("Failed to verify OTP: "+((n=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:n.message)||e.message)}}),S=()=>l({mutationFn:t=>u(void 0,[t],function*({hotelCode:e,apiKey:s,reservationNo:n}){var i,c,p,o;try{return(yield d.post("/api/user/cancelBooking",{hotelCode:e,apiKey:s,reservationNo:n})).data}catch(a){throw axios.isAxiosError(a)?new Error(((c=(i=a.response)==null?void 0:i.data)==null?void 0:c.message)||((o=(p=a.response)==null?void 0:p.data)==null?void 0:o.error)||"Failed to cancel booking"):a}}),onSuccess:()=>{r.success("Booking cancelled successfully")},onError:e=>{const s=e instanceof Error?e.message:"Failed to cancel booking due to an unexpected error";r.error(s)},onSettled:()=>{}}),b=()=>{const e=g();return l({mutationFn:s=>u(void 0,null,function*(){return(yield d.put("/api/user/update-profile",s)).data}),onSuccess:(s,n)=>{r.success("Profile updated successfully"),n!=null&&n.email&&e.invalidateQueries({queryKey:["user-info",n.email]})},onError:s=>{var n,t;r.error("Failed to update profile: "+(((t=(n=s==null?void 0:s.response)==null?void 0:n.data)==null?void 0:t.message)||s.message))}})},O=()=>l({mutationFn:e=>u(void 0,null,function*(){var t,i,c,p,o,a;const s=new FormData;if(s.append("name",(t=e.name)!=null?t:""),s.append("appliedFor",(i=e.appliedFor)!=null?i:""),s.append("phoneNumber",(c=e.phoneNumber)!=null?c:""),s.append("emailId",(p=e.emailId)!=null?p:""),s.append("gender",(o=e.gender)!=null?o:""),s.append("submittedAt",(a=e.submittedAt)!=null?a:new Date().toISOString()),e.adminEmail&&s.append("adminEmail",e.adminEmail),e.resume instanceof File)s.append("resume",e.resume,e.resume.name);else throw new Error("Resume file is required");const{data:n}=yield d.post("/api/user/jobs/apply",s,{headers:{"Content-Type":"multipart/form-data"}});return n}),onSuccess:()=>{r.success("Application submitted. Check your email!")},onError:e=>{var s,n;r.error(((n=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:n.message)||e.message||"Failed to apply")}});export{w as a,k as b,E as c,O as d,S as e,b as f,F as u};
