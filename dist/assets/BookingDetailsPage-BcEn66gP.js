var fe=Object.defineProperty,ye=Object.defineProperties;var be=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var je=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable;var te=(t,r,l)=>r in t?fe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[r]=l,Z=(t,r)=>{for(var l in r||(r={}))je.call(r,l)&&te(t,l,r[l]);if(ee)for(var l of ee(r))Ne.call(r,l)&&te(t,l,r[l]);return t},J=(t,r)=>ye(t,be(r));var H=(t,r,l)=>new Promise((n,i)=>{var s=m=>{try{c(l.next(m))}catch(a){i(a)}},o=m=>{try{c(l.throw(m))}catch(a){i(a)}},c=m=>m.done?n(m.value):Promise.resolve(m.value).then(s,o);c((l=l.apply(t,r)).next())});import{j as e,L as se,y as xe,f as he,h as F,r as v,b as B,a as W}from"./index-Kj3knSog.js";import{u as we}from"./useUpdatePagesHook-DSINXOom.js";import{u as Y}from"./useUser-CSJYEhW5.js";import{u as ve}from"./pushBookingHook-CGM-rM8G.js";import{c as K}from"./createLucideIcon-BJzqg999.js";import{C as ke,S as Ce,A as Ae}from"./sparkles-Cs6-nGYV.js";import{S as re}from"./shield-LbcXcP96.js";import{C as Re}from"./clock-BB0I-e81.js";import{f as L}from"./formatCurrency-D9cZbEOZ.js";import{d as Se,e as Pe}from"./useOffersAndDealsHook-DIQjtNPU.js";import{L as Ie}from"./LoginModal-IkWFcm1U.js";import{R as ae,W as ne}from"./Warning-DbOOtiPZ.js";import{g as pe}from"./urlHelper-C1y1jxtM.js";import{A as oe}from"./Add-Do1ov1XV.js";import{H as Oe}from"./Helmet-PTh8rHXT.js";import{d as Ee,f as Q}from"./format-Ck-D5MMj.js";import{A as _e}from"./ArrowBackIosNew-CQbZgh67.js";import"./Loader-BhlYnuRi.js";import"./x-aOw4iCj7.js";import"./createSvgIcon-C5wF46kr.js";import"./clsx-B-dksMZM.js";import"./index-DL7e9eHI.js";/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=K("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=K("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.468.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ie=K("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Le=({ContactUsDetail:t})=>{const r=(t==null?void 0:t.phoneNumber)||"";return e.jsx("footer",{className:"w-full md:border-t border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex flex-col gap-6 py-6 text-gray-600   md:justify-between md:gap-10 md:py-8",children:[e.jsxs("div",{className:"flex justify-between gap-2 sm:gap-3",children:[e.jsx("p",{className:"text-base font-semibold tracking-tight sm:text-lg md:text-2xl",children:"Facing an issue? Call us for assistance."}),r?e.jsx("a",{href:`tel:${r}`,className:"w-fit text-lg font-semibold underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-xl","aria-label":`Call ${r}`,children:e.jsx("span",{className:"whitespace-nowrap",children:r})}):e.jsx("span",{className:"text-sm text-gray-500 sm:text-base",children:"Phone number unavailable"})]}),e.jsxs("nav",{className:"flex flex-wrap items-center gap-x-6 gap-y-3 sm:gap-x-8","aria-label":"Footer navigation",children:[e.jsx(se,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Cancellation Policy"}),e.jsx(se,{to:"/terms-conditions&cancellation",className:"text-sm font-medium underline underline-offset-4 transition-colors duration-200 hover:text-gray-800 sm:text-base md:text-lg",children:"Terms & Conditions"})]})]})})})},Be=()=>xe({mutationFn:t=>H(void 0,null,function*(){return(yield he.post("/api/payments/create",t)).data}),onSuccess:()=>{F.success("Order created successfully")},onError:t=>{var r,l;F.error("Failed to create order: "+(((l=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:l.message)||t.message))}}),ze=()=>xe({mutationFn:t=>H(void 0,null,function*(){return(yield he.post("/api/payments/verify",t)).data}),onSuccess:()=>{F.success("Payment verified successfully")},onError:t=>{var r,l;F.error("Payment verification failed: "+(((l=(r=t==null?void 0:t.response)==null?void 0:r.data)==null?void 0:l.message)||t.message))}}),$e=({hotelDetail:t,amount:r,onSuccess:l})=>{const n=Be(),i=ze(),o={14496:"rzp_live_KZSDFi3qOgrIgC",14492:"rzp_live_IQdcqeX4foVUM3",14494:"rzp_live_SxbRIhkDqyGEOM",14493:"rzp_live_uUlevuP8MoleGg"}[t==null?void 0:t.hotelCode],c=()=>{const m={amount:r,currency:"INR",hotelCode:t==null?void 0:t.hotelCode};n.mutate(m,{onSuccess:a=>{const x={key:o,amount:a.amount,currency:a.currency,name:t==null?void 0:t.hotelName,description:"Hotel Booking Payment",order_id:a.id,handler:function(p){const u={razorpay_order_id:p.razorpay_order_id,razorpay_payment_id:p.razorpay_payment_id,razorpay_signature:p.razorpay_signature,hotelCode:t==null?void 0:t.hotelCode};i.mutate(u,{onSuccess:()=>{F.success("Payment Verified ✅"),l("PAID_TYPE_UNKID")}})},prefill:{name:"",email:"",contact:""},theme:{color:"#38b2ac"}};new window.Razorpay(x).open()},onError:()=>{F.error("Failed to create Razorpay order")}})};return e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:c,children:"Confirm Booking"})},Ge=({hotelDetail:t,verified:r,checkIn:l,checkOut:n})=>{const i=localStorage.getItem("user_email"),{data:s}=Y(i),[o,c]=v.useState(""),{selectedRooms:m,setIsConfirmationModalOpen:a,someOneElse:x,guestData:g,setPaymentMethod:p,selectedOtherCharges:u}=B(),j=ve(),y=W();console.log(u);const b=N=>{c(N),p(N)},f=(N="")=>{var h,C;if(!(r||(h=s==null?void 0:s.data)!=null&&h.isVerified)){(C=document.getElementById("guestDetail"))==null||C.scrollIntoView({behavior:"smooth"});return}const k=Array.isArray(u)&&u.length>0?u.map(d=>{const A=d!=null&&d.qty?` x${d.qty}`:"",O=d!=null&&d.note?` (${d.note})`:"";return`${d.heading||""}${A}${O}`.trim()}).filter(Boolean).join(", "):"",R=o==="pay-at-hotel"?"pay-at-hotel":N,S=k?`${R} | Add-ons: ${k}`:R,P={};m.forEach((d,A)=>{var z;const O=parseInt(localStorage.getItem("days")),w=Array(O).fill(d.price).join(","),M=Array(O).fill(0).join(","),G=Array(O).fill(0).join(",");P[`Room_${A+1}`]={Rateplan_Id:d==null?void 0:d.roomrateunkid,Ratetype_Id:d.RateTypeID,Roomtype_Id:d.RoomTypeID,baserate:w,extradultrate:M,extrachildrate:G,number_adults:((z=d.guestQty)==null?void 0:z.toString())||"1",number_children:"0",ExtraChild_Age:"",Title:"",First_Name:x?g.firstName||"":(s==null?void 0:s.data.firstName)||"",Last_Name:x?g.lastName||"":(s==null?void 0:s.data.lastName)||"",Gender:(s==null?void 0:s.data.gender)||"",SpecialRequest:S}});const E=k?`Add To Your Stay: ${k}`:"",I={BookingData:{Room_Details:P,check_in_date:l,check_out_date:n,Booking_Payment_Mode:o==="pay-at-hotel"?"0":"1",Email_Address:s==null?void 0:s.data.email,Source_Id:"",MobileNo:x?g.phone:(s==null?void 0:s.data.phone)||"",Address:(s==null?void 0:s.data.address)||"",State:(s==null?void 0:s.data.state)||"",Country:(s==null?void 0:s.data.country)||"",City:(s==null?void 0:s.data.city)||"",Zipcode:"",Fax:"",Device:"Web",Languagekey:"",paymenttypeunkid:N,remark:E},HotelCode:t==null?void 0:t.hotelCode,APIKey:t==null?void 0:t.authKey,userEmail:s==null?void 0:s.data.email};j.mutate(I,{onSuccess:d=>{var A,O,w,M;y("/thankyou",{state:{bookingResponse:d,payload:I,paymentMethod:o,checkIn:l,checkOut:n,hotelDetail:t,hotel:{hotelCode:t==null?void 0:t.hotelCode,name:t==null?void 0:t.hotelName,payAtHotel:t==null?void 0:t.payAtHotel},user:{email:(A=s==null?void 0:s.data)==null?void 0:A.email,firstName:(O=s==null?void 0:s.data)==null?void 0:O.firstName,lastName:(w=s==null?void 0:s.data)==null?void 0:w.lastName,phone:(M=s==null?void 0:s.data)==null?void 0:M.phone},rooms:m},replace:!0})}})};return j.isPending?e.jsxs("div",{className:"relative bg-white border-gray-100",children:[e.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gray-200 border-t-primary-green rounded-full animate-spin mx-auto"}),e.jsx("div",{className:"absolute inset-0 w-16 h-16 border-4 border-transparent border-r-teal-300 rounded-full animate-spin mx-auto",style:{animationDirection:"reverse",animationDuration:"1.5s"}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-800",children:"Processing Your Booking"}),e.jsx("p",{className:"text-gray-600",children:"Please wait while we confirm your reservation..."}),e.jsx("div",{className:"flex items-center justify-center mt-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-primary-green rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})]})}),e.jsx("div",{className:"filter blur-sm pointer-events-none",children:e.jsx(de,{hotelDetail:t,selectedPaymentMethod:o,handlePaymentMethodChange:b,ContinueBtnClick:f,isLoading:!0})})]}):e.jsx(de,{hotelDetail:t,selectedPaymentMethod:o,handlePaymentMethodChange:b,ContinueBtnClick:f,isLoading:!1})},de=({hotelDetail:t,selectedPaymentMethod:r,handlePaymentMethodChange:l,ContinueBtnClick:n,isLoading:i})=>{const{finalPrice:s}=B();return e.jsxs("div",{id:"payment-method",className:"bg-white",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 text-gray-900 mb-1",children:"Payment Method"}),e.jsx("p",{className:"text-sm md:text-base text-gray-500",children:"Choose your preferred payment option"})]}),e.jsxs("div",{className:"space-y-3 md:space-y-4 mb-6 md:mb-8",children:[e.jsx(ce,{id:"pay-now",icon:e.jsx(Fe,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay and Book Now",description:"Complete your booking instantly with secure online payment",features:[{icon:e.jsx(ke,{className:"w-4 h-4"}),text:"Instant confirmation"},{icon:e.jsx(re,{className:"w-4 h-4"}),text:"All major cards"},{icon:e.jsx(Ce,{className:"w-4 h-4"}),text:"5% discount"}],badge:{text:"Secure",color:"green"},discountBadge:{text:"Save 5%",color:"red"},isSelected:r==="pay-now",onClick:()=>!i&&l("pay-now"),isLoading:i,isRecommended:!0}),(t==null?void 0:t.payAtHotel)==="yes"&&e.jsx(ce,{id:"pay-at-hotel",icon:e.jsx(le,{className:"w-5 h-5 md:w-6 md:h-6"}),title:"Pay at Hotel",description:"Reserve now and pay at check-in",features:[{icon:e.jsx(Re,{className:"w-4 h-4"}),text:"No advance payment"},{icon:e.jsx(le,{className:"w-4 h-4"}),text:"Pay at reception"}],badge:{text:"Flexible",color:"orange"},isSelected:r==="pay-at-hotel",onClick:()=>!i&&l("pay-at-hotel"),isLoading:i})]}),r&&e.jsx("div",{className:"flex justify-end mb-6 md:mb-8",children:r==="pay-now"?e.jsx($e,{hotelDetail:t,amount:s,onSuccess:o=>n(o)}):e.jsx("button",{className:"w-full md:w-auto px-6 md:px-8 py-3 md:py-4 bg-gradient-to-r from-primary-green to-teal-600 text-white font-semibold rounded-lg md:rounded-xl hover:shadow-lg transition-all duration-300 active:scale-95 flex items-center justify-center gap-2",onClick:()=>n(),children:e.jsx("span",{children:"Confirm Booking"})})}),e.jsx("div",{className:"p-3 md:p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-200",children:e.jsxs("div",{className:"flex items-start gap-2 md:gap-3 text-xs md:text-sm text-gray-700",children:[e.jsx(re,{className:"w-4 h-4 md:w-5 md:h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Your payment information is secured with 256-bit SSL encryption"})]})})]})},ce=({id:t,icon:r,title:l,description:n,features:i,badge:s,discountBadge:o,isSelected:c,onClick:m,isLoading:a,isRecommended:x=!1})=>{const g={green:"bg-green-100 text-green-800",orange:"bg-orange-100 text-orange-800",red:"bg-red-100 text-red-800"};return e.jsxs("div",{className:`relative overflow-hidden rounded-lg md:rounded-xl border-2 transition-all duration-300 cursor-pointer group ${c?"border-primary-green bg-gradient-to-br from-teal-50 to-emerald-50 shadow-lg":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-md"} ${a?"pointer-events-none opacity-50":""}`,onClick:m,children:[x&&e.jsx("div",{className:"absolute top-0 right-0 bg-gradient-to-r from-red-500 to-pink-500 text-white text-xs font-bold px-3 py-1 rounded-bl-lg rounded-tr-lg",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-3 h-3"}),"RECOMMENDED"]})}),e.jsxs("label",{htmlFor:t,className:"flex items-start gap-3 md:gap-4 p-3 md:p-5 cursor-pointer",children:[e.jsx("input",{type:"radio",id:t,name:"payment-method",className:"w-4 h-4 md:w-5 md:h-5 mt-1 md:mt-0.5 text-teal-600 border-2 border-gray-300 focus:ring-primary-green flex-shrink-0",onChange:m,checked:c,disabled:a}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1 md:mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2 md:gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:`p-1.5 md:p-2 rounded-lg flex-shrink-0 ${c?"bg-primary-green":"bg-gray-100 group-hover:bg-teal-50"}`,children:e.jsx("div",{className:`${c?"text-white":"text-gray-600 group-hover:text-teal-600"}`,children:r})}),e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 truncate",children:l})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[s&&e.jsx("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-medium flex-shrink-0 whitespace-nowrap ${g[s.color]}`,children:s.text}),o&&e.jsxs("span",{className:`inline-flex items-center gap-1 px-2 md:px-3 py-1 rounded-full text-xs font-bold flex-shrink-0 whitespace-nowrap animate-pulse ${g[o.color]}`,children:[e.jsx(ie,{className:"w-3 h-3"}),o.text]})]})]}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mb-2 md:mb-3 line-clamp-2",children:n}),e.jsx("div",{className:"flex flex-wrap gap-2 md:gap-4 text-xs md:text-sm",children:i.map((p,u)=>e.jsxs("div",{className:`flex items-center gap-1 ${c?"text-teal-700":"text-gray-600"}`,children:[e.jsx("div",{className:c?"text-teal-600":"text-gray-400",children:p.icon}),e.jsx("span",{className:"whitespace-nowrap",children:p.text})]},u))})]})]})]})},me=({days:t,showButton:r,isPaymentVisible:l})=>{const{selectedRooms:n,totalOtherCharges:i,finalPrice:s,baseFinalPrice:o,setNights:c,details:m}=B(),[a,x]=v.useState(!1);v.useEffect(()=>{t&&(c(t),localStorage.setItem("days",t))},[t,c]);const g=o-s,p=g>0;return v.useEffect(()=>{const u=()=>{window.scrollY>220?x(!0):x(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]),e.jsxs("div",{className:`md:p-6 p-4 bg-white md:border-2 border border-gray-200 rounded-2xl md:shadow-lg shadow-md w-full ${a?"md:w-[384px]":{}}  md:w-96 mx-auto  font-sans transition-all duration-300 ${a?"xl:fixed xl:top-4  ":"relative "}`,children:[e.jsx("div",{className:"bg-primary-green  p-4 -mx-4 md:-mx-6 -mt-4 md:-mt-6 rounded-t-2xl mb-6",children:e.jsx("h2",{className:"text-lg md:text-xl font-bold text-white",children:"Reservation Summary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-bold text-gray-800 mb-4 pb-2 border-b-2 border-primary-green/20",children:"Your Price Summary"}),e.jsx("div",{className:"space-y-4 mb-5",children:n==null?void 0:n.map((u,j)=>{var _,I,h,C,d;const y=m[j],b=((_=y==null?void 0:y.roomData)==null?void 0:_.discountRate)||0,f=((h=(I=y==null?void 0:y.continentalPlan)==null?void 0:I.rate)==null?void 0:h.amount)||0,N=(u==null?void 0:u.guestQty)||2,k=((C=y==null?void 0:y.roomData)==null?void 0:C.baseAdultOccupancy)||2,R=((d=y==null?void 0:y.roomData)==null?void 0:d.extraAdultRate)||0,S=N>k?N-k:0,P=S*R,E=f*N;return e.jsxs("div",{className:"space-y-3 pb-4 mb-4 border-b-2 border-dashed border-gray-200 last:border-0",children:[e.jsxs("div",{className:"flex justify-between items-start text-sm bg-gray-50 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-800 text-base",children:u.roomName}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Room Only (",k," ",k===1?"Adult":"Adults",") × ",t," ",t===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-gray-900 text-base",children:L(b*t)})]}),S>0&&R>0&&e.jsxs("div",{className:"flex justify-between items-start text-sm bg-orange-50 border-l-4 border-orange-500 p-3 rounded-r-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-orange-700",children:"Extra Adult Charges"}),e.jsxs("p",{className:"text-xs text-orange-600 mt-1",children:[L(R)," × ",S," ",S===1?"Adult":"Adults"," × ",t," ",t===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-orange-700",children:L(P*t)})]}),u.option==="continental"&&f>0&&e.jsxs("div",{className:"flex justify-between items-start text-sm bg-green-50 border-l-4 border-primary-green p-3 rounded-r-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-primary-green",children:"Continental Breakfast"}),e.jsxs("p",{className:"text-xs text-green-700 mt-1",children:[L(f)," × ",N," ",N===1?"Guest":"Guests"," × ",t," ",t===1?"Night":"Nights"]})]}),e.jsx("p",{className:"font-bold text-primary-green",children:L(E*t)})]})]},j)})}),e.jsxs("div",{className:"flex justify-between items-center text-sm font-semibold text-gray-700 py-3 px-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"flex items-center gap-2",children:"Taxes & Other Charges"}),e.jsx("p",{className:"font-bold text-gray-900",children:L(i)})]})]}),e.jsxs("div",{className:"pt-4 mt-5 bg-gradient-to-br from-gray-50 to-gray-100 p-4 rounded-xl space-y-3 border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Base Price"}),e.jsx("span",{className:"font-semibold text-gray-900",children:L(o)})]}),p&&e.jsxs("div",{className:"flex justify-between items-center text-sm bg-green-50 -mx-4 px-4 py-2",children:[e.jsx("span",{className:"font-medium",children:"Pay Now Discount"}),e.jsxs("span",{className:"font-bold text-green-600",children:["-",L(g)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Taxes & Fees"}),e.jsx("span",{className:"font-semibold text-gray-900",children:L(i)})]}),e.jsxs("div",{className:"flex justify-between items-center border-t-2 border-gray-300 pt-3 mt-3",children:[e.jsx("p",{className:"text-base md:text-lg font-bold text-gray-800",children:"Payable Amount"}),e.jsx("p",{className:"text-lg md:text-xl font-bold text-primary-green",children:L(s)})]})]}),r&&e.jsx("a",{href:"#payment-method",className:"hidden md:block w-full",children:e.jsx("button",{disabled:l,className:`mt-6 w-full py-4 font-bold text-white rounded-xl shadow-lg transition-all duration-300 transform hover:scale-[1.02] ${l?"bg-gray-300 cursor-not-allowed shadow-none":"bg-gradient-to-r from-primary-green to-primary-dark-green hover:shadow-xl"}`,children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("span",{children:"See Payment Options"}),e.jsx("span",{className:"text-xl",children:"→"})]})})})]})};/*! js-cookie v3.0.5 | MIT */function q(t){for(var r=1;r<arguments.length;r++){var l=arguments[r];for(var n in l)t[n]=l[n]}return t}var Te={read:function(t){return t[0]==='"'&&(t=t.slice(1,-1)),t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(t){return encodeURIComponent(t).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function X(t,r){function l(i,s,o){if(typeof document!="undefined"){o=q({},r,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),i=encodeURIComponent(i).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var c="";for(var m in o)o[m]&&(c+="; "+m,o[m]!==!0&&(c+="="+o[m].split(";")[0]));return document.cookie=i+"="+t.write(s,i)+c}}function n(i){if(!(typeof document=="undefined"||arguments.length&&!i)){for(var s=document.cookie?document.cookie.split("; "):[],o={},c=0;c<s.length;c++){var m=s[c].split("="),a=m.slice(1).join("=");try{var x=decodeURIComponent(m[0]);if(o[x]=t.read(a,x),i===x)break}catch(g){}}return i?o[i]:o}}return Object.create({set:l,get:n,remove:function(i,s){l(i,"",q({},s,{expires:-1}))},withAttributes:function(i){return X(this.converter,q({},this.attributes,i))},withConverter:function(i){return X(q({},this.converter,i),this.attributes)}},{attributes:{value:Object.freeze(r)},converter:{value:Object.freeze(t)}})}X(Te,{path:"/"});const Ve=({hotelDetail:t,checkIn:r,verified:l})=>{const[n,i]=v.useState(""),[s,o]=v.useState([]),[,c]=v.useState(null),[m,a]=v.useState(!1),[x,g]=v.useState(null),{mutate:p,data:u}=Se(),{mutateAsync:j}=Pe(),{finalPrice:y,setFinalPrice:b,baseFinalPrice:f,paymentMethod:N}=B(),k=localStorage.getItem("user_email"),{data:R,isLoading:S}=Y(k),P=localStorage.getItem("user_email")!==null;if(v.useEffect(()=>{t&&t._id&&P&&p(t._id)},[p,t,P,R]),S)return e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("div",{className:"w-12 h-12 border-3 border-gray-200 border-t-primary-green rounded-full animate-spin"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Loading offers..."})]})});if(!P)return e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-start md:text-center space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Unlock Exclusive Offers"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sign in to access special discounts and deals"})]}),e.jsxs("a",{href:"#guestDetail",onClick:h=>{F.error("Please verify your details")},className:"mt-4 inline-flex items-center gap-2 px-6 py-2.5 bg-primary-green text-white rounded-lg text-sm font-medium hover:bg-cyan-700 transition-colors",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]}),"Verify to Continue"]})]})});const E=()=>H(void 0,null,function*(){var h,C;if(n.trim()){if(s.some(d=>d.offerCode.toUpperCase()===n.trim().toUpperCase())){F.error("This promo code is already applied");return}a(!0);try{const d=yield j({hotelId:t._id,rate:y,offerCode:n.trim(),checkInDate:r});if(c(d),d.discountedRate){const A={offerCode:n.trim().toUpperCase(),description:d.description||"Discount applied",discountPercent:d.discountPercent||0,discountedRate:d.discountedRate};o(O=>[...O,A]),b(d.discountedRate),i(""),F.success("Offer applied successfully")}}catch(d){F.error(((C=(h=d==null?void 0:d.response)==null?void 0:h.data)==null?void 0:C.error)||"Error applying offer")}finally{a(!1)}}}),_=h=>{const C=s.filter(d=>d.offerCode!==h);if(o(C),C.length===0)b(f);else{const d=C[C.length-1];b(d.discountedRate)}F.success("Promo code removed")},I=h=>H(void 0,null,function*(){var C,d;if(s.some(A=>A.offerCode===h.offerCode)){F.error("This promo code is already applied");return}a(!0);try{const A=yield j({hotelId:t._id,rate:y,offerCode:h.offerCode,checkInDate:r});if(A.discountedRate){const O={offerCode:h.offerCode,description:h.description,discountPercent:h.discountPercent,discountedRate:A.discountedRate};o(w=>[...w,O]),b(A.discountedRate),F.success("Offer applied successfully!")}else throw new Error("No discount rate returned")}catch(A){F.error(((d=(C=A==null?void 0:A.response)==null?void 0:C.data)==null?void 0:d.error)||"Error applying offer")}finally{a(!1)}});return e.jsxs("div",{className:"bg-white w-full",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-semibold text-gray-800",children:"Exclusive Offers"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-600 mt-1",children:"Apply a promo code to get discounts"})]}),s.length>0&&e.jsx("div",{className:"mb-3 pb-3  border-gray-200",children:e.jsx("div",{className:"flex flex-wrap gap-2 items-center",children:s.map(h=>e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-green-50 to-green-100 border border-green-300 rounded-full px-3 py-1",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"#059669",strokeWidth:"2.5",className:"flex-shrink-0",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})}),e.jsx("span",{className:"font-semibold text-primary-green text-sm",children:h.offerCode}),e.jsxs("span",{className:"text-xs text-primary-green font-medium",children:["(",h.discountPercent,"%)"]})]}),e.jsx("button",{onClick:()=>_(h.offerCode),className:"ml-1 text-primary-green hover:text-primary-green-dark transition-colors flex-shrink-0",title:"Remove this promo code",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]},h.offerCode))})}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2 md:gap-3  flex-col md:flex-row",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",placeholder:"Enter promo code...",className:"w-full h-12 md:h-14 border border-gray-300 rounded-lg px-4 text-sm focus:outline-none focus:ring-2 focus:ring-cyan-500 focus:border-transparent",value:n,onChange:h=>i(h.target.value),onKeyPress:h=>h.key==="Enter"&&E()}),n&&e.jsx("button",{onClick:()=>i(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),e.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:E,disabled:!n.trim()||m,className:"h-12 md:h-14 px-6 w-auto bg-primary-green text-white rounded-lg font-medium hover:bg-cyan-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 text-sm",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"hidden sm:inline",children:"Applying..."})]}):e.jsx(e.Fragment,{children:e.jsx("span",{className:"inline",children:"Apply Promo Code"})})})})]})}),s.length===0&&u&&u.length>0&&e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.map(h=>e.jsx("div",{onClick:()=>I(h),onMouseEnter:()=>g(h.offerCode),onMouseLeave:()=>g(null),className:"p-4 border border-gray-200 rounded-lg cursor-pointer hover:border-cyan-500 hover:bg-cyan-50 transition-all group",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:h.offerCode}),h.description&&e.jsxs("p",{className:"text-xs text-gray-600 mt-1 line-clamp-1 capitalize",children:["apply this promo code to get ",h.discountPercent,"% off "]})]}),e.jsxs("div",{className:"flex-shrink-0 bg-cyan-100 text-cyan-700 px-3 py-1.5 rounded-lg font-semibold text-sm",children:[h.discountPercent,"%"]})]})},h.offerCode))})})]})},He=({data:t})=>{const r=t==null?void 0:t.addToYourStay,{selectedOtherCharges:l,setSelectedOtherCharges:n}=B(),i=(o,c)=>{c&&c.stopPropagation(),n(m=>(Array.isArray(m)?m.find(x=>x._id===o._id):null)?m.filter(x=>x._id!==o._id):[...m,o])},s=o=>l.some(c=>c._id===o);return e.jsxs("div",{className:"bg-white ",children:[e.jsxs("div",{className:"mb-6 md:mb-8",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4  text-gray-900",children:"Add To Your Stay"}),e.jsx("p",{className:"text-gray-600 t md:text-desktop/body/1 mt-1",children:"Enhance your experience with optional add-ons"})]}),e.jsx("div",{className:"space-y-3 md:space-y-4",children:r.map(o=>e.jsx(Ue,{option:o,isSelected:s(o._id),onToggle:c=>i(o,c)},o._id))})]})},Ue=({option:t,isSelected:r,onToggle:l})=>{var n,i;return e.jsxs("div",{className:`relative rounded-lg md:rounded-xl border-2 transition-all duration-300 overflow-hidden cursor-pointer ${r?"border-teal-500 bg-teal-50 shadow-md":"border-gray-200 bg-white hover:border-teal-300 hover:shadow-sm"}`,onClick:l,children:[e.jsx("div",{className:"p-4 md:p-5",children:e.jsxs("div",{className:"flex items-start gap-3 md:gap-4",children:[e.jsx("div",{className:`w-5 h-5 md:w-6 md:h-6 rounded-md border-2 flex items-center justify-center flex-shrink-0 transition-all ${r?"bg-teal-500 border-teal-500 shadow-sm":"border-gray-300 hover:border-teal-400"}`,children:r&&e.jsx(Me,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-3 mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:`text-base md:text-lg font-semibold leading-tight ${r?"text-teal-700":"text-gray-900"}`,children:t.heading}),e.jsx("p",{className:`text-xs md:text-sm leading-relaxed ${r?"text-primary-green font-medium":"text-gray-600"}`,children:t.description})]}),e.jsxs("div",{className:`flex-shrink-0 text-right px-2 py-1 md:px-3 md:py-1.5 rounded-md transition-colors ${r?"bg-teal-100":""}`,children:[e.jsxs("div",{className:`text-base md:text-lg font-bold ${r?"text-primary-green":"text-gray-900"}`,children:["₹",(n=t.rate)==null?void 0:n.amount]}),((i=t.rate)==null?void 0:i.period)&&e.jsx("div",{className:"text-xs text-gray-500",children:t.rate.period})]})]})})]})}),r&&e.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-teal-500"})]})},ue=v.forwardRef(({setIsVerified:t})=>{var _,I,h,C,d,A,O;const[r,l]=v.useState(""),[n,i]=v.useState(""),[s,o]=v.useState(localStorage.getItem("user_email")||""),[c,m]=v.useState(""),[a,x]=v.useState(!1),{someOneElse:g,setSomeoneElse:p,setGuestData:u}=B(),[j,y]=v.useState(null),b=localStorage.getItem("user_email")!==null,{data:f,refetch:N}=Y(s);v.useEffect(()=>{const w=localStorage.getItem("user_email");w&&w!==s&&o(w)},[b]),v.useEffect(()=>{s&&s.trim()!==""&&N()},[s,N]);const[k,R]=v.useState(!1);v.useEffect(()=>{b&&g&&u({firstName:r,lastName:n,email:s,phone:c})},[b,g,r,n,s,c,u]);const S=[{id:"firstName",label:"First Name",placeholder:"Enter your first name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"lastName",label:"Last Name",placeholder:"Enter your last name",type:"text",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),e.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"email",label:"Email Address",placeholder:"Enter your email address",type:"email",icon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),e.jsx("polyline",{points:"22,6 12,13 2,6"})]})},{id:"mobile",label:"Mobile Number",placeholder:"Enter your mobile number",type:"tel",icon:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"})})}],P=w=>{switch(w){case"firstName":return r;case"lastName":return n;case"email":return s;case"mobile":return c;default:return""}},E=(w,M)=>{switch(w){case"firstName":l(M);break;case"lastName":i(M);break;case"email":o(M);break;case"mobile":m(M);break}};return e.jsxs("div",{id:"guestDetail",className:"flex flex-col md:gap-4 relative overflow-hidden",children:[e.jsx("div",{className:"flex items-center mb-2 relative z-10",children:e.jsxs("div",{children:[e.jsx("h2",{className:"  text-mobile/h4 md:text-desktop/h4 text-gray-900 tracking-tight mb-1",children:"Guest Details"}),e.jsx("p",{className:"text-gray-600 text-mobile/body/2 md:text-desktop/body/1",children:"Please provide your information to proceed"})]})}),e.jsxs("div",{className:"relative z-10",children:[b&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl flex items-center",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-400 to-green-500 rounded-full flex items-center justify-center mr-3 shadow-md",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("polyline",{points:"20 6 9 17 4 12"})})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-green-800",children:"Account Verified"}),e.jsx("p",{className:"text-green-600 text-sm",children:"Your email and mobile number are verified"})]})]}),e.jsxs("div",{className:"mb-4 md:mb-8 p-4 border rounded-xl bg-gray-50 flex items-center justify-between shadow-sm",children:[e.jsxs("div",{className:"w-12 h-12 mr-2 rounded-full bg-primary-green flex items-center justify-center text-white font-bold text-lg shadow",children:[(I=(_=f==null?void 0:f.data)==null?void 0:_.firstName)==null?void 0:I.charAt(0),(C=(h=f==null?void 0:f.data)==null?void 0:h.lastName)==null?void 0:C.charAt(0)]}),e.jsxs("div",{className:"flex flex-col min-w-0 flex-1 ",children:[e.jsxs("p",{className:"text-gray-900 font-semibold text-sm truncate",children:[(d=f==null?void 0:f.data)==null?void 0:d.firstName," ",(A=f==null?void 0:f.data)==null?void 0:A.lastName]}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:(O=f==null?void 0:f.data)==null?void 0:O.email})]}),e.jsx("button",{onClick:()=>{localStorage.removeItem("user_email"),window.location.reload()},className:"text-xs font-semibold text-gray-600 hover:text-gray-900 whitespace-nowrap flex-shrink-0",children:"Log Out"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-gray-700 text-sm mb-4 md:mb-6",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox h-5 w-5 text-yellow-500 border-gray-300 rounded",checked:a,onChange:w=>{x(w.target.checked),p(w.target.checked)}}),"I'm booking for someone else"]}),a&&e.jsx("form",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:S.map(({id:w,label:M,placeholder:G,type:z,icon:U})=>{const T=P(w),V=j===w,$=T&&T.trim();return e.jsxs("div",{className:"flex flex-col gap-3 group",children:[e.jsxs("label",{htmlFor:w,className:`block text-sm font-semibold tracking-wide transition-colors duration-200 ${V||$?"text-cyan-600":"text-gray-700"}`,children:[M," ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx("div",{className:`absolute left-4 top-1/2 transform -translate-y-1/2 transition-colors duration-200 ${V?"text-cyan-500":$?"text-cyan-600":"text-gray-400"}`,children:U}),e.jsx("input",{type:z,id:w,placeholder:G,className:`w-full h-14 pl-12 pr-4 py-3 text-base text-gray-900 placeholder-gray-400 border-2 rounded-xl shadow-sm transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-cyan-100
                              ${V?"border-cyan-400 shadow-lg":$?"border-cyan-300 bg-cyan-50":"border-gray-200 hover:border-gray-300"}
                              ${w==="email"?"bg-gray-100 text-gray-500 cursor-not-allowed":"bg-white"}
                            `,value:T,onChange:D=>E(w,D.target.value),onFocus:()=>y(w),onBlur:()=>y(null),disabled:w==="email"})]})})]},w)})})]}),!b&&e.jsxs("div",{className:"mb-4 md:mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-xl flex flex-col gap-2  md:flex-row items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-yellow-400 text-white rounded-full flex items-center justify-center shadow",children:"!"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-yellow-800",children:"Login Required"}),e.jsx("p",{className:"text-yellow-600 text-sm",children:"Please log in or verify your account to continue"})]})]}),e.jsx("button",{onClick:()=>R(!0),className:"ml-4 px-5 py-2 rounded-lg bg-primary-green text-white  transition",children:"Login / Verify"})]}),k&&e.jsx(Ie,{closeModal:()=>{R(!1);const w=localStorage.getItem("user_email");w&&(o(w),setTimeout(()=>N(),200))}})]})]})});ue.displayName="GuestDetailsForm";const Qe=()=>{const{details:t,setDetails:r,selectedRooms:l,setSelectedRooms:n,setEditAddPricing:i}=B(),s=W(),o=(a,x)=>{n(g=>{var k,R,S,P,E,_,I,h,C,d;const p=[...g],u=((R=(k=t[a])==null?void 0:k.roomData)==null?void 0:R.discountRate)||0,j=((E=(P=(S=t[a])==null?void 0:S.continentalPlan)==null?void 0:P.rate)==null?void 0:E.amount)||0,y=((_=p[a])==null?void 0:_.guestQty)||2,b=((h=(I=t[a])==null?void 0:I.roomData)==null?void 0:h.baseAdultOccupancy)||2,f=((d=(C=t[a])==null?void 0:C.roomData)==null?void 0:d.extraAdultRate)||0;let N=u;if(y>b){const A=y-b;N+=f*A}return x==="continental"&&(N+=j*y),p[a]=J(Z({},p[a]),{option:x,price:N}),p})},c=(a,x)=>{n(g=>{var P,E,_,I,h,C,d,A,O,w,M,G,z,U,T,V;const p=[...g],u=((E=(P=t[a])==null?void 0:P.roomData)==null?void 0:E.maxGuests)||2;let j=(I=(_=p[a])==null?void 0:_.guestQty)!=null?I:2,y=(C=(h=p[a])==null?void 0:h.showMaxGuestAlert)!=null?C:!1;x==="increment"?j<u?(j+=1,y=!1):y=!0:x==="decrement"&&(j>0&&(j-=1),y=!1);const b=((A=(d=t[a])==null?void 0:d.roomData)==null?void 0:A.discountRate)||0,f=((M=(w=(O=t[a])==null?void 0:O.continentalPlan)==null?void 0:w.rate)==null?void 0:M.amount)||0,N=((G=p[a])==null?void 0:G.option)||"roomOnly",k=((U=(z=t[a])==null?void 0:z.roomData)==null?void 0:U.baseAdultOccupancy)||2,R=((V=(T=t[a])==null?void 0:T.roomData)==null?void 0:V.extraAdultRate)||0;let S=b;if(j>k){const $=j-k;S+=R*$}return N==="continental"&&(S+=f*j),p[a]=J(Z({},p[a]),{guestQty:j,showMaxGuestAlert:y,price:S}),j===0&&(p.splice(a,1),r($=>$.filter((D,ge)=>ge!==a))),p})},m=()=>{var x,g,p,u;i(!0),localStorage.setItem("editAddPricing",!0);const a=((x=t[0])==null?void 0:x.name)||((p=(g=t[0])==null?void 0:g.roomData)==null?void 0:p.hotelName);s(pe((u=t[0])==null?void 0:u.hotelCode,a))};return e.jsxs(e.Fragment,{children:[t==null?void 0:t.map((a,x)=>{var p,u,j,y,b,f,N;const g=l[x]||{roomName:((p=a==null?void 0:a.roomData)==null?void 0:p.RoomName)||"",option:"roomOnly",price:((u=a==null?void 0:a.roomData)==null?void 0:u.discountRate)||0,guestQty:2,showMaxGuestAlert:!1};return g.guestQty===0?null:e.jsxs("div",{className:"flex flex-col gap-2 md:gap-4",children:[e.jsxs("div",{className:"flex flex-row lg:h-[120px] w-full  py-4 rounded-md border-gray-300 bg-white gap-4 font-sans",children:[e.jsx("div",{className:"w-1/2 md:w-1/3 relative",children:e.jsx("img",{src:(j=a==null?void 0:a.roomData)==null?void 0:j.roomImage[0],alt:"Hotel Room",className:"rounded-md w-full h-full object-cover"})}),e.jsxs("div",{className:"hidden md:flex flex-col justify-center w-full gap-3 ",children:[e.jsx("p",{className:"text-2xl font-bold text- ",children:(y=a==null?void 0:a.roomData)==null?void 0:y.RoomName}),e.jsxs("div",{className:" text-gray-800",children:[e.jsx("div",{className:"text-primary-green font-bold text-xl ",children:L(g.price)}),e.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]})]}),e.jsxs("div",{className:"hidden md:flex flex-col items-end  justify-end w-full lg:w-[490px] gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full lg:w-[180px] border border-primary-yellow p-2 gap-4 rounded-xl text-primary-yellow font-medium text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(x,"decrement"),children:e.jsx(ae,{})}),e.jsx("span",{children:g.guestQty>1?`${g.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(x,"increment"),children:e.jsx(oe,{})})]}),g.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 right-0 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ne,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(b=a==null?void 0:a.roomData)==null?void 0:b.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:m,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>n(k=>{const R=[...k];return R[x].showMaxGuestAlert=!1,R}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]}),e.jsxs("div",{className:"w-full md:hidden ",children:[e.jsx("p",{className:"text-lg md:text-2xl font-bold text- ",children:(f=a==null?void 0:a.roomData)==null?void 0:f.RoomName}),e.jsxs("div",{className:"flex justify-between mt-4 gap-2 w-full",children:[e.jsxs("div",{className:" text-gray-800",children:[e.jsx("div",{className:"text-primary-green font-bold text-md md:text-xl ",children:L(g.price)}),e.jsx("div",{className:"text-xs font-semibold",children:"Incl. taxes"})]}),e.jsxs("div",{className:"md:hidden flex flex-col justify-end  gap-4 relative",children:[e.jsxs("div",{className:"flex items-center justify-between w-full text-xs  border border-primary-yellow p-1 gap-1 rounded-md text-primary-yellow font-medium md:text-lg",children:[e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(x,"decrement"),children:e.jsx(ae,{})}),e.jsx("span",{children:g.guestQty>1?`${g.guestQty} Guests`:"1 Guest"}),e.jsx("span",{className:"cursor-pointer text-primary-yellow  hover:text-yellow-500",onClick:()=>c(x,"increment"),children:e.jsx(oe,{})})]}),g.showMaxGuestAlert&&e.jsx("div",{className:"absolute top-36 md:top-40 right-2 md:right-2 z-10 transform -translate-y-1/2 translate-x-4 bg-white border border-amber-200 px-4 py-3 rounded-lg md:w-[370px] shadow-lg w-72",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(ne,{size:18,className:"text-primary-yellow mt-0.5 mr-2 flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("p",{className:"text-md text-gray-500 mt-1",children:["Guest Limit Reached This room allows a maximum of ",(N=a==null?void 0:a.roomData)==null?void 0:N.maxGuests," guests per booking. Please adjust your selection."]}),e.jsxs("div",{className:"flex items-center justify-between gap-2 mt-3",children:[e.jsx("button",{onClick:m,className:" text-primary-yellow  hover:underline text-lg font-medium   transition-colors",children:"Modify Rooms"}),e.jsx("button",{onClick:()=>n(k=>{const R=[...k];return R[x].showMaxGuestAlert=!1,R}),className:" text-gray-400 hover:underline font-medium  text-lg",children:"Dismiss"})]})]})]})})]})]})]})]}),e.jsxs("div",{className:"w-full flex flex-col md:flex-row md:items-center md:gap-4",children:[e.jsx("h3",{className:"text-xl font-medium text-gray-600 mb-2",children:"Room Options:"}),e.jsxs("div",{className:"flex flex-col gap-2 pl-4 md:pl-0",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${x}`,value:"roomOnly",checked:g.option==="roomOnly",onChange:()=>o(x,"roomOnly"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Room Only"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"radio",name:`roomOption-${x}`,value:"continental",checked:g.option==="continental",onChange:()=>o(x,"continental"),className:"w-4 h-4 text-primary-green cursor-pointer border-2 border-primary-green focus:ring-primary-green"}),e.jsx("span",{className:"text-base text-gray-700 font-medium",children:"Continental Plan (Breakfast)"})]})]})]})]},x)}),t.length<=0&&e.jsx("p",{className:"text-center text-gray-500 text-lg font-medium",children:"No data available."})]})},qe=()=>{var u,j,y;const{details:t,setEditAddPricing:r}=B(),l=localStorage.getItem("hotelInfo"),n=l?JSON.parse(l):null,i=localStorage.getItem("checkInDate"),s=localStorage.getItem("checkOutDate"),o=i?new Date(i):null,c=s?new Date(s):null,m=W(),a=()=>o&&c?Ee(c,o):0,x=()=>{var f,N;r(!0),localStorage.setItem("editAddPricing","true");const b=(n==null?void 0:n.name)||((f=t[0])==null?void 0:f.name);m(pe((N=t[0])==null?void 0:N.hotelCode,b))},g=({date:b,label:f,time:N,isCheckOut:k=!1})=>e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("div",{className:"text-mobile/title md:text-desktop/h5/medium font-medium capitalize text-gray-900",children:b?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsx("span",{className:"font-bold",children:Q(b,"dd MMM, ")})," ",Q(b,"EEE")]}),e.jsxs("div",{className:"hidden md:block",children:[e.jsx("span",{className:"font-bold",children:Q(b,"dd MMM, ")})," ",Q(b,"EEEE")]})]}):e.jsxs("span",{className:"text-gray-400",children:["Select ",f.toLowerCase()]})}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"text-sm capitalize hidden md:block  font-medium text-gray-600  tracking-wide",children:f}),e.jsx("div",{className:"text-xs md:text-sm font-semibold text-gray-500",children:N||(k?"11:00 am":"1:00 pm")})]})]}),p=a();return e.jsxs("div",{className:" border-b-2",children:[e.jsxs("div",{className:"md:mb-4 mb-2",children:[e.jsx("h2",{className:"text-mobile/h4 md:text-desktop/h4 font-bold md:font-bold text-gray-900 md:mb-2",children:n==null?void 0:n.name}),e.jsx("p",{className:"text-sm md:text-base text-gray-600 leading-relaxed",children:(u=n==null?void 0:n.location)==null?void 0:u.hotelAddress})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center gap-4 ",children:[e.jsx(g,{date:o,label:"Check-in",time:(j=t[0])==null?void 0:j.checkIn}),e.jsx(Ae,{className:"text-primary-yellow text-2xl mb-1"}),e.jsx(g,{date:c,label:"Check-out",time:(y=t[0])==null?void 0:y.checkOut,isCheckOut:!0}),p>0&&e.jsxs("div",{className:"border-primary-yellow border text-primary-yellow px-3 py-1 rounded-full text-xs md:text-sm font-medium",children:[p," ",p===1?"Night":"Nights"]})]})}),e.jsx("button",{onClick:x,className:"inline-flex items-center  mb-2 text-primary-yellow underline font-medium transition-colors duration-200 ",children:e.jsx("span",{children:"Modify Date/Room Selection  "})})]})},We=(t,r)=>{if(!t||!r)return 0;const l=new Date(t),n=new Date(r),i=Math.abs(n-l);return Math.ceil(i/(1e3*60*60*24))},ft=()=>{var S,P,E,_;const{ContactUsDetail:t}=we(),{details:r,hotelData:l}=B(),n=r[0],i=W(),[s,o]=v.useState(!1),c=localStorage.getItem("user_email"),{data:m}=Y(c),[a,x]=v.useState(!1),g=localStorage.getItem("hotelInfo"),p=JSON.parse(g),u=localStorage.getItem("checkInDate"),j=localStorage.getItem("checkOutDate"),y=We(u,j),[b,f]=v.useState(!1),[N,k]=v.useState(!0),R=v.useRef();return v.useEffect(()=>{const I=document.querySelector("#payment-method");if(I){const h=new IntersectionObserver(([C])=>{f(C.isIntersecting)},{threshold:.1});return h.observe(I),()=>h.disconnect()}},[]),v.useEffect(()=>{b?setTimeout(()=>k(!1),300):k(!0)},[b]),v.useEffect(()=>{(!r||r.length===0||!n)&&i(`/hotels/${p==null?void 0:p.hotelCode}`)},[r,l,n,i,p]),!r||r.length===0||!n?null:e.jsxs("div",{className:"md:p-4 md:pb-0  bg-primary-green overflow-hidden",children:[e.jsxs(Oe,{children:[e.jsx("title",{children:"Booking Details"}),e.jsx("meta",{name:"",content:""}),e.jsx("meta",{name:"",content:""})]}),e.jsxs("div",{className:"content flex gap-3 md:gap-5 lg:gap-6 flex-col py-3 md:py-6 lg:py-10 px-3 md:px-0",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center cursor-pointer gap-2 md:gap-6 text-white",onClick:()=>i(-1),children:[e.jsx("button",{"aria-label":"Go back",className:"flex items-center flex-shrink-0",children:e.jsx(_e,{className:"text-white h-5 w-5 sm:h-6 sm:w-6 md:h-9 md:w-9"})}),e.jsx("img",{src:"/images/Logo/logo.svg",alt:n==null?void 0:n.name,className:"w-[100px] sm:w-[120px] md:w-[150px]"})]}),e.jsx("div",{className:"flex-shrink-0",children:c?e.jsxs("div",{onClick:()=>i("/user/profile"),className:"bg-white cursor-pointer text-primary-yellow font-bold w-10 h-10 sm:w-12 sm:h-12 md:h-12 md:w-12 rounded-full flex items-center justify-center text-sm sm:text-base",children:[(P=(S=m==null?void 0:m.data.firstName)==null?void 0:S[0])==null?void 0:P.toUpperCase(),(_=(E=m==null?void 0:m.data.lastName)==null?void 0:E[0])==null?void 0:_.toUpperCase()]}):e.jsx("button",{onClick:()=>x(!0),className:"border-2 border-primary-yellow text-primary-yellow px-3 py-1.5 sm:px-4 sm:py-2 rounded-full font-bold text-sm sm:text-base hover:bg-primary-yellow hover:text-white transition",children:"Login"})}),a&&e.jsx("div",{children:"Login Modal Here"})]}),e.jsx("div",{className:"text-white  text-mobile/head md:text-desktop/head",children:"Booking Details"})]}),e.jsxs("div",{className:"md:flex gap-5 content bg-white py-6 md:py-0 rounded-t-3xl overflow-visible relative",children:[e.jsxs("div",{className:"flex-1 flex flex-col md:px-8 md:py-10 gap-4 md:gap-8 min-w-0",children:[e.jsx(qe,{}),e.jsx(Qe,{}),n.addToYourStay.length>0&&e.jsx(He,{data:n}),e.jsx(ue,{ref:R,setIsVerified:o}),e.jsx(Ve,{hotelDetail:n,checkIn:u,verified:s}),e.jsx(Ge,{hotelDetail:n,verified:s,checkIn:u,checkOut:j}),e.jsx("div",{className:"xl:hidden",children:e.jsx(me,{hotelDetail:n,checkIn:u,checkOut:j,days:y,showButton:N,isPaymentVisible:b})}),e.jsx(Le,{ContactUsDetail:t})]}),e.jsx("div",{className:"hidden xl:block xl:w-[420px] flex-shrink-0 px-8 py-10",children:e.jsx(me,{hotelDetail:n,checkIn:u,checkOut:j,days:y,showButton:N,isPaymentVisible:b})})]})]})};export{ft as default};
