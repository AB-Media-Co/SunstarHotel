var Q=Object.defineProperty,V=Object.defineProperties;var X=Object.getOwnPropertyDescriptors;var U=Object.getOwnPropertySymbols;var Y=Object.prototype.hasOwnProperty,Z=Object.prototype.propertyIsEnumerable;var D=(s,n,i)=>n in s?Q(s,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[n]=i,d=(s,n)=>{for(var i in n||(n={}))Y.call(n,i)&&D(s,i,n[i]);if(U)for(var i of U(n))Z.call(n,i)&&D(s,i,n[i]);return s},l=(s,n)=>V(s,X(n));import{r as c,j as a}from"./index-Kj3knSog.js";import{u as $,a as aa,b as ea,c as ta}from"./useLocationHook-DVmwPRU3.js";import{I as M}from"./ImageUpload-GDMRwb_D.js";import{a as u,T as C,c as m}from"./TextField-7KJqB9OX.js";import{C as na,a as sa,G as h}from"./Grid-BkS2nylW.js";import{C as ia}from"./CardMedia-1Oepdhpq.js";import{C as oa,D as W,a as k,b as w,c as F}from"./DialogTitle-D29dIHtl.js";import"./useHotelHook2-CoeoE2sM.js";import"./createSvgIcon-C5wF46kr.js";import"./clsx-B-dksMZM.js";import"./useFormControl-CTHIuVRe.js";import"./hoist-non-react-statics.cjs-Cxfv-rx9.js";import"./index-DxHt9AM2.js";import"./useThemeProps-B8fkWxLm.js";const ra=(s,n=30)=>{if(!s)return"";const i=s.split(" ");return i.length<=n?s:i.slice(0,n).join(" ")+" ..."},ya=()=>{const{data:s,isLoading:n,isError:i,error:I}=$(),T=aa(),H=ea(),G=ta(),[g,j]=c.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,_]=c.useState(!1),[z,v]=c.useState(null),[p,f]=c.useState({name:"",aboutus:{heading:"",paragraph:""},image:""}),[,O]=c.useState(!1),[P,b]=c.useState(!1),[B,L]=c.useState(!1),y=e=>{const{name:t,value:o}=e.target;t==="name"?j(r=>l(d({},r),{name:o})):(t==="heading"||t==="paragraph")&&j(r=>l(d({},r),{aboutus:l(d({},r.aboutus),{[t]:o})}))},R=(e,t)=>{j(o=>l(d({},o),{[e]:t}))},A=e=>{e.preventDefault(),T.mutate(g),j({name:"",aboutus:{heading:"",paragraph:""},hotels:[],image:""}),b(!1)},q=e=>{var t,o;v(e._id),f({name:e.name,aboutus:{heading:((t=e.aboutus)==null?void 0:t.heading)||"",paragraph:((o=e.aboutus)==null?void 0:o.paragraph)||""},image:e.image||""}),L(!0)},E=e=>{const{name:t,value:o}=e.target;t==="name"?f(r=>l(d({},r),{name:o})):(t==="heading"||t==="paragraph")&&f(r=>l(d({},r),{aboutus:l(d({},r.aboutus),{[t]:o})}))},J=(e,t)=>{f(o=>l(d({},o),{[e]:t}))},N=e=>{e.preventDefault(),H.mutate({id:z,updateData:p}),L(!1),v(null)},S=()=>{L(!1),v(null)},K=e=>{G.mutate(e)};return a.jsxs("div",{className:"container mx-auto mt-24 p-4 px-16",children:[a.jsx("div",{className:"mb-6",children:a.jsx(u,{variant:"contained",color:"primary",onClick:()=>b(!0),children:"Add a Location"})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n?a.jsx("div",{children:"Loading..."}):i?a.jsxs("div",{children:["Error: ",I.message]}):s.map(e=>{var t,o,r;return a.jsxs(na,{className:"shadow-lg",children:[e.image&&a.jsx(ia,{component:"img",height:"140",image:e.image,alt:e.name}),a.jsxs(sa,{children:[a.jsx(C,{variant:"h6",component:"div",children:e.name}),a.jsx(C,{variant:"subtitle1",color:"textSecondary",children:(t=e.aboutus)==null?void 0:t.heading}),a.jsx(C,{variant:"body2",color:"textSecondary",sx:{mt:1},children:ra((o=e.aboutus)==null?void 0:o.paragraph,10)}),a.jsxs(C,{variant:"body2",color:"textSecondary",sx:{mt:1},children:["Hotels: ",(r=e.hotels)==null?void 0:r.length," (",e.hotels.map(x=>x!=null&&x.name?x.name:x).join(", "),")"]})]}),a.jsxs(oa,{children:[a.jsx(u,{size:"small",variant:"contained",color:"primary",onClick:()=>q(e),children:"Edit"}),a.jsx(u,{size:"small",variant:"outlined",color:"secondary",onClick:()=>K(e._id),children:"Delete"})]})]},e._id)})}),a.jsxs(W,{open:P,onClose:()=>b(!1),fullWidth:!0,maxWidth:"md",children:[a.jsx(k,{children:"Add New Location"}),a.jsx(w,{dividers:!0,children:a.jsxs("form",{onSubmit:A,className:"space-y-4",children:[a.jsx(m,{label:"Location Name",name:"name",value:g.name,onChange:y,fullWidth:!0}),a.jsxs(h,{container:!0,spacing:2,children:[a.jsx(h,{item:!0,xs:6,children:a.jsx(m,{label:"About Us Heading",name:"heading",value:g.aboutus.heading,onChange:y,fullWidth:!0})}),a.jsx(h,{item:!0,xs:6,children:a.jsx(m,{label:"About Us Paragraph",name:"paragraph",value:g.aboutus.paragraph,onChange:y,fullWidth:!0})})]}),a.jsx(M,{feature:g,handleFeatureChange:R,setImageUpload:_,index:0})]})}),a.jsxs(F,{children:[a.jsx(u,{onClick:()=>b(!1),variant:"outlined",color:"secondary",children:"Cancel"}),a.jsx(u,{onClick:A,variant:"contained",color:"primary",children:"Add Location"})]})]}),a.jsxs(W,{open:B,onClose:S,fullWidth:!0,maxWidth:"md",children:[a.jsx(k,{children:"Edit Location"}),a.jsx(w,{dividers:!0,children:a.jsxs("form",{onSubmit:N,className:"space-y-4",children:[a.jsx(m,{label:"Location Name",name:"name",value:p.name,onChange:E,fullWidth:!0}),a.jsxs(h,{container:!0,spacing:2,children:[a.jsx(h,{item:!0,xs:6,children:a.jsx(m,{label:"About Us Heading",name:"heading",value:p.aboutus.heading,onChange:E,fullWidth:!0})}),a.jsx(h,{item:!0,xs:6,children:a.jsx(m,{label:"About Us Paragraph",name:"paragraph",value:p.aboutus.paragraph,onChange:E,fullWidth:!0})})]}),a.jsx(M,{feature:p,handleFeatureChange:J,setImageUpload:O,index:0})]})}),a.jsxs(F,{children:[a.jsx(u,{onClick:S,variant:"outlined",color:"secondary",children:"Cancel"}),a.jsx(u,{onClick:N,variant:"contained",color:"primary",children:"Update"})]})]})]})};export{ya as HotelLocations,ya as default};
